{"version":3,"sources":["webpack:///webpack/bootstrap 424b70829dd347295aab","webpack:///./node_modules/cssprefix/src/cssprefix.js","webpack:///./src/plain-overlay.js","webpack:///./node_modules/anim-event/src/anim-event.js","webpack:///./node_modules/m-class-list/src/m-class-list.js","webpack:///./node_modules/timed-transition/src/timed-transition.js","webpack:///./src/default.scss"],"names":["ucf","text","substr","toUpperCase","PREFIXES","NAME_PREFIXES","reduce","prefixes","prefix","push","VALUE_PREFIXES","map","getDeclaration","declaration","document","createElement","style","normalizeName","rePrefixedName","RegExp","join","reUc","propName","replace","str","p1","test","toLowerCase","normalizeValue","rePrefixedValue","propValue","cssSupports","setProperty","getPropertyValue","propNames","propValues","window","getName","getNameDone","ucfName","some","prefixed","getValue","res","Array","isArray","getValueDone","CSSPrefix","ignoreNative","APP_ID","STYLE_ELEMENT_ID","STYLE_CLASS","STYLE_CLASS_DOC","STYLE_CLASS_SHOW","STYLE_CLASS_HIDE","STYLE_CLASS_FORCE","STYLE_CLASS_BODY","FACE_DEFS_ELEMENT_ID","STATE_HIDDEN","STATE_SHOWING","STATE_SHOWN","STATE_HIDING","DURATION","TOLERANCE","IS_TRIDENT","uniqueID","IS_EDGE","documentElement","navigator","msPointerEnabled","IS_WEBKIT","chrome","IS_BLINK","webstore","IS_GECKO","isObject","toString","fnToString","hasOwnProperty","objFnString","call","Object","proto","constr","obj","getPrototypeOf","constructor","isFinite","Number","value","insProps","insId","traceLog","STATE_TEXT","forceReflow","target","setTimeout","parent","parentNode","next","nextSibling","insertBefore","removeChild","setStyle","element","styleProps","savedStyleProps","keys","forEach","prop","restoreStyle","getBBox","rect","getBoundingClientRect","bBox","left","top","right","bottom","width","height","pageXOffset","pageYOffset","scrollLeft","isDoc","scrollTo","scrollTop","resizeTarget","props","elmTargetBody","Math","abs","targetBodyCmpStyle","getComputedStyle","boxSizing","includeProps","PROP_NAMES","border","padding","values","dir","part","parseFloat","savedStyleTargetBody","fixStyle","console","warn","getDocClientWH","elmTarget","clientWidth","clientHeight","wMode","writingMode","direction","restoreScroll","_id","state","scrollElement","error","savedElementsScroll","elementScroll","restoreAccKeys","savedElementsAccKeys","elementAccKeys","tabIndex","removeAttribute","accessKey","avoidFocus","tagName","id","ownerDocument","body","elmOverlay","compareDocumentPosition","Node","DOCUMENT_POSITION_CONTAINED_BY","blur","focus","selContainsNode","selection","node","partialContainment","nodeRange","createRange","iLen","rangeCount","selectNodeContents","i","selRange","getRangeAt","length","log","setStart","anchorNode","anchorOffset","setEnd","focusNode","focusOffset","Error","compareBoundaryPoints","Range","START_TO_END","END_TO_START","START_TO_START","END_TO_END","nodeContainsSel","selectNode","avoidSelect","getSelection","start","end","nodeType","TEXT_NODE","isCollapsed","elmOverlayBody","containsNode","removeAllRanges","barLeft","svgSpec","barTop","disableDocBars","targetBodyRect","clientWH","barV","barH","overflow","savedStyleTarget","propV","propH","addStyle","position","targetBodyBBox","overlayCmpStyle","overlayBBox","borders","offset","reValue","hBorder","vBorder","corner","split","h","v","matches","exec","getTargetElements","targetElements","prototype","slice","childNodes","childNode","ELEMENT_NODE","contains","apply","querySelectorAll","finishShowing","filterElements","options","filter","savedStyle","filterElement","onShow","ins","finishHiding","add","activeElement","stateSave","removeEventListener","focusListener","restoreAndFinish","timerRestoreAndFinish","addEventListener","onHide","clearTimeout","show","force","getScroll","elements","fromDoc","elementCanScroll","cmpStyle","nodeName","overflowX","overflowY","elementsScroll","disableAccKeys","hasAttribute","onBeforeShow","elmOverlayClassList","appendChild","remove","display","disabledDocBars","offsetWidth","onPosition","transition","on","hide","onBeforeHide","off","setOptions","newOptions","face","firstChild","duration","option","scroll","dirLeft","curValue","indexOf","find","found","PlainOverlay","getTarget","validElement","DOCUMENT_NODE","contentDocument","defineProperty","arguments","elmDocument","defaultView","getElementById","head","getElementsByTagName","sheet","type","textContent","procToOn","toggle","procToOff","property","event","propertyName","preventDefault","stopImmediatePropagation","listener","resizing","lastBBox","className","limit","MSPF","KEEP_LOOP","tasks","requestAnim","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","callback","cancelAnim","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","msCancelAnimationFrame","requestID","lastFrameTime","Date","now","requestAnimSave","cancelAnimSave","AnimEventByTimer","byTimer","step","called","task","indexOfTasks","index","AnimEvent","iRemove","splice","hookApply","normalize","token","trim","applyList","list","setAttribute","tokens","newToken","mClassList","classList","getAttribute","item","methodChain","fnc","STATE_STOPPED","STATE_DELAYING","STATE_PLAYING","PREFIX","EVENT_TYPE_RUN","EVENT_TYPE_START","EVENT_TYPE_END","EVENT_TYPE_CANCEL","roundTime","timeValue","round","fireEvent","isOn","runTime","startTime","currentPosition","initTime","min","max","delay","elapsedTime","TransitionEvent","pseudoElement","bubbles","cancelable","createEvent","initTransitionEvent","timedTransition","dispatchEvent","fixCurrentPosition","playingTime","finishAll","finishPlaying","finishDelaying","isReversing","durationLeft","timer","abort","parseAsCss","optionValue","lastParseAsCss","TimedTransition","initOn"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;AC7DA;;;;;;;;AAQA,SAASA,GAAT,CAAaC,IAAb,EAAmB;AAAE,SAAOA,KAAKC,MAAL,CAAY,CAAZ,EAAe,CAAf,EAAkBC,WAAlB,KAAkCF,KAAKC,MAAL,CAAY,CAAZ,CAAzC;AAA0D;;AAE/E,IAAME,WAAW,CAAC,QAAD,EAAW,IAAX,EAAiB,KAAjB,EAAwB,GAAxB,CAAjB;AAAA,IACEC,gBAAgBD,SAASE,MAAT,CAAgB,UAACC,QAAD,EAAWC,MAAX,EAAsB;AACpDD,WAASE,IAAT,CAAcD,MAAd;AACAD,WAASE,IAAT,CAAcT,IAAIQ,MAAJ,CAAd;AACA,SAAOD,QAAP;AACD,CAJe,EAIb,EAJa,CADlB;AAAA,IAMEG,iBAAiBN,SAASO,GAAT,CAAa;AAAA,eAAcH,MAAd;AAAA,CAAb,CANnB;;;AAQE;;;;AAIAI,iBAAkB,YAAM;AACtB,MAAIC,oBAAJ;AACA,SAAO;AAAA,WAAOA,cAAcA,eAAeC,SAASC,aAAT,CAAuB,KAAvB,EAA8BC,KAAlE;AAAA,GAAP;AACD,CAHgB,EAZnB;;;AAiBE;;;;;AAKAC,gBAAiB,YAAM;AACrB,MAAMC,iBAAiB,IAAIC,MAAJ,CAAW,SAASf,SAASgB,IAAT,CAAc,GAAd,CAAT,GAA8B,MAAzC,EAAiD,GAAjD,CAAvB;AAAA,MACEC,OAAO,OADT;AAEA,SAAO;AAAA,WAAY,CAACC,WAAW,CAACA,WAAW,EAAZ,EAAgBC,OAAhB,CAAwB,KAAxB,EAA+B,EAA/B,EAC5BA,OAD4B,CACpB,cADoB,EACJ,UAACC,GAAD,EAAMC,EAAN;AAAA,aAAaA,GAAGtB,WAAH,EAAb;AAAA,KADI,EAC2B;AACxD;AAF6B,KAG5BoB,OAH4B,CAGpBL,cAHoB,EAGJ,UAACM,GAAD,EAAMC,EAAN;AAAA,aAAaJ,KAAKK,IAAL,CAAUD,EAAV,IAAgBA,GAAGE,WAAH,EAAhB,GAAmCH,GAAhD;AAAA,KAHI,CAAZ,CAG6D;AAH7D,MAIjBG,WAJiB,OAIC,OAJD,GAIW,UAJX,GAIwBL,QAJpC;AAAA,GAAP,CAHqB,CAOgC;AACtD,CARe,EAtBlB;;;AAgCE;;;;;AAKAM,iBAAkB,YAAM;AACtB,MAAMC,kBAAkB,IAAIV,MAAJ,CAAW,SAAST,eAAeU,IAAf,CAAoB,GAApB,CAAT,GAAoC,GAA/C,EAAoD,GAApD,CAAxB;AACA,SAAO;AAAA,WAAa,CAACU,YAAY,EAAb,EAAiBP,OAAjB,CAAyB,KAAzB,EAAgC,EAAhC,EAAoCA,OAApC,CAA4CM,eAA5C,EAA6D,EAA7D,CAAb;AAAA,GAAP;AACD,CAHgB,EArCnB;;;AA0CE;;;;;;AAMAE,cAAe,YAAM;AACnB;AACA;AACA,SAAQ,UAACT,QAAD,EAAWQ,SAAX,EAAyB;AAC/B,QAAMjB,cAAcD,gBAApB;AACA;AACAU,eAAWA,SAASC,OAAT,CAAiB,QAAjB,EAA2B;AAAA,mBAAWC,IAAIG,WAAJ,EAAX;AAAA,KAA3B,CAAX,CAH+B,CAGwC;AACvEd,gBAAYmB,WAAZ,CAAwBV,QAAxB,EAAkCQ,SAAlC;AACA,WAAOjB,YAAYoB,gBAAZ,CAA6BX,QAA7B,MAA2CQ,SAAlD;AACD,GAND;AAOD,CAVa,EAhDhB;AAAA,IA4DEI,YAAY,EA5Dd;AAAA,IA4DkBC,aAAa,EA5D/B,C,CA4DmC;;AAEnC;AACAC,OAAOnB,aAAP,GAAuBA,aAAvB;AACAmB,OAAOR,cAAP,GAAwBA,cAAxB;AACAQ,OAAOL,WAAP,GAAqBA,WAArB;AACA;;AAEA,SAASM,OAAT,CAAiBf,QAAjB,EAA2B;AACzBA,aAAWL,cAAcK,QAAd,CAAX;AACA,MAAIA,YAAYY,UAAUZ,QAAV,KAAuB,IAAvC,EAA6C;AAC3Cc,WAAOE,WAAP,GAAqB,KAArB,CAD2C,CACf;AAC5B,QAAMzB,cAAcD,gBAApB;;AAEA,QAAIC,YAAYS,QAAZ,KAAyB,IAA7B,EAAmC;AAAE;AACnCY,gBAAUZ,QAAV,IAAsBA,QAAtB;AAED,KAHD,MAGO;AAAE;AACP,UAAMiB,UAAUvC,IAAIsB,QAAJ,CAAhB;AACA,UAAI,CAACjB,cAAcmC,IAAd,CAAmB,kBAAU;AAChC,YAAMC,WAAWjC,SAAS+B,OAA1B;AACA,YAAI1B,YAAY4B,QAAZ,KAAyB,IAA7B,EAAmC;AACjCP,oBAAUZ,QAAV,IAAsBmB,QAAtB;AACA,iBAAO,IAAP;AACD;AACD,eAAO,KAAP;AACD,OAPI,CAAL,EAOI;AACFP,kBAAUZ,QAAV,IAAsB,KAAtB;AACD;AACF;AAEF;AACD,SAAOY,UAAUZ,QAAV,KAAuB,KAAK,CAAnC;AACD;;AAED,SAASoB,QAAT,CAAkBpB,QAAlB,EAA4BQ,SAA5B,EAAuC;AACrC,MAAIa,YAAJ;;AAEA,MAAI,EAAErB,WAAWe,QAAQf,QAAR,CAAb,CAAJ,EAAqC;AAAE,WAAOqB,GAAP;AAAa,GAHf,CAGgB;;AAErDR,aAAWb,QAAX,IAAuBa,WAAWb,QAAX,KAAwB,EAA/C;AACA,GAACsB,MAAMC,OAAN,CAAcf,SAAd,IAA2BA,SAA3B,GAAuC,CAACA,SAAD,CAAxC,EAAqDU,IAArD,CAA0D,qBAAa;AACrEV,gBAAYF,eAAeE,SAAf,CAAZ;AACA,KAACM,OAAOU,YAAP,GAAsBV,OAAOU,YAAP,IAAuB,EAA9C,EAAkDrC,IAAlD,CAAuDqB,SAAvD,EAFqE,CAEF;;AAEnE,QAAIK,WAAWb,QAAX,EAAqBQ,SAArB,KAAmC,IAAvC,EAA6C;AAAE;AAC7C,UAAIK,WAAWb,QAAX,EAAqBQ,SAArB,MAAoC,KAAxC,EAA+C;AAC7Ca,cAAMR,WAAWb,QAAX,EAAqBQ,SAArB,CAAN;AACA,eAAO,IAAP;AACD,OAHD,MAGO;AACL,eAAO,KAAP,CADK,CACS;AACf;AACF;AACDM,WAAOU,YAAP,CAAoBrC,IAApB,CAAyB,KAAzB,EAZqE,CAYpC;;AAEjC,QAAIsB,YAAYT,QAAZ,EAAsBQ,SAAtB,CAAJ,EAAsC;AAAE;AACtCa,YAAMR,WAAWb,QAAX,EAAqBQ,SAArB,IAAkCA,SAAxC;AACA,aAAO,IAAP;AACD;;AAED,QAAIpB,eAAe8B,IAAf,CAAoB,kBAAU;AAAE;AAClC,UAAMC,WAAWjC,SAASsB,SAA1B;AACA,UAAIC,YAAYT,QAAZ,EAAsBmB,QAAtB,CAAJ,EAAqC;AACnCE,cAAMR,WAAWb,QAAX,EAAqBQ,SAArB,IAAkCW,QAAxC;AACA,eAAO,IAAP;AACD;AACD,aAAO,KAAP;AACD,KAPG,CAAJ,EAOI;AACF,aAAO,IAAP;AACD;;AAEDN,eAAWb,QAAX,EAAqBQ,SAArB,IAAkC,KAAlC;AACA,WAAO,KAAP,CA/BqE,CA+BvD;AACf,GAhCD;;AAkCA,SAAO,OAAOa,GAAP,KAAe,QAAf,GAA0BA,GAA1B,GAAgC,KAAK,CAA5C,CAxCqC,CAwCU;AAChD;;AAED,IAAMI,YAAY;AAChBV,WAASA,OADO;AAEhBK,YAAUA;AAFM,CAAlB;;kBAKeK,S;;;;;;;;;;;;;;qjBCzJf;;;;;;;;AAQA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AACA,qBAAWC,YAAX,GAA0B,IAA1B;;AAEA,IACEC,SAAS,cADX;AAAA,IAEEC,mBAAsBD,MAAtB,WAFF;AAAA,IAGEE,cAAcF,MAHhB;AAAA,IAIEG,kBAAqBH,MAArB,SAJF;AAAA,IAKEI,mBAAsBJ,MAAtB,UALF;AAAA,IAMEK,mBAAsBL,MAAtB,UANF;AAAA,IAOEM,oBAAuBN,MAAvB,WAPF;AAAA,IAQEO,mBAAsBP,MAAtB,UARF;AAAA,IASEQ,uBAA0BR,MAA1B,uBATF;AAAA,IAWES,eAAe,CAXjB;AAAA,IAWoBC,gBAAgB,CAXpC;AAAA,IAWuCC,cAAc,CAXrD;AAAA,IAWwDC,eAAe,CAXvE;;AAYE;AACAC,WAAW,GAbb;AAAA,IAakB;AAChBC,YAAY,GAdd;AAAA,IAgBEC,aAAa,CAAC,CAAClD,SAASmD,QAhB1B;AAAA,IAiBEC,UAAU,sBAAsBpD,SAASqD,eAAT,CAAyBnD,KAA/C,IACR,mBAAmBF,SAASqD,eAAT,CAAyBnD,KADpC,IAC6C,CAACoB,OAAOgC,SAAP,CAAiBC,gBAlB3E;AAAA,IAmBEC,YAAY,CAAClC,OAAOmC,MAAR,IAAkB,sBAAsBzD,SAASqD,eAAT,CAAyBnD,KAnB/E;AAAA,IAmBsF;AACpFwD,WAAW,CAAC,EAAEpC,OAAOmC,MAAP,IAAiBnC,OAAOmC,MAAP,CAAcE,QAAjC,CApBd;AAAA,IAqBEC,WAAW,mBAAmB5D,SAASqD,eAAT,CAAyBnD,KArBzD;AAAA,IAqBgE;;AAE9D2D,WAAY,YAAM;AAChB,MAAMC,WAAW,GAAGA,QAApB;AAAA,MAA8BC,aAAa,GAAGC,cAAH,CAAkBF,QAA7D;AAAA,MACEG,cAAcF,WAAWG,IAAX,CAAgBC,MAAhB,CADhB;AAEA,SAAO,eAAO;AACZ,QAAIC,cAAJ;AAAA,QAAWC,eAAX;AACA,WAAOC,OAAOR,SAASI,IAAT,CAAcI,GAAd,MAAuB,iBAA9B,KACJ,EAAEF,QAAQD,OAAOI,cAAP,CAAsBD,GAAtB,CAAV,KACC,CAACD,SAASD,MAAMJ,cAAN,CAAqB,aAArB,KAAuCI,MAAMI,WAAvD,KACA,OAAOH,MAAP,KAAkB,UADlB,IACgCN,WAAWG,IAAX,CAAgBG,MAAhB,MAA4BJ,WAHzD,CAAP;AAID,GAND;AAOD,CAVU,EAvBb;AAAA,IAkCEQ,WAAWC,OAAOD,QAAP,IAAoB;AAAA,SAAS,OAAOE,KAAP,KAAiB,QAAjB,IAA6BrD,OAAOmD,QAAP,CAAgBE,KAAhB,CAAtC;AAAA,CAlCjC;;;AAoCE;;;;;;;;;;;;;;;AAeA;AACAC,WAAW,EApDb;;AAsDA,IAAIC,QAAQ,CAAZ;;AAEA;AACA,IAAMC,WAAW,EAAjB;AACA,IAAMC,aAAa,EAAnB;AACAA,WAAWnC,YAAX,IAA2B,cAA3B;AACAmC,WAAWlC,aAAX,IAA4B,eAA5B;AACAkC,WAAWjC,WAAX,IAA0B,aAA1B;AACAiC,WAAWhC,YAAX,IAA2B,cAA3B;AACA;;AAEA,SAASiC,WAAT,CAAqBC,MAArB,EAA6B;AAC3B;AACAC,aAAW,YAAM;AACf,QAAMC,SAASF,OAAOG,UAAtB;AAAA,QAAkCC,OAAOJ,OAAOK,WAAhD;AACA;AACAH,WAAOI,YAAP,CAAoBJ,OAAOK,WAAP,CAAmBP,MAAnB,CAApB,EAAgDI,IAAhD;AACD,GAJD,EAIG,CAJH;AAKD;AACD/D,OAAO0D,WAAP,GAAqBA,WAArB,C,CAAkC;;AAElC;;;;;;;;AAQA,SAASS,QAAT,CAAkBC,OAAlB,EAA2BC,UAA3B,EAAuCC,eAAvC,EAAwDxE,SAAxD,EAAmE;AACjE,MAAMlB,QAAQwF,QAAQxF,KAAtB;AACA,GAACkB,aAAa+C,OAAO0B,IAAP,CAAYF,UAAZ,CAAd,EAAuCG,OAAvC,CAA+C,gBAAQ;AACrD,QAAIH,WAAWI,IAAX,KAAoB,IAAxB,EAA8B;AAC5B,UAAIH,mBAAmBA,gBAAgBG,IAAhB,KAAyB,IAAhD,EAAsD;AACpDH,wBAAgBG,IAAhB,IAAwB7F,MAAM6F,IAAN,CAAxB;AACD;AACD7F,YAAM6F,IAAN,IAAcJ,WAAWI,IAAX,CAAd;AACAJ,iBAAWI,IAAX,IAAmB,IAAnB;AACD;AACF,GARD;AASA,SAAOL,OAAP;AACD;;AAED;;;;;;;AAOA,SAASM,YAAT,CAAsBN,OAAtB,EAA+BE,eAA/B,EAAgDxE,SAAhD,EAA2D;AACzD,SAAOqE,SAASC,OAAT,EAAkBE,eAAlB,EAAmC,IAAnC,EAAyCxE,SAAzC,CAAP;AACD;;AAED;;;;;;;;;;;AAWA;;;;;;AAMA,SAAS6E,OAAT,CAAiBP,OAAjB,EAA0BpE,MAA1B,EAAkC;AAChC,MAAM4E,OAAOR,QAAQS,qBAAR,EAAb;AAAA,MACEC,OAAO,EAACC,MAAMH,KAAKG,IAAZ,EAAkBC,KAAKJ,KAAKI,GAA5B;AACLC,WAAOL,KAAKK,KADP,EACcC,QAAQN,KAAKM,MAD3B,EACmCC,OAAOP,KAAKO,KAD/C,EACsDC,QAAQR,KAAKQ,MADnE,EADT;AAGA,MAAIpF,MAAJ,EAAY;AACV8E,SAAKC,IAAL,IAAa/E,OAAOqF,WAApB;AACAP,SAAKG,KAAL,IAAcjF,OAAOqF,WAArB;AACAP,SAAKE,GAAL,IAAYhF,OAAOsF,WAAnB;AACAR,SAAKI,MAAL,IAAelF,OAAOsF,WAAtB;AACD;AACD,SAAOR,IAAP;AACD;AACD9E,OAAO2E,OAAP,GAAiBA,OAAjB,C,CAA0B;;AAE1B,SAASY,UAAT,CAAoBnB,OAApB,EAA6BoB,KAA7B,EAAoCxF,MAApC,EAA4CqD,KAA5C,EAAmD;AACjD,MAAImC,KAAJ,EAAW;AACT,QAAM7B,SAAS3D,MAAf;AACA,QAAIqD,SAAS,IAAb,EAAmB;AAAEM,aAAO8B,QAAP,CAAgBpC,KAAhB,EAAuBM,OAAO2B,WAA9B;AAA6C;AAClE,WAAO3B,OAAO0B,WAAd;AACD,GAJD,MAIO;AACL,QAAM1B,UAASS,OAAf;AACA,QAAIf,SAAS,IAAb,EAAmB;AAAEM,cAAO4B,UAAP,GAAoBlC,KAApB;AAA4B;AACjD,WAAOM,QAAO4B,UAAd;AACD;AACF;AACDvF,OAAOuF,UAAP,GAAoBA,UAApB,C,CAAgC;;AAEhC,SAASG,SAAT,CAAmBtB,OAAnB,EAA4BoB,KAA5B,EAAmCxF,MAAnC,EAA2CqD,KAA3C,EAAkD;AAChD,MAAImC,KAAJ,EAAW;AACT,QAAM7B,SAAS3D,MAAf;AACA,QAAIqD,SAAS,IAAb,EAAmB;AAAEM,aAAO8B,QAAP,CAAgB9B,OAAO0B,WAAvB,EAAoChC,KAApC;AAA6C;AAClE,WAAOM,OAAO2B,WAAd;AACD,GAJD,MAIO;AACL,QAAM3B,WAASS,OAAf;AACA,QAAIf,SAAS,IAAb,EAAmB;AAAEM,eAAO+B,SAAP,GAAmBrC,KAAnB;AAA2B;AAChD,WAAOM,SAAO+B,SAAd;AACD;AACF;AACD1F,OAAO0F,SAAP,GAAmBA,SAAnB,C,CAA8B;;AAE9B,SAASC,YAAT,CAAsBC,KAAtB,EAA6BT,KAA7B,EAAoCC,MAApC,EAA4C;AAC1C,MAAMS,gBAAgBD,MAAMC,aAA5B;;AAEA,MAAIjB,OAAOiB,cAAchB,qBAAd,EAAX;AACA,MAAIiB,KAAKC,GAAL,CAASnB,KAAKO,KAAL,GAAaA,KAAtB,IAA+BxD,SAA/B,IACAmE,KAAKC,GAAL,CAASnB,KAAKQ,MAAL,GAAcA,MAAvB,IAAiCzD,SADrC,EACgD;AAAE;AAAS;;AAE3D,MAAMqE,qBAAqBJ,MAAM5F,MAAN,CAAaiG,gBAAb,CAA8BJ,aAA9B,EAA6C,EAA7C,CAA3B;AAAA,MACEK,YAAYF,mBAAmBE,SADjC;AAAA,MAEEC,eAAeD,cAAc,YAAd,GAA6B,EAA7B,GACbA,cAAc,aAAd,GAA8B,CAAC,QAAD,CAA9B,GAA2C,CAAC,QAAD,EAAW,SAAX,CAH/C;AAAA,MAGsE;;AAEpEE,eAAa;AACXC,YAAQ;AACNlB,aAAO,CAAC,iBAAD,EAAoB,kBAApB,CADD;AAENC,cAAQ,CAAC,gBAAD,EAAmB,mBAAnB;AAFF,KADG;AAKXkB,aAAS;AACPnB,aAAO,CAAC,aAAD,EAAgB,cAAhB,CADA;AAEPC,cAAQ,CAAC,YAAD,EAAe,eAAf;AAFD;AALE,GALf;AAAA,MAgBEmB,SAAS,CAAC,OAAD,EAAU,QAAV,EAAoBrI,MAApB,CAA2B,UAACqI,MAAD,EAASC,GAAT,EAAiB;AACnDL,iBAAa3B,OAAb,CAAqB,gBAAQ;AAC3B4B,iBAAWK,IAAX,EAAiBD,GAAjB,EAAsBhC,OAAtB,CAA8B,oBAAY;AACxC+B,eAAOC,GAAP,KAAeE,WAAWV,mBAAmB9G,QAAnB,CAAX,CAAf;AACD,OAFD;AAGD,KAJD;AAKA,WAAOqH,MAAP;AACD,GAPQ,EAON,EAACpB,OAAOA,KAAR,EAAeC,QAAQA,MAAvB,EAPM,CAhBX;;AAyBA;AACAjB,WAAS0B,aAAT,EAAwB;AACtB;AACAV,WAAOoB,OAAOpB,KAAP,GAAe,CAAf,GAAsBoB,OAAOpB,KAA7B,UAAyC,CAF1B;AAGtBC,YAAQmB,OAAOnB,MAAP,GAAgB,CAAhB,GAAuBmB,OAAOnB,MAA9B,UAA2C;AAH7B,GAAxB,EAIGQ,MAAMe,oBAJT;;AAMA;AACA,MAAMC,WAAW,EAAjB;AACAhC,SAAOiB,cAAchB,qBAAd,EAAP;AACA,MAAIiB,KAAKC,GAAL,CAASnB,KAAKO,KAAL,GAAaA,KAAtB,KAAgCxD,SAApC,EAA+C;AAC7C;AACAkF,YAAQC,IAAR,CAAa,qCAAmClC,KAAKO,KAAxC,qBACIA,KADJ,iBACqBoB,OAAOpB,KAD5B,OAAb;AAEA;AACAyB,aAASzB,KAAT,GAAoBoB,OAAOpB,KAAP,IAAgBP,KAAKO,KAAL,GAAaA,KAA7B,CAApB;AACD;AACD,MAAIP,KAAKQ,MAAL,KAAgBA,MAApB,EAA4B;AAC1B;AACAyB,YAAQC,IAAR,CAAa,sCAAoClC,KAAKQ,MAAzC,qBACIA,MADJ,iBACsBmB,OAAOnB,MAD7B,OAAb;AAEA;AACAwB,aAASxB,MAAT,GAAqBmB,OAAOnB,MAAP,IAAiBR,KAAKQ,MAAL,GAAcA,MAA/B,CAArB;AACD;AACDjB,WAAS0B,aAAT,EAAwBe,QAAxB,EAAkChB,MAAMe,oBAAxC;AACD;AACD3G,OAAO2F,YAAP,GAAsBA,YAAtB,C,CAAoC;;AAEpC;AACA,SAASoB,cAAT,CAAwBnB,KAAxB,EAA+B;AAC7B,MAAMoB,YAAYpB,MAAMoB,SAAxB;AAAA,MACE7B,QAAQ6B,UAAUC,WADpB;AAAA,MACiC7B,SAAS4B,UAAUE,YADpD;AAEA,MAAItF,cAAcE,OAAlB,EAA2B;AACzB,QAAMkE,qBAAqBJ,MAAM5F,MAAN,CAAaiG,gBAAb,CAA8BL,MAAMC,aAApC,EAAmD,EAAnD,CAA3B;AAAA,QACEsB,QAAQnB,mBAAmBoB,WAAnB,IAAkCpB,mBAAmB,cAAnB,CAD5C;AAAA,QACgF;AAC9EqB,gBAAYrB,mBAAmBqB,SAFjC;AAGA,WAAOF,UAAU,OAAV,IAAqBA,UAAU,OAA/B,IAA0CA,UAAU,OAApD,IAA+DA,UAAU,OAAzE,IACHrF,YACEuF,cAAc,KAAd,KAAwBF,UAAU,aAAV,IAA2BA,UAAU,aAA7D,KACAE,cAAc,KAAd,KAAwBF,UAAU,aAAV,IAA2BA,UAAU,aAA7D,CAFF,CADG,GAIL,EAAChC,OAAOC,MAAR,EAAgBA,QAAQD,KAAxB,EAJK,GAI4B;AACjC,MAACA,OAAOA,KAAR,EAAeC,QAAQA,MAAvB,EALF;AAMD,GAVD,MAUO;AACL,WAAO,EAACD,OAAOA,KAAR,EAAeC,QAAQA,MAAvB,EAAP;AACD;AACF;AACDpF,OAAO+G,cAAP,GAAwBA,cAAxB,C,CAAwC;;AAExC,SAASO,aAAT,CAAuB1B,KAAvB,EAA8BxB,OAA9B,EAAuC;AACrCZ,WAASnF,IAAT,CAAc,iBAAd,WAAwCuH,MAAM2B,GAA9C,aAA8D9D,WAAWmC,MAAM4B,KAAjB,CAA9D,EADqC,CACqD;;AAE1F,WAASC,aAAT,CAAuBrD,OAAvB,EAAgCoB,KAAhC,EAAuCT,IAAvC,EAA6CC,GAA7C,EAAkD;AAChD,QAAI;AACFO,iBAAWnB,OAAX,EAAoBoB,KAApB,EAA2BI,MAAM5F,MAAjC,EAAyC+E,IAAzC;AACAW,gBAAUtB,OAAV,EAAmBoB,KAAnB,EAA0BI,MAAM5F,MAAhC,EAAwCgF,GAAxC;AACD,KAHD,CAGE,OAAO0C,KAAP,EAAc,CAAE,iEAAmE;AACtF;;AAED,MAAItD,OAAJ,EAAa;AACX,WAAOwB,MAAM+B,mBAAN,CAA0BvH,IAA1B,CAA+B,yBAAiB;AACrD,UAAIwH,cAAcxD,OAAd,KAA0BA,OAA9B,EAAuC;AACrCqD,sBAAcG,cAAcxD,OAA5B,EAAqCwD,cAAcpC,KAAnD,EAA0DoC,cAAc7C,IAAxE,EAA8E6C,cAAc5C,GAA5F;AACA,eAAO,IAAP;AACD;AACD,aAAO,KAAP;AACD,KANM,KAOJxB,SAASnF,IAAT,CAAc,cAAd,WAAqCuH,MAAM2B,GAA3C,EAAkD,kBAAlD,GAAuE,IAPnE,MAO2E;AAC/E/D,aAASnF,IAAT,CAAc,aAAd,WAAoCuH,MAAM2B,GAA1C,EAAiD,kBAAjD,GAAsE,KARlE,CAAP,CAQgF;AARhF;AAUD,GAXD,MAWO;AACL3B,UAAM+B,mBAAN,CAA0BnD,OAA1B,CAAkC,yBAAiB;AACjDiD,oBAAcG,cAAcxD,OAA5B,EAAqCwD,cAAcpC,KAAnD,EAA0DoC,cAAc7C,IAAxE,EAA8E6C,cAAc5C,GAA5F;AACD,KAFD;AAGAxB,aAASnF,IAAT,CAAc,UAAd,WAAiCuH,MAAM2B,GAAvC,EAA8C,kBAA9C,EAJK,CAI8D;AACnE,WAAO,IAAP;AACD;AACF;;AAED,SAASM,cAAT,CAAwBjC,KAAxB,EAA+B;AAC7BA,QAAMkC,oBAAN,CAA2BtD,OAA3B,CAAmC,0BAAkB;AACnD,QAAI;AACF,UAAIuD,eAAeC,QAAf,KAA4B,KAAhC,EAAuC;AACrCD,uBAAe3D,OAAf,CAAuB6D,eAAvB,CAAuC,UAAvC;AACD,OAFD,MAEO,IAAIF,eAAeC,QAAf,IAA2B,IAA/B,EAAqC;AAC1CD,uBAAe3D,OAAf,CAAuB4D,QAAvB,GAAkCD,eAAeC,QAAjD;AACD;AACF,KAND,CAME,OAAON,KAAP,EAAc,CAAE,iEAAmE;;AAErF,QAAI;AACF,UAAIK,eAAeG,SAAnB,EAA8B;AAC5BH,uBAAe3D,OAAf,CAAuB8D,SAAvB,GAAmCH,eAAeG,SAAlD;AACD;AACF,KAJD,CAIE,OAAOR,KAAP,EAAc,CAAE,iEAAmE;AACtF,GAdD;AAeD;AACD1H,OAAO6H,cAAP,GAAwBA,cAAxB,C,CAAwC;;AAExC,SAASM,UAAT,CAAoBvC,KAApB,EAA2BxB,OAA3B,EAAoC;AAClC;AACAZ,WAASnF,IAAT,CAAc,cAAd,WAAqCuH,MAAM2B,GAA3C,aAA2D9D,WAAWmC,MAAM4B,KAAjB,CAA3D;AACAhE,WAASnF,IAAT,CACE,cAAW+F,YAAY1F,QAAZ,GAAuB,UAAvB,GAAoC0F,QAAQgE,OAAR,IAAmB,SAAlE,WACGhE,QAAQiE,EAAR,SAAiBjE,QAAQiE,EAAzB,GAAgC,EADnC,EADF;AAGA;AACA,MAAIzC,MAAMJ,KAAN,IAAepB,YAAYA,QAAQkE,aAAR,CAAsBC,IAAjD,IACE,EAAE3C,MAAM4C,UAAN,CAAiBC,uBAAjB,CAAyCrE,OAAzC,IAAoDsE,KAAKC,8BAA3D,CADF,IAEA,CAAC/C,MAAMJ,KAAP,KAAiBpB,YAAYwB,MAAMC,aAAlB,IACfD,MAAMC,aAAN,CAAoB4C,uBAApB,CAA4CrE,OAA5C,IAAuDsE,KAAKC,8BAD9D,CAFJ,EAGmG;AACjG,QAAIvE,QAAQwE,IAAZ,EAAkB;AAAE;AAClBxE,cAAQwE,IAAR;AACD,KAFD,MAEO;AACLxE,cAAQkE,aAAR,CAAsBC,IAAtB,CAA2BM,KAA3B;AACD;AACDrF,aAASnF,IAAT,CAAc,MAAd,WAA6BuH,MAAM2B,GAAnC,EAA0C,eAA1C,EANiG,CAMrC;AAC5D,WAAO,IAAP;AACD;AACD/D,WAASnF,IAAT,CAAc,aAAd,WAAoCuH,MAAM2B,GAA1C,EAAiD,eAAjD,EAnBkC,CAmBiC;AACnE,SAAO,KAAP;AACD;;AAED;AACA,SAASuB,eAAT,CAAyBC,SAAzB,EAAoCC,IAApC,EAA0CC,kBAA1C,EAA8D;AAC5D,MAAMC,YAAYF,KAAKV,aAAL,CAAmBa,WAAnB,EAAlB;AAAA,MACEC,OAAOL,UAAUM,UADnB;AAEAH,YAAUI,kBAAV,CAA6BN,IAA7B;AACA,OAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAIH,IAApB,EAA0BG,GAA1B,EAA+B;AAC7B,QAAMC,WAAWT,UAAUU,UAAV,CAAqBF,CAArB,CAAjB;AACA;AACA;AACA,QAAI,CAACC,SAAShH,QAAT,GAAoBkH,MAArB,IAA+BX,UAAUvG,QAAV,GAAqBkH,MAApD,IAA8DN,SAAS,CAA3E,EAA8E;AAC5EvC,cAAQ8C,GAAR,CAAY,2BAAZ,EAD4E,CAClC;AAC1CH,eAASI,QAAT,CAAkBb,UAAUc,UAA5B,EAAwCd,UAAUe,YAAlD;AACAN,eAASO,MAAT,CAAgBhB,UAAUiB,SAA1B,EAAqCjB,UAAUkB,WAA/C;AACA;AACA,UAAIT,SAAShH,QAAT,OAAwBuG,UAAUvG,QAAV,EAA5B,EAAkD;AAChDgH,iBAASI,QAAT,CAAkBb,UAAUiB,SAA5B,EAAuCjB,UAAUkB,WAAjD;AACAT,iBAASO,MAAT,CAAgBhB,UAAUc,UAA1B,EAAsCd,UAAUe,YAAhD;AACA,YAAIN,SAAShH,QAAT,OAAwBuG,UAAUvG,QAAV,EAA5B,EAAkD;AAChD,gBAAM,IAAI0H,KAAJ,CAAU,8CAAV,CAAN;AACD;AACF;AACF;AACD,QAAIjB,qBACAO,SAASW,qBAAT,CAA+BC,MAAMC,YAArC,EAAmDnB,SAAnD,KAAiE,CAAjE,IACAM,SAASW,qBAAT,CAA+BC,MAAME,YAArC,EAAmDpB,SAAnD,KAAiE,CAFjE,GAGAM,SAASW,qBAAT,CAA+BC,MAAMG,cAArC,EAAqDrB,SAArD,IAAkE,CAAlE,IACAM,SAASW,qBAAT,CAA+BC,MAAMI,UAArC,EAAiDtB,SAAjD,IAA8D,CAJlE,EAIqE;AACnE,aAAO,IAAP;AACD;AACF;AACD,SAAO,KAAP;AACD;AACDlJ,OAAO8I,eAAP,GAAyBA,eAAzB,C,CAA0C;;AAE1C;;;;;;AAMA,SAAS2B,eAAT,CAAyBzB,IAAzB,EAA+BD,SAA/B,EAA0C;AACxC,MAAMG,YAAYF,KAAKV,aAAL,CAAmBa,WAAnB,EAAlB;AAAA,MACEC,OAAOL,UAAUM,UADnB;AAEAH,YAAUwB,UAAV,CAAqB1B,IAArB;AACA,OAAK,IAAIO,IAAI,CAAb,EAAgBA,IAAIH,IAApB,EAA0BG,GAA1B,EAA+B;AAC7B,QAAMC,WAAWT,UAAUU,UAAV,CAAqBF,CAArB,CAAjB;AACA,QAAIC,SAASW,qBAAT,CAA+BC,MAAMG,cAArC,EAAqDrB,SAArD,IAAkE,CAAlE,IACAM,SAASW,qBAAT,CAA+BC,MAAMI,UAArC,EAAiDtB,SAAjD,IAA8D,CADlE,EACqE;AACnE,aAAO,KAAP;AACD;AACF;AACD,SAAO,IAAP;AACD;AACDlJ,OAAOyK,eAAP,GAAyBA,eAAzB,C,CAA0C;;AAE1C,SAASE,WAAT,CAAqB/E,KAArB,EAA4B;AAC1BpC,WAASnF,IAAT,CAAc,eAAd,WAAsCuH,MAAM2B,GAA5C,aAA4D9D,WAAWmC,MAAM4B,KAAjB,CAA5D,EAD0B,CAC8D;AACxF,MAAMuB,YAAY,CAAC,kBAAkB/I,MAAlB,GAA2B4F,MAAM5F,MAAjC,GAA0C4F,MAAMlH,QAAjD,EAA2DkM,YAA3D,EAAlB;AACA;AACA,MAAI7B,UAAUM,UAAd,EAA0B;AACxB,QAAIwB,QAAQ9B,UAAUc,UAAtB;AAAA,QAAkCiB,MAAM/B,UAAUiB,SAAlD;AACA,QAAIa,SAASA,MAAME,QAAN,KAAmBrC,KAAKsC,SAArC,EAAgD;AAAEH,cAAQA,MAAM/G,UAAd;AAA2B;AAC7E,QAAIgH,OAAOA,IAAIC,QAAJ,KAAiBrC,KAAKsC,SAAjC,EAA4C;AAAEF,YAAMA,IAAIhH,UAAV;AAAuB;AACrEN,aAASnF,IAAT,CACE,YAAS,CAACwM,KAAD,GAAS,MAAT,GAAkBA,UAAUnM,QAAV,GAAqB,UAArB,GAAkCmM,MAAMzC,OAAN,IAAiB,SAA9E,WACGyC,SAASA,MAAMxC,EAAf,SAAwBwC,MAAMxC,EAA9B,GAAqC,EADxC,YAEIU,UAAUe,YAFd,sBAGQ,CAACgB,GAAD,GAAO,MAAP,GAAgBA,QAAQpM,QAAR,GAAmB,UAAnB,GAAgCoM,IAAI1C,OAAJ,IAAe,SAHvE,YAIG0C,OAAOA,IAAIzC,EAAX,SAAoByC,IAAIzC,EAAxB,GAA+B,EAJlC,YAKIU,UAAUkB,WALd,6BAMgBlB,UAAUkC,WAN1B,CADF;AASD,GAbD,MAaO;AACLzH,aAASnF,IAAT,CAAc,SAAd;AACD;AACD;AACA,MAAI0K,UAAUM,UAAV,KAAyBzD,MAAMJ,KAAN,GACzB,CAACiF,gBAAgB7E,MAAMsF,cAAtB,EAAsCnC,SAAtC,CADwB,GAExBA,UAAUoC,YAAV,KACI,CAAC/I,QAAD,IAAa,CAAC2G,UAAUkC,WAD5B,IAC4C;AAC3ClC,YAAUoC,YAAV,CAAuBvF,MAAMC,aAA7B,EAA4C,IAA5C,CAFD,GAGCiD,gBAAgBC,SAAhB,EAA2BnD,MAAMC,aAAjC,EAAgD,IAAhD,CALF,CAAJ,EAMO;AACL,QAAI;AACFkD,gBAAUqC,eAAV,GADE,CAC2B;AAC9B,KAFD,CAEE,OAAO1D,KAAP,EAAc,CAAE,YAAc;AAChC9B,UAAMlH,QAAN,CAAe6J,IAAf,CAAoBM,KAApB;AACA;AACA,QAAIE,UAAUM,UAAV,GAAuB,CAA3B,EAA8B;AAC5B,UAAI;AACFN,kBAAUqC,eAAV,GADE,CAC2B;AAC9B,OAFD,CAEE,OAAO1D,KAAP,EAAc,CAAE,YAAc;AACjC;AACDlE,aAASnF,IAAT,CAAc,MAAd,WAA6BuH,MAAM2B,GAAnC,EAA0C,gBAA1C,EAXK,CAWwD;AAC7D,WAAO,IAAP;AACD;AACD/D,WAASnF,IAAT,CAAc,aAAd,WAAoCuH,MAAM2B,GAA1C,EAAiD,gBAAjD,EAzC0B,CAyC0C;AACpE,SAAO,KAAP;AACD;;AAED,SAAS8D,OAAT,CAAiBlE,KAAjB,EAAwBE,SAAxB,EAAmC;AACjC,MAAMiE,UAAUnE,UAAU,OAAV,IAAqBA,UAAU,OAA/B,IAA0CA,UAAU,OAApD,IAA+DA,UAAU,OAAzF;AACA,SAAOvF,cAAc0J,OAAd,IACLxJ,YAAYwJ,WACVjE,cAAc,KAAd,KAAwBF,UAAU,eAAV,IAA6BA,UAAU,aAA/D,CADU,IAEVE,cAAc,KAAd,IAAuBF,UAAU,aAFnC,CADF;AAID;AACDnH,OAAOqL,OAAP,GAAiBA,OAAjB,C,CAA0B;;AAE1B,SAASE,MAAT,CAAgBpE,KAAhB,EAAuBE,SAAvB,EAAkC;AAChC,MAAMiE,UAAUnE,UAAU,OAAV,IAAqBA,UAAU,OAA/B,IAA0CA,UAAU,OAApD,IAA+DA,UAAU,OAAzF;AACA,SAAOvF,cAAc0J,OAAd,IACLxJ,YAAYwJ,WACVjE,cAAc,KAAd,KAAwBF,UAAU,aAAV,IAA2BA,UAAU,aAA7D,CADF,CADF;AAGD;AACDnH,OAAOuL,MAAP,GAAgBA,MAAhB,C,CAAwB;;AAExB,SAASC,cAAT,CAAwB5F,KAAxB,EAA+B;AAC7B,MAAMoB,YAAYpB,MAAMoB,SAAxB;AAAA,MAAmCnB,gBAAgBD,MAAMC,aAAzD;AAAA,MACE4F,iBAAiB5F,cAAchB,qBAAd,EADnB;;AAGA;AACA,MAAI6G,WAAW3E,eAAenB,KAAf,CAAf;AAAA,MACE+F,OAAO,CAACD,SAASvG,KADnB;AAAA,MAC0ByG,OAAO,CAACF,SAAStG,MAD3C,CAL6B,CAMsB;AACnDjB,WAAS6C,SAAT,EAAoB,EAAC6E,UAAU,QAAX,EAApB,EAA0CjG,MAAMkG,gBAAhD;AACAJ,aAAW3E,eAAenB,KAAf,CAAX;AACA+F,UAAQD,SAASvG,KAAjB;AACAyG,UAAQF,SAAStG,MAAjB;;AAEA,MAAIuG,QAAQC,IAAZ,EAAkB;AAChB,QAAM5F,qBAAqBJ,MAAM5F,MAAN,CAAaiG,gBAAb,CAA8BJ,aAA9B,EAA6C,EAA7C,CAA3B;AACA,QAAIkG,cAAJ;AAAA,QAAWC,cAAX;AACA;AACA;AACA;AACA;AACA;AACA,QAAIpK,cAAcE,OAAlB,EAA2B;AACzB,UAAMqF,QAAQnB,mBAAmBoB,WAAnB,IAAkCpB,mBAAmB,cAAnB,CAAhD;AAAA,UAAoF;AAClFqB,kBAAYrB,mBAAmBqB,SADjC;AAEA,UAAIsE,IAAJ,EAAU;AAAEI,gBAAQV,QAAQlE,KAAR,EAAeE,SAAf,IAA4B,YAA5B,GAA2C,aAAnD;AAAmE;AAC/E,UAAIuE,IAAJ,EAAU;AAAEI,gBAAQT,OAAOpE,KAAP,EAAcE,SAAd,IAA2B,WAA3B,GAAyC,cAAjD;AAAkE;AAC/E,KALD,MAKO;AACL,UAAIsE,IAAJ,EAAU;AAAEI,gBAAQ,aAAR;AAAwB;AACpC,UAAIH,IAAJ,EAAU;AAAEI,gBAAQ,cAAR;AAAyB;AACtC;;AAED,QAAMC,WAAW,EAAjB;AACA,QAAIN,IAAJ,EAAU;AAAEM,eAASF,KAAT,IAAqBrF,WAAWV,mBAAmB+F,KAAnB,CAAX,IAAwCJ,IAA7D;AAAwE;AACpF,QAAIC,IAAJ,EAAU;AAAEK,eAASD,KAAT,IAAqBtF,WAAWV,mBAAmBgG,KAAnB,CAAX,IAAwCJ,IAA7D;AAAwE;AACpFzH,aAAS0B,aAAT,EAAwBoG,QAAxB,EAAkCrG,MAAMe,oBAAxC;AACAhB,iBAAaC,KAAb,EAAoB6F,eAAetG,KAAnC,EAA0CsG,eAAerG,MAAzD;;AAEA;AACAkC,kBAAc1B,KAAd,EAAqBoB,SAArB;AACA,WAAO,IAAP;AACD,GA3BD,MA2BO;AACLtC,iBAAasC,SAAb,EAAwBpB,MAAMkG,gBAA9B,EAAgD,CAAC,UAAD,CAAhD;AACA,WAAO,KAAP;AACD;AACF;AACD9L,OAAOwL,cAAP,GAAwBA,cAAxB,C,CAAwC;;AAExC,SAASU,SAAT,CAAkBtG,KAAlB,EAAyBuG,cAAzB,EAAyC;AACvC,MAAMtG,gBAAgBD,MAAMC,aAA5B;AAAA,MACEG,qBAAqBJ,MAAM5F,MAAN,CAAaiG,gBAAb,CAA8BJ,aAA9B,EAA6C,EAA7C,CADvB;AAAA,MAGE2C,aAAa5C,MAAM4C,UAHrB;AAAA,MAIE4D,kBAAkBxG,MAAM5F,MAAN,CAAaiG,gBAAb,CAA8BuC,UAA9B,EAA0C,EAA1C,CAJpB;AAAA,MAKE6D,cAAc1H,QAAQ6D,UAAR,EAAoB5C,MAAM5F,MAA1B,CALhB;AAAA,MAOEsM,UAAU,CAAC,KAAD,EAAQ,OAAR,EAAiB,QAAjB,EAA2B,MAA3B,EAAmCpO,MAAnC,CAA0C,UAACoO,OAAD,EAAU7H,IAAV,EAAmB;AACrE6H,YAAQ7H,KAAKlF,WAAL,EAAR,IAA8BmH,WAAWV,8BAA4BvB,IAA5B,WAAX,CAA9B;AACA,WAAO6H,OAAP;AACD,GAHS,EAGP,EAHO,CAPZ;;;AAYE;AACAC,WAAS,EAACxH,MAAMsH,YAAYtH,IAAZ,GAAmB2B,WAAW0F,gBAAgBrH,IAA3B,CAA1B;AACPC,SAAKqH,YAAYrH,GAAZ,GAAkB0B,WAAW0F,gBAAgBpH,GAA3B,CADhB,EAbX;AAAA,MAgBEpG,QAAQ;AACNmG,UAASoH,eAAepH,IAAf,GAAsBwH,OAAOxH,IAA7B,GAAoCuH,QAAQvH,IAArD,OADM;AAENC,SAAQmH,eAAenH,GAAf,GAAqBuH,OAAOvH,GAA5B,GAAkCsH,QAAQtH,GAAlD,OAFM;AAGNG,WAAUgH,eAAehH,KAAf,GAAuBmH,QAAQvH,IAA/B,GAAsCuH,QAAQrH,KAAxD,OAHM;AAING,YAAW+G,eAAe/G,MAAf,GAAwBkH,QAAQtH,GAAhC,GAAsCsH,QAAQpH,MAAzD;AAJM,GAhBV;AAAA,MAsBEsH,UAAU,mBAtBZ;;AAwBA;AACA,GACE,EAAC/H,MAAM,SAAP,EAAkBgI,SAAS,MAA3B,EAAmCC,SAAS,KAA5C,EADF,EAEE,EAACjI,MAAM,UAAP,EAAmBgI,SAAS,OAA5B,EAAqCC,SAAS,KAA9C,EAFF,EAGE,EAACjI,MAAM,aAAP,EAAsBgI,SAAS,OAA/B,EAAwCC,SAAS,QAAjD,EAHF,EAIE,EAACjI,MAAM,YAAP,EAAqBgI,SAAS,MAA9B,EAAsCC,SAAS,QAA/C,EAJF,EAKElI,OALF,CAKU,kBAAU;AAClB,QAAMC,OAAO,oBAAUxE,OAAV,YAA2B0M,OAAOlI,IAAlC,YAAb;AAAA,QACE8B,SAASP,mBAAmBvB,IAAnB,EAAyBmI,KAAzB,CAA+B,GAA/B,CADX;AAEA,QAAIC,IAAItG,OAAO,CAAP,CAAR;AAAA,QAAmBuG,IAAIvG,OAAO,CAAP,KAAaA,OAAO,CAAP,CAApC;AAAA,QACEwG,UAAUP,QAAQQ,IAAR,CAAaH,CAAb,CADZ;AAEAA,QAAI,CAACE,OAAD,GAAW,CAAX,GACFA,QAAQ,CAAR,MAAe,IAAf,GAAsB,CAACA,QAAQ,CAAR,CAAvB,GACAA,QAAQ,CAAR,IAAaZ,eAAehH,KAA5B,GAAoC,GAFtC;AAGA4H,cAAUP,QAAQQ,IAAR,CAAaF,CAAb,CAAV;AACAA,QAAI,CAACC,OAAD,GAAW,CAAX,GACFA,QAAQ,CAAR,MAAe,IAAf,GAAsB,CAACA,QAAQ,CAAR,CAAvB,GACAA,QAAQ,CAAR,IAAaZ,eAAe/G,MAA5B,GAAqC,GAFvC;;AAIAyH,SAAKP,QAAQK,OAAOF,OAAf,CAAL;AACAK,SAAKR,QAAQK,OAAOD,OAAf,CAAL;AACA,QAAIG,IAAI,CAAJ,IAASC,IAAI,CAAjB,EAAoB;AAClBlO,YAAM6F,IAAN,IAAiBoI,CAAjB,WAAwBC,CAAxB;AACD;AACF,GAvBD;;AAyBA3I,WAASqE,UAAT,EAAqB5J,KAArB;AACAgH,QAAMuG,cAAN,GAAuBA,cAAvB;AACD;AACDnM,OAAOkM,QAAP,GAAkBA,SAAlB,C,CAA4B;;AAE5B,SAASe,iBAAT,CAA2BrH,KAA3B,EAAkC;AAChC,MAAMC,gBAAgBD,MAAMC,aAA5B;AAAA,MACE2C,aAAa5C,MAAM4C,UADrB;AAAA,MAEE0E,iBAAiB,CAACtH,MAAMoB,SAAP,CAFnB;AAGA,MAAIpB,MAAMJ,KAAV,EAAiB;AACf0H,mBAAe7O,IAAf,CAAoBwH,aAApB;AACArF,UAAM2M,SAAN,CAAgBC,KAAhB,CAAsBxK,IAAtB,CAA2BiD,cAAcwH,UAAzC,EAAqD7I,OAArD,CAA6D,qBAAa;AACxE,UAAI8I,UAAUvC,QAAV,KAAuBrC,KAAK6E,YAA5B,IACAD,cAAc9E,UADd,IAEA,CAAC,0BAAW8E,SAAX,EAAsBE,QAAtB,CAA+BzM,WAA/B,CAFD,IAGAuM,UAAUjF,EAAV,KAAiBhH,oBAHrB,EAG2C;AACzC6L,uBAAe7O,IAAf,CAAoBiP,SAApB;AACA9M,cAAM2M,SAAN,CAAgB9O,IAAhB,CAAqBoP,KAArB,CAA2BP,cAA3B,EAA2CI,UAAUI,gBAAV,CAA2B,GAA3B,CAA3C;AACD;AACF,KARD;AASD,GAXD,MAWO;AACLlN,UAAM2M,SAAN,CAAgB9O,IAAhB,CAAqBoP,KAArB,CAA2BP,cAA3B,EAA2CrH,cAAc6H,gBAAd,CAA+B,GAA/B,CAA3C;AACD;AACD,SAAOR,cAAP;AACD;;AAED,SAASS,aAAT,CAAuB/H,KAAvB,EAA8B;AAC5BpC,WAASnF,IAAT,CAAc,iBAAd,WAAwCuH,MAAM2B,GAA9C,aAA8D9D,WAAWmC,MAAM4B,KAAjB,CAA9D,EAD4B,CAC8D;AAC1F;AACA5B,QAAMgI,cAAN,GAAuB,IAAvB;AACA,MAAIhI,MAAMiI,OAAN,CAAcjF,IAAd,KAAuB,KAA3B,EAAkC;AAChC,QAAM1J,WAAW,oBAAUe,OAAV,CAAkB,QAAlB,CAAjB;AAAA,QACEP,YAAY,oBAAUY,QAAV,CAAmB,QAAnB,YAAqCsF,MAAMiI,OAAN,CAAcjF,IAAnD,SADd;AAEA,QAAIlJ,SAAJ,EAAe;AAAE;AACf;AACA,UAAMkO,iBAAiBhI,MAAMJ,KAAN,GACrBhF,MAAM2M,SAAN,CAAgBC,KAAhB,CAAsBxK,IAAtB,CAA2BgD,MAAMC,aAAN,CAAoBwH,UAA/C,EAA2DS,MAA3D,CAAkE;AAAA,eAC9DR,UAAUvC,QAAV,KAAuBrC,KAAK6E,YAA5B,IACAD,cAAc1H,MAAM4C,UADpB,IAEA,CAAC,0BAAW8E,SAAX,EAAsBE,QAAtB,CAA+BzM,WAA/B,CAFD,IAGAuM,UAAUjF,EAAV,KAAiBhH,oBAJ6C;AAAA,OAAlE,EAKG9C,GALH,CAKO;AAAA,eAAY,EAAC6F,SAASA,OAAV,EAAmB2J,YAAY,EAA/B,EAAZ;AAAA,OALP,CADqB,GAOrB,CAAC,EAAC3J,SAASwB,MAAMC,aAAhB,EAA+BkI,YAAY,EAA3C,EAAD,CAPF;;AASAH,qBAAepJ,OAAf,CAAuB,yBAAiB;AACtC,YAAM5F,QAAQ,EAAd,CADsC,CACpB;AAClBA,cAAMM,QAAN,IAAkBQ,SAAlB;AACAyE,iBAAS6J,cAAc5J,OAAvB,EAAgCxF,KAAhC,EAAuCoP,cAAcD,UAArD;AACD,OAJD;AAKAnI,YAAMgI,cAAN,GAAuBA,cAAvB;AACD;AACF;;AAEDhI,QAAM4B,KAAN,GAAchG,WAAd;AACAgC,WAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EA5B4B,CA4BuB;AACnD,MAAI5B,MAAMiI,OAAN,CAAcI,MAAlB,EAA0B;AAAErI,UAAMiI,OAAN,CAAcI,MAAd,CAAqBrL,IAArB,CAA0BgD,MAAMsI,GAAhC;AAAuC;AACnE1K,WAASnF,IAAT,UAAqBuH,MAAM2B,GAA3B,EAAkC,kBAAlC,EA9B4B,CA8B2B;AACxD;;AAED,SAAS4G,YAAT,CAAsBvI;AAClB;;;AADJ,EAIM;AACJ;AACApC,WAASnF,IAAT,CAAc,gBAAd,WAAuCuH,MAAM2B,GAA7C,aAA6D9D,WAAWmC,MAAM4B,KAAjB,CAA7D,EAFI,CAEqF;AACzF;;;AAGA,4BAAW5B,MAAM4C,UAAjB,EAA6B4F,GAA7B,CAAiClN,gBAAjC;;AAEAwD,eAAakB,MAAMoB,SAAnB,EAA8BpB,MAAMkG,gBAApC;AACApH,eAAakB,MAAMC,aAAnB,EAAkCD,MAAMe,oBAAxC;AACAf,QAAMkG,gBAAN,GAAyB,EAAzB;AACAlG,QAAMe,oBAAN,GAA6B,EAA7B;;AAEAkB,iBAAejC,KAAf;AACAA,QAAMkC,oBAAN,GAA6B,EAA7B;;AAEA;AACI;;;AAGAlC,QAAMJ,KAAN,IAAeI,MAAMyI,aAJzB,EAIwC;AACtC;AACA,QAAMC,YAAY1I,MAAM4B,KAAxB;AACA5B,UAAM4B,KAAN,GAAclG,YAAd;AACAkC,aAASnF,IAAT,mBAA8BoF,WAAWmC,MAAM4B,KAAjB,CAA9B,EAJsC,CAIoB;AAC1D;AACAhE,aAASnF,IAAT,CAAc,sBAAd,EANsC,CAMC;AACvCuH,UAAMC,aAAN,CAAoB0I,mBAApB,CAAwC,OAAxC,EAAiD3I,MAAM4I,aAAvD,EAAsE,IAAtE;AACA5I,UAAMyI,aAAN,CAAoBxF,KAApB;AACA;AACAjD,UAAM4B,KAAN,GAAc8G,SAAd;AACA9K,aAASnF,IAAT,mBAA8BoF,WAAWmC,MAAM4B,KAAjB,CAA9B,EAXsC,CAWoB;AAC3D;AACD5B,QAAMyI,aAAN,GAAsB,IAAtB;;AAEA;AACA,WAASI,gBAAT,GAA4B;AAC1BjL,aAASnF,IAAT,CAAc,iCAAd,WAAwDuH,MAAM2B,GAA9D,aAA8E9D,WAAWmC,MAAM4B,KAAjB,CAA9E,EAD0B,CACgF;AAC1G5B,UAAM8I,qBAAN,GAA8B,IAA9B;AACA9I,UAAM4B,KAAN,GAAclG,YAAd;AACAkC,aAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EAJ0B,CAIyB;AACnDhE,aAASnF,IAAT,CAAc,mBAAd,EAL0B,CAKU;AACpCuH,UAAMC,aAAN,CAAoB8I,gBAApB,CAAqC,OAArC,EAA8C/I,MAAM4I,aAApD,EAAmE,IAAnE;AACAlH,kBAAc1B,KAAd;AACAA,UAAM+B,mBAAN,GAA4B,IAA5B;;AAEA,QAAI/B,MAAMiI,OAAN,CAAce,MAAlB,EAA0B;AAAEhJ,YAAMiI,OAAN,CAAce,MAAd,CAAqBhM,IAArB,CAA0BgD,MAAMsI,GAAhC;AAAuC;AACnE1K,aAASnF,IAAT,UAAqBuH,MAAM2B,GAA3B,EAAkC,kCAAlC,EAX0B,CAW6C;AACxE;;AAED,MAAI3B,MAAM8I,qBAAV,EAAiC;AAC/BlL,aAASnF,IAAT,CAAc,gBAAd,EAD+B,CACE;AACjCwQ,iBAAajJ,MAAM8I,qBAAnB;AACA9I,UAAM8I,qBAAN,GAA8B,IAA9B;AACD;AACD;;;;oBAvDI,CA2De;AACjB9I,QAAM8I,qBAAN,GAA8B9K,WAAW6K,gBAAX,EAA6B,CAA7B,CAA9B;AACF;;;AAGAjL,WAASnF,IAAT,UAAqBuH,MAAM2B,GAA3B,EAAkC,iBAAlC,EAhEI,CAgEkD;AACvD;;AAED;;;;;AAKA,SAASuH,KAAT,CAAclJ,KAAd,EAAqBmJ,KAArB,EAA4B;AAC1BvL,WAASnF,IAAT,CAAc,QAAd,WAA+BuH,MAAM2B,GAArC,aAAqD9D,WAAWmC,MAAM4B,KAAjB,CAArD,EAD0B,CACuD;AACjFhE,WAASnF,IAAT,YAAuB,CAAC,CAAC0Q,KAAzB,EAF0B,CAES;;AAEnC,WAASC,SAAT,CAAmBC,QAAnB,EAA6BC,OAA7B,EAAsC;;AAEpC,aAASC,gBAAT,CAA0B/K,OAA1B,EAAmCoB,KAAnC,EAA0C;AACxC,UAAM4J,WAAWxJ,MAAM5F,MAAN,CAAaiG,gBAAb,CAA8B7B,OAA9B,EAAuC,EAAvC,CAAjB;AAAA,UACEgE,UAAUhE,QAAQiL,QAAR,CAAiB9P,WAAjB,EADZ;AAEA,aAAQ6P,SAASvD,QAAT,KAAsB,QAAtB,IAAkCuD,SAASvD,QAAT,KAAsB,MAAxD,IACJuD,SAASE,SAAT,KAAuB,QADnB,IAC+BF,SAASE,SAAT,KAAuB,MADtD,IAEJF,SAASG,SAAT,KAAuB,QAFnB,IAE+BH,SAASG,SAAT,KAAuB,MAFvD;AAGL;AACA/J,gBAAU4J,SAASvD,QAAT,KAAsB,SAAtB,IACRuD,SAASE,SAAT,KAAuB,SADf,IAC4BF,SAASG,SAAT,KAAuB,SAD7D,CAJK;AAML;AACA,OAAC/J,KAAD,KAAW4C,YAAY,UAAZ,IAA0BA,YAAY,QAAjD,CAPF;AAQD;;AAED,QAAMoH,iBAAiB,EAAvB;AACAP,aAASzK,OAAT,CAAiB,UAACJ,OAAD,EAAUmF,CAAV,EAAgB;AAC/B,UAAM/D,QAAQ0J,WAAW3F,MAAM,CAA/B;AACA,UAAI4F,iBAAiB/K,OAAjB,EAA0BoB,KAA1B,CAAJ,EAAsC;AACpCgK,uBAAenR,IAAf,CAAoB;AAClB+F,mBAASA,OADS;AAElBoB,iBAAOA,KAFW;AAGlBT,gBAAMQ,WAAWnB,OAAX,EAAoBoB,KAApB,EAA2BI,MAAM5F,MAAjC,CAHY;AAIlBgF,eAAKU,UAAUtB,OAAV,EAAmBoB,KAAnB,EAA0BI,MAAM5F,MAAhC;AAJa,SAApB;AAMD;AACF,KAVD;AAWA,WAAOwP,cAAP;AACD;;AAED,WAASC,cAAT,CAAwBR,QAAxB,EAAkCC,OAAlC,EAA2C;AACzC,QAAMpH,uBAAuB,EAA7B;AACAmH,aAASzK,OAAT,CAAiB,UAACJ,OAAD,EAAUmF,CAAV,EAAgB;AAC/B,UAAI2F,WAAW3F,MAAM,CAArB,EAAwB;AAAE;AAAS;;AAEnC,UAAMxB,iBAAiB,EAAvB;AAAA,UACEC,WAAW5D,QAAQ4D,QADrB;AAEA;AACA,UAAIA,aAAa,CAAC,CAAlB,EAAqB;AACnBD,uBAAe3D,OAAf,GAAyBA,OAAzB;AACA2D,uBAAeC,QAAf,GAA0B5D,QAAQsL,YAAR,CAAqB,UAArB,IAAmC1H,QAAnC,GAA8C,KAAxE;AACA5D,gBAAQ4D,QAAR,GAAmB,CAAC,CAApB;AACD;;AAED,UAAME,YAAY9D,QAAQ8D,SAA1B;AACA,UAAIA,SAAJ,EAAe;AACbH,uBAAe3D,OAAf,GAAyBA,OAAzB;AACA2D,uBAAeG,SAAf,GAA2BA,SAA3B;AACA9D,gBAAQ8D,SAAR,GAAoB,EAApB;AACD;;AAED,UAAIH,eAAe3D,OAAnB,EAA4B;AAC1B0D,6BAAqBzJ,IAArB,CAA0B0J,cAA1B;AACD;AACF,KAtBD;AAuBA,WAAOD,oBAAP;AACD;;AAED,MAAIlC,MAAM4B,KAAN,KAAgBhG,WAAhB,IACAoE,MAAM4B,KAAN,KAAgBjG,aAAhB,IAAiC,CAACwN,KADlC,IAEAnJ,MAAM4B,KAAN,KAAgBjG,aAAhB,IACEqE,MAAMiI,OAAN,CAAc8B,YADhB,IACgC/J,MAAMiI,OAAN,CAAc8B,YAAd,CAA2B/M,IAA3B,CAAgCgD,MAAMsI,GAAtC,MAA+C,KAHnF,EAG0F;AACxF1K,aAASnF,IAAT,CAAc,QAAd,EAAwB,SAAxB,EADwF,CACpD;AACpC;AACD;;AAED,MAAIuH,MAAM4B,KAAN,KAAgBlG,YAApB,EAAkC;AAChC,QAAMkH,aAAa5C,MAAM4C,UAAzB;AAAA,QACEoH,sBAAsB,0BAAWpH,UAAX,CADxB;AAEA5C,UAAMlH,QAAN,CAAe6J,IAAf,CAAoBsH,WAApB,CAAgCrH,UAAhC,EAHgC,CAGa;AAC7C,QAAM0E,iBAAiBD,kBAAkBrH,KAAlB,CAAvB;AACA5F,WAAOkN,cAAP,GAAwBA,cAAxB,CALgC,CAKQ;;AAExC0C,wBAAoBE,MAApB,CAA2B5O,gBAA3B,EAPgC,CAOc;AAC9C,QAAI,CAAC0E,MAAMJ,KAAX,EAAkB;AAChB,UAAMK,gBAAgBD,MAAMC,aAA5B;AACA,UAAID,MAAM5F,MAAN,CAAaiG,gBAAb,CAA8BJ,aAA9B,EAA6C,EAA7C,EAAiDkK,OAAjD,KAA6D,QAAjE,EAA2E;AACzE5L,iBAAS0B,aAAT,EAAwB,EAACkK,SAAS,cAAV,EAAxB,EAAmDnK,MAAMe,oBAAzD;AACD;AACDuF,gBAAStG,KAAT,EAAgBjB,QAAQkB,aAAR,EAAuBD,MAAM5F,MAA7B,CAAhB;AACD;;AAED4F,UAAM+B,mBAAN,GAA4BqH,UAAU9B,cAAV,EAA0BtH,MAAMJ,KAAhC,CAA5B;AACAI,UAAMoK,eAAN,GAAwB,KAAxB;AACA;AACA,QAAIpK,MAAMJ,KAAN,IAAeI,MAAM+B,mBAAN,CAA0B+B,MAAzC,IAAmD9D,MAAM+B,mBAAN,CAA0B,CAA1B,EAA6BnC,KAApF,EAA2F;AACzFI,YAAMoK,eAAN,GAAwBxE,eAAe5F,KAAf,CAAxB;AACD;AACDA,UAAMkC,oBAAN,GAA6B2H,eAAevC,cAAf,EAA+BtH,MAAMJ,KAArC,CAA7B;AACAI,UAAMyI,aAAN,GAAsBzI,MAAMlH,QAAN,CAAe2P,aAArC;AACA,QAAIzI,MAAMyI,aAAV,EAAyB;AAAElG,iBAAWvC,KAAX,EAAkBA,MAAMyI,aAAxB;AAAyC;AACpE1D,gBAAY/E,KAAZ;AACA4C,eAAWyH,WAAX,CA1BgC,CA0BR,kBA1BQ,CA0BW;;AAE3C,QAAIrK,MAAMiI,OAAN,CAAcqC,UAAlB,EAA8B;AAAEtK,YAAMiI,OAAN,CAAcqC,UAAd,CAAyBtN,IAAzB,CAA8BgD,MAAMsI,GAApC;AAA2C;AAC5E;;AAEDtI,QAAMuK,UAAN,CAAiBC,EAAjB,CAAoBrB,KAApB;AACAnJ,QAAM4B,KAAN,GAAcjG,aAAd;AACAiC,WAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EAvG0B,CAuGyB;AACnD,MAAIuH,KAAJ,EAAW;AACTpB,kBAAc/H,KAAd;AACD;AACDpC,WAASnF,IAAT,UAAqBuH,MAAM2B,GAA3B,EAAkC,SAAlC,EA3G0B,CA2GoB;AAC/C;;AAED;;;;;AAKA,SAAS8I,KAAT,CAAczK,KAAd,EAAqBmJ;AACjB;;;AADJ,EAIM;AACJ;AACAvL,WAASnF,IAAT,CAAc,QAAd,WAA+BuH,MAAM2B,GAArC,aAAqD9D,WAAWmC,MAAM4B,KAAjB,CAArD,EAFI,CAE6E;AACjFhE,WAASnF,IAAT,YAAuB,CAAC,CAAC0Q,KAAzB,EAHI,CAG+B;AACnC;;;AAGA,MAAInJ,MAAM4B,KAAN,KAAgBlG,YAAhB,IACAsE,MAAM4B,KAAN,KAAgB/F,YAAhB,IAAgC,CAACsN,KADjC,IAEAnJ,MAAM4B,KAAN,KAAgB/F,YAAhB,IACEmE,MAAMiI,OAAN,CAAcyC,YADhB,IACgC1K,MAAMiI,OAAN,CAAcyC,YAAd,CAA2B1N,IAA3B,CAAgCgD,MAAMsI,GAAtC,MAA+C,KAHnF,EAG0F;AACxF1K,aAASnF,IAAT,CAAc,QAAd,EAAwB,SAAxB,EADwF,CACpD;AACpC;AACD;;AAED;AACA,MAAIuH,MAAMgI,cAAV,EAA0B;AACxBhI,UAAMgI,cAAN,CAAqBpJ,OAArB,CACE,yBAAiB;AAAEE,mBAAasJ,cAAc5J,OAA3B,EAAoC4J,cAAcD,UAAlD;AAAgE,KADrF;AAEAnI,UAAMgI,cAAN,GAAuB,IAAvB;AACD;;AAED;AACA,MAAMxJ,UAAUwB,MAAMlH,QAAN,CAAe2P,aAA/B;AACA,MAAIjK,WAAWA,YAAYA,QAAQkE,aAAR,CAAsBC,IAA7C,IACA3C,MAAM4C,UAAN,CAAiBC,uBAAjB,CAAyCrE,OAAzC,IAAoDsE,KAAKC,8BAD7D,EAC6F;AAC3F,QAAIvE,QAAQwE,IAAZ,EAAkB;AAAE;AAClBxE,cAAQwE,IAAR;AACD,KAFD,MAEO;AACLxE,cAAQkE,aAAR,CAAsBC,IAAtB,CAA2BM,KAA3B;AACD;AACF;;AAEDjD,QAAMuK,UAAN,CAAiBI,GAAjB,CAAqBxB,KAArB;AACAnJ,QAAM4B,KAAN,GAAc/F,YAAd;AACA+B,WAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EAnCI,CAmC+C;AACnD,MAAIuH,KAAJ,EAAW;AACTZ,iBAAavI;AACX;;;AADF;AAKD;AACDpC,WAASnF,IAAT,UAAqBuH,MAAM2B,GAA3B,EAAkC,SAAlC,EA3CI,CA2C0C;AAC/C;;AAED;;;;;AAKA,SAASiJ,WAAT,CAAoB5K,KAApB,EAA2B6K,UAA3B,EAAuC;AACrC,MAAM5C,UAAUjI,MAAMiI,OAAtB;;AAEA;AACA,MAAI4C,WAAW/N,cAAX,CAA0B,MAA1B,KACA,CAAC+N,WAAWC,IAAX,IAAmB,IAAnB,GAA0B,KAAK,CAA/B,GAAmCD,WAAWC,IAA/C,MAAyD7C,QAAQ6C,IADrE,EAC2E;AACzE,QAAMxF,iBAAiBtF,MAAMsF,cAA7B;AACA;AACA,WAAOA,eAAeyF,UAAtB,EAAkC;AAAEzF,qBAAehH,WAAf,CAA2BgH,eAAeyF,UAA1C;AAAwD;AAC5F,QAAIF,WAAWC,IAAX,KAAoB,KAAxB,EAA+B;AAAE;AAC/B7C,cAAQ6C,IAAR,GAAe,KAAf;AACD,KAFD,MAEO,IAAID,WAAWC,IAAX,IAAmBD,WAAWC,IAAX,CAAgB3F,QAAhB,KAA6BrC,KAAK6E,YAAzD,EAAuE;AAAE;AAC9EM,cAAQ6C,IAAR,GAAeD,WAAWC,IAA1B;AACAxF,qBAAe2E,WAAf,CAA2BY,WAAWC,IAAtC;AACD,KAHM,MAGA,IAAID,WAAWC,IAAX,IAAmB,IAAvB,EAA6B;AAAE;AACpC7C,cAAQ6C,IAAR,GAAe,KAAK,CAApB;AACD;AACF;;AAED;AACA,MAAIvN,SAASsN,WAAWG,QAApB,KAAiCH,WAAWG,QAAX,KAAwB/C,QAAQ+C,QAArE,EAA+E;AAC7E/C,YAAQ+C,QAAR,GAAmBH,WAAWG,QAA9B;AACAhL,UAAM4C,UAAN,CAAiB5J,KAAjB,CAAuB,oBAAUqB,OAAV,CAAkB,oBAAlB,CAAvB,IACEwQ,WAAWG,QAAX,KAAwBlP,QAAxB,GAAmC,EAAnC,GAA2C+O,WAAWG,QAAtD,OADF;AAEAhL,UAAMuK,UAAN,CAAiBS,QAAjB,GAA+BH,WAAWG,QAA1C;AACD;;AAED;AACA,MAAIzN,SAASsN,WAAW7H,IAApB,KAA6B6H,WAAW7H,IAAX,KAAoB,KAArD,EAA4D;AAC1DiF,YAAQjF,IAAR,GAAe6H,WAAW7H,IAA1B;AACD;;AAED;AACA,MAAIrG,SAASkO,WAAW7R,KAApB,CAAJ,EAAgC;AAC9BuF,aAASyB,MAAM4C,UAAf,EAA2BiI,WAAW7R,KAAtC;AACD;;AAED;AACA,GAAC,QAAD,EAAW,QAAX,EAAqB,cAArB,EAAqC,cAArC,EAAqD,YAArD,EAAmE4F,OAAnE,CAA2E,kBAAU;AACnF,QAAI,OAAOiM,WAAWI,MAAX,CAAP,KAA8B,UAAlC,EAA8C;AAC5ChD,cAAQgD,MAAR,IAAkBJ,WAAWI,MAAX,CAAlB;AACD,KAFD,MAEO,IAAIJ,WAAW/N,cAAX,CAA0BmO,MAA1B,KAAqCJ,WAAWI,MAAX,KAAsB,IAA/D,EAAqE;AAC1EhD,cAAQgD,MAAR,IAAkB,KAAK,CAAvB;AACD;AACF,GAND;AAOD;;AAED,SAASC,MAAT,CAAgBlL,KAAhB,EAAuBjC,MAAvB,EAA+BoN,OAA/B,EAAwC1N,KAAxC,EAA+C;AAC7C,MAAImC,cAAJ;AAAA,MAAWwL,iBAAX;;AAEA,MAAIrN,MAAJ,EAAY;AACV,QAAMuJ,iBAAiBD,kBAAkBrH,KAAlB,CAAvB;AACA,QAAIsH,eAAe+D,OAAf,CAAuBtN,MAAvB,MAAmC,CAAC,CAAxC,EAA2C;AAAE,aAAOqN,QAAP;AAAkB,KAFrD,CAEsD;AAChExL,YAAQ7B,OAAO0L,QAAP,CAAgB9P,WAAhB,OAAkC,MAA1C;AACD,GAJD,MAIO;AACLoE,aAASiC,MAAMoB,SAAf;AACAxB,YAAQI,MAAMJ,KAAd;AACD;;AAED,MAAMoC,gBAAgBvE,SAAS,IAAT,IAAiBuC,MAAM+B,mBAAvB,KACnB/B,MAAM+B,mBAAN,CAA0BuJ,IAA1B,GACCtL,MAAM+B,mBAAN,CAA0BuJ,IAA1B,CAA+B;AAAA,WAAiBtJ,cAAcxD,OAAd,KAA0BT,MAA3C;AAAA,GAA/B,CADD,GAEE,0BAAkB;AACjB,QAAIwN,cAAJ;AACA3B,mBAAepP,IAAf,CAAoB,yBAAiB;AACnC,UAAIwH,cAAcxD,OAAd,KAA0BT,MAA9B,EAAsC;AACpCwN,gBAAQvJ,aAAR;AACA,eAAO,IAAP;AACD;AACD,aAAO,KAAP;AACD,KAND;AAOA,WAAOuJ,KAAP;AACD,GAVD,CAUGvL,MAAM+B,mBAVT,CAHkB,CAAtB;;AAeAqJ,aAAW,CAACD,UAAUxL,UAAV,GAAuBG,SAAxB,EAAmC/B,MAAnC,EAA2C6B,KAA3C,EAAkDI,MAAM5F,MAAxD,EAAgEqD,KAAhE,CAAX;AACA,MAAIuE,aAAJ,EAAmB;AAAEA,kBAAcmJ,UAAU,MAAV,GAAmB,KAAjC,IAA0CC,QAA1C;AAAqD;AAC1E,SAAOA,QAAP;AACD;;IAEKI,Y;AACJ;;;;;AAKA,wBAAYzN,MAAZ,EAAoBkK,OAApB,EAA6B;AAAA;;AAE3B;;;;AAIA,aAASwD,SAAT,CAAmB1N,MAAnB,EAA2B;AACzB,UAAI2N,qBAAJ;AACA,UAAI,CAAC3N,MAAL,EAAa;AACX2N,uBAAe5S,SAASqD,eAAxB,CADW,CAC8B;AAC1C,OAFD,MAEO,IAAI4B,OAAOoH,QAAX,EAAqB;AAC1B,YAAIpH,OAAOoH,QAAP,KAAoBrC,KAAK6I,aAA7B,EAA4C;AAC1CD,yBAAe3N,OAAO5B,eAAtB,CAD0C,CACH;AACxC,SAFD,MAEO,IAAI4B,OAAOoH,QAAP,KAAoBrC,KAAK6E,YAA7B,EAA2C;AAChD,cAAM8B,WAAW1L,OAAO0L,QAAP,CAAgB9P,WAAhB,EAAjB;AACA+R,yBACEjC,aAAa,MAAb,GAAsB1L,OAAO2E,aAAP,CAAqBvG,eAA3C,GAA6D;AAC7DsN,uBAAa,QAAb,IAAyBA,aAAa,OAAtC,GACE1L,OAAO6N,eAAP,CAAuBzP,eADzB,GAC2C;AAC3C4B,gBAJF;AAKD;AACD,YAAI,CAAC2N,YAAL,EAAmB;AAAE,gBAAM,IAAIpH,KAAJ,CAAU,+BAAV,CAAN;AAAmD;AACzE,OAZM,MAYA,IAAIvG,WAAWA,OAAO3D,MAAtB,EAA8B;AACnCsR,uBAAe3N,OAAOjF,QAAP,CAAgBqD,eAA/B,CADmC,CACa;AACjD;AACD,aAAOuP,YAAP;AACD;;AAED,QAAM1L,QAAQ;AACZsI,WAAK,IADO;AAEZL,eAAS,EAAE;AACT6C,cAAM,KADC,EACM;AACbE,kBAAUlP,QAFH,EAEa;AACpBkH,cAAM,KAHC,CAGK;AAHL,OAFG;AAOZpB,aAAOlG,YAPK;AAQZwK,wBAAkB,EARN;AASZnF,4BAAsB;AATV,KAAd;;AAYA9D,WAAO4O,cAAP,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC,EAACpO,OAAO,EAAEE,KAAV,EAAnC;AACAqC,UAAM2B,GAAN,GAAY,KAAKA,GAAjB;AACAjE,aAAS,KAAKiE,GAAd,IAAqB3B,KAArB;;AAEA,QAAI8L,UAAUhI,MAAV,KAAqB,CAAzB,EAA4B;AAC1B,UAAI,EAAE9D,MAAMoB,SAAN,GAAkBqK,UAAU1N,MAAV,CAApB,CAAJ,EAA4C;AAC1C,YAAI,CAACpB,SAASoB,MAAT,CAAL,EAAuB;AAAE,gBAAM,IAAIuG,KAAJ,CAAU,mBAAV,CAAN;AAAuC;AAChEtE,cAAMoB,SAAN,GAAkBtI,SAASqD,eAA3B,CAF0C,CAEE;AAC5C8L,kBAAUlK,MAAV;AACD;AACF,KAND,MAMO,IAAI,EAAEiC,MAAMoB,SAAN,GAAkBqK,UAAU1N,MAAV,CAApB,CAAJ,EAA4C;AACjD,YAAM,IAAIuG,KAAJ,CAAU,8BAAV,CAAN;AACD;AACD,QAAI,CAAC2D,OAAL,EAAc;AACZA,gBAAU,EAAV;AACD,KAFD,MAEO,IAAI,CAACtL,SAASsL,OAAT,CAAL,EAAwB;AAC7B,YAAM,IAAI3D,KAAJ,CAAU,kBAAV,CAAN;AACD;;AAEDtE,UAAMJ,KAAN,GAAcI,MAAMoB,SAAN,CAAgBqI,QAAhB,CAAyB9P,WAAzB,OAA2C,MAAzD;AACA,QAAMoS,cAAc/L,MAAMlH,QAAN,GAAiBkH,MAAMoB,SAAN,CAAgBsB,aAArD;AACA1C,UAAM5F,MAAN,GAAe2R,YAAYC,WAA3B;AACA,QAAM/L,gBAAgBD,MAAMC,aAAN,GAAsBD,MAAMJ,KAAN,GAAcmM,YAAYpJ,IAA1B,GAAiC3C,MAAMoB,SAAnF;;AAEA;AACA,QAAI,CAAC2K,YAAYE,cAAZ,CAA2B/Q,gBAA3B,CAAL,EAAmD;AACjD,UAAMgR,OAAOH,YAAYI,oBAAZ,CAAiC,MAAjC,EAAyC,CAAzC,KAA+CJ,YAAY5P,eAAxE;AAAA,UACEiQ,QAAQF,KAAK7N,YAAL,CAAkB0N,YAAYhT,aAAZ,CAA0B,OAA1B,CAAlB,EAAsDmT,KAAKnB,UAA3D,CADV;AAEAqB,YAAMC,IAAN,GAAa,UAAb;AACAD,YAAM3J,EAAN,GAAWvH,gBAAX;AACAkR,YAAME,WAAN;AACA,UAAItQ,cAAcE,OAAlB,EAA2B;AAAE4B,oBAAYsO,KAAZ;AAAqB,OAND,CAME;AACpD;;AAED;AACA,QAAMxJ,aAAa5C,MAAM4C,UAAN,GAAmBmJ,YAAYhT,aAAZ,CAA0B,KAA1B,CAAtC;AAAA,QACEiR,sBAAsB,0BAAWpH,UAAX,CADxB;AAEAoH,wBAAoBxB,GAApB,CAAwBrN,WAAxB,EAAqCG,gBAArC;AACA,QAAI0E,MAAMJ,KAAV,EAAiB;AAAEoK,0BAAoBxB,GAApB,CAAwBpN,eAAxB;AAA2C;;AAE9D;AACA4E,UAAMuK,UAAN,GAAmB,8BAAoB3H,UAApB,EAAgC;AACjD2J,gBAAU,yBAAS;AACjB,YAAMvC,sBAAsB,0BAAWpH,UAAX,CAA5B;AACAoH,4BAAoBwC,MAApB,CAA2BjR,iBAA3B,EAA8C,CAAC,CAAC4N,KAAhD;AACAa,4BAAoBxB,GAApB,CAAwBnN,gBAAxB;AACD,OALgD;AAMjDoR,iBAAW,0BAAS;AAClB,YAAMzC,sBAAsB,0BAAWpH,UAAX,CAA5B;AACAoH,4BAAoBwC,MAApB,CAA2BjR,iBAA3B,EAA8C,CAAC,CAAC4N,KAAhD;AACAa,4BAAoBE,MAApB,CAA2B7O,gBAA3B;AACD,OAVgD;AAWjD;AACAqR,gBAAU,SAZuC;AAajD1B,gBAAalP,QAAb;AAbiD,KAAhC,CAAnB;AAeA8G,eAAWmG,gBAAX,CAA4B,oBAA5B,EAAkD,iBAAS;AACzD,UAAI4D,MAAM5O,MAAN,KAAiB6E,UAAjB,IAA+B+J,MAAMC,YAAN,KAAuB,SAA1D,EAAqE;AACnE,YAAI5M,MAAM4B,KAAN,KAAgBjG,aAApB,EAAmC;AACjCoM,wBAAc/H,KAAd;AACD,SAFD,MAEO,IAAIA,MAAM4B,KAAN,KAAgB/F,YAApB,EAAkC;AACvC0M,uBAAavI,KAAb;AACD;AACF;AACF,KARD,EAQG,IARH;;AAUA,KAACA,MAAMJ,KAAN,GAAcI,MAAM5F,MAApB,GAA6B6F,aAA9B,EAA6C8I,gBAA7C,CAA8D,QAA9D,EAAwE,iBAAS;AAC/E;AACAnL,eAASnF,IAAT,CAAc,gBAAd,WAAuCuH,MAAM2B,GAA7C,aAA6D9D,WAAWmC,MAAM4B,KAAjB,CAA7D;AACAhE,eAASnF,IAAT,CACE,aAAUkU,MAAM5O,MAAN,KAAiBjF,QAAjB,GAA4B,UAA5B,GAAyC6T,MAAM5O,MAAN,CAAayE,OAAb,IAAwB,SAA3E,WACGmK,MAAM5O,MAAN,CAAa0E,EAAb,SAAsBkK,MAAM5O,MAAN,CAAa0E,EAAnC,GAA0C,EAD7C,EADF;AAGA;AACA,UAAM1E,SAAS4O,MAAM5O,MAArB;AACA,UAAIiC,MAAM4B,KAAN,KAAgBlG,YAAhB,IACAgG,cAAc1B,KAAd,EACEA,MAAMJ,KAAN,KACK7B,WAAWiC,MAAM5F,MAAjB,IAA2B2D,WAAWiC,MAAMlH,QAA5C,IAAwDiF,WAAWiC,MAAMC,aAD9E,IAEED,MAAMoB,SAFR,GAEoBrD,MAHtB,CADJ,EAImC;AACjCH,iBAASnF,IAAT,CAAc,SAAd,EADiC,CACP;AAC1BkU,cAAME,cAAN;AACAF,cAAMG,wBAAN;AACD;AACDlP,eAASnF,IAAT,UAAqBuH,MAAM2B,GAA3B,EAAkC,iBAAlC,EAjB+E,CAiBzB;AACvD,KAlBD,EAkBG,IAlBH;;AAoBA;AACA;AACA3B,UAAM4I,aAAN,GAAsB,iBAAS;AAC7B;AACAhL,eAASnF,IAAT,CAAc,iBAAd,WAAwCuH,MAAM2B,GAA9C,aAA8D9D,WAAWmC,MAAM4B,KAAjB,CAA9D;AACAhE,eAASnF,IAAT,CACE,aAAUkU,MAAM5O,MAAN,KAAiBjF,QAAjB,GAA4B,UAA5B,GAAyC6T,MAAM5O,MAAN,CAAayE,OAAb,IAAwB,SAA3E,WACGmK,MAAM5O,MAAN,CAAa0E,EAAb,SAAsBkK,MAAM5O,MAAN,CAAa0E,EAAnC,GAA0C,EAD7C,EADF;AAGA;AACA,UAAIzC,MAAM4B,KAAN,KAAgBlG,YAAhB,IAAgC6G,WAAWvC,KAAX,EAAkB2M,MAAM5O,MAAxB,CAApC,EAAqE;AACnEH,iBAASnF,IAAT,CAAc,SAAd,EADmE,CACzC;AAC1BkU,cAAME,cAAN;AACAF,cAAMG,wBAAN;AACD;AACDlP,eAASnF,IAAT,UAAqBuH,MAAM2B,GAA3B,EAAkC,kBAAlC,EAZ6B,CAY0B;AACxD,KAbD;AAcA1B,kBAAc8I,gBAAd,CAA+B,OAA/B,EAAwC/I,MAAM4I,aAA9C,EAA6D,IAA7D;;AAEA,KAAC,oBAAY;AAAE;AACb,OAAC,OAAD,EAAU,SAAV,EAAqBhK,OAArB,CAA6B,gBAAQ;AACnC;AACAoB,cAAM5F,MAAN,CAAa2O,gBAAb,CAA8BsD,IAA9B,EAAoCU,QAApC,EAA8C,IAA9C;AACD,OAHD;AAID,KALD,EAKG,iBAAS;AACVnP,eAASnF,IAAT,CAAc,qBAAd,WAA4CuH,MAAM2B,GAAlD,aAAkE9D,WAAWmC,MAAM4B,KAAjB,CAAlE,EADU,CACoF;AAC9F,UAAI5B,MAAM4B,KAAN,KAAgBlG,YAAhB,IAAgCqJ,YAAY/E,KAAZ,CAApC,EAAwD;AACtDpC,iBAASnF,IAAT,CAAc,SAAd,EADsD,CAC5B;AAC1BkU,cAAME,cAAN;AACAF,cAAMG,wBAAN;AACD;AACDlP,eAASnF,IAAT,UAAqBuH,MAAM2B,GAA3B,EAAkC,sBAAlC,EAPU,CAOiD;AAC5D,KAbD;;AAeA;AACA3B,UAAMgN,QAAN,GAAiB,KAAjB;AACAhN,UAAM5F,MAAN,CAAa2O,gBAAb,CAA8B,QAA9B,EAAwC,oBAAUP,GAAV,CAAc,YAAM;AAC1D,UAAIxI,MAAMgN,QAAV,EAAoB;AAClB/L,gBAAQC,IAAR,CAAa,6CAAb,EADkB,CAC2C;AAC7D;AACD;AACDlB,YAAMgN,QAAN,GAAiB,IAAjB;AACA,UAAIhN,MAAM4B,KAAN,KAAgBlG,YAApB,EAAkC;AAChC,YAAIsE,MAAMJ,KAAV,EAAiB;AACf,cAAII,MAAM+B,mBAAN,CAA0B+B,MAA1B,IAAoC9D,MAAM+B,mBAAN,CAA0B,CAA1B,EAA6BnC,KAArE,EAA4E;AAC1E,gBAAII,MAAMoK,eAAV,EAA2B;AAAE;AAC3BnJ,sBAAQ8C,GAAR,CAAY,iBAAZ,EADyB,CACO;AAChCjF,2BAAakB,MAAMoB,SAAnB,EAA8BpB,MAAMkG,gBAApC,EAAsD,CAAC,UAAD,CAAtD;AACApH,2BAAamB,aAAb,EAA4BD,MAAMe,oBAAlC,EACE,CAAC,YAAD,EAAe,aAAf,EAA8B,WAA9B,EAA2C,cAA3C,EAA2D,OAA3D,EAAoE,QAApE,CADF;AAED;AACDE,oBAAQ8C,GAAR,CAAY,gBAAZ,EAP0E,CAO3C;AAC/B/D,kBAAMoK,eAAN,GAAwBxE,eAAe5F,KAAf,CAAxB;AACD;AACF,SAXD,MAWO;AACL,cAAMd,OAAOH,QAAQkB,aAAR,EAAuBD,MAAM5F,MAA7B,CAAb;AAAA,cACE6S,WAAWjN,MAAMuG,cADnB;AAEA,cAAIrH,KAAKC,IAAL,KAAc8N,SAAS9N,IAAvB,IAA+BD,KAAKE,GAAL,KAAa6N,SAAS7N,GAArD,IACAF,KAAKK,KAAL,KAAe0N,SAAS1N,KADxB,IACiCL,KAAKM,MAAL,KAAgByN,SAASzN,MAD9D,EACsE;AACpEyB,oBAAQ8C,GAAR,CAAY,iBAAZ,EADoE,CACpC;AAChCuC,sBAAStG,KAAT,EAAgBd,IAAhB;AACD;AACF;AACD,YAAIc,MAAMiI,OAAN,CAAcqC,UAAlB,EAA8B;AAAEtK,gBAAMiI,OAAN,CAAcqC,UAAd,CAAyBtN,IAAzB,CAA8BgD,MAAMsI,GAApC;AAA2C;AAC5E;AACDtI,YAAMgN,QAAN,GAAiB,KAAjB;AACD,KA9BuC,CAAxC,EA8BI,IA9BJ;;AAgCA;AACApK,eAAWmG,gBAAX,CAA4B,WAA5B,EAAyC,iBAAS;AAChD,UAAI/I,MAAM4B,KAAN,KAAgBlG,YAApB,EAAkC;AAChCiR,cAAME,cAAN;AACAF,cAAMG,wBAAN;AACD;AACF,KALD,EAKG,IALH;;AAOA;AACA,KAAC9M,MAAMsF,cAAN,GAAuB1C,WAAWqH,WAAX,CAAuB8B,YAAYhT,aAAZ,CAA0B,KAA1B,CAAvB,CAAxB,EACGmU,SADH,GACe1R,gBADf;;AAGAuQ,gBAAYpJ,IAAZ,CAAiBsH,WAAjB,CAA6BrH,UAA7B;;AAEA;AACA,QAAI,CAACqF,QAAQnL,cAAR,CAAuB,MAAvB,CAAL,EAAqC;AAAEmL,cAAQ6C,IAAR,GAAe,IAAf;AAAsB;;AAE7DF,gBAAW5K,KAAX,EAAkBiI,OAAlB;AACD;;AAED;;;;;;;;+BAIWA,O,EAAS;AAClB,UAAItL,SAASsL,OAAT,CAAJ,EAAuB;AACrB2C,oBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+BsG,OAA/B;AACD;AACD,aAAO,IAAP;AACD;;AAED;;;;;;;;;yBAMKkB,K,EAAOlB,O,EAAS;AACnB,UAAI6D,UAAUhI,MAAV,GAAmB,CAAnB,IAAwB,OAAOqF,KAAP,KAAiB,SAA7C,EAAwD;AACtDlB,kBAAUkB,KAAV;AACAA,gBAAQ,KAAR;AACD;;AAED,WAAKyB,UAAL,CAAgB3C,OAAhB;AACAiB,YAAKxL,SAAS,KAAKiE,GAAd,CAAL,EAAyBwH,KAAzB;AACA,aAAO,IAAP;AACD;;AAED;;;;;;;;yBAKKA;AACD;;;MAGE;AACJ;AACAsB,YAAK/M,SAAS,KAAKiE,GAAd,CAAL,EAAyBwH;AACvB;;;AADF;AAKA,aAAO,IAAP;AACD;;;+BAEU1L,K,EAAOM,M,EAAQ;AACxB,aAAOmN,OAAOxN,SAAS,KAAKiE,GAAd,CAAP,EAA2B5D,MAA3B,EAAmC,IAAnC,EAAyCN,KAAzC,CAAP;AACD;;;8BAESA,K,EAAOM,M,EAAQ;AACvB,aAAOmN,OAAOxN,SAAS,KAAKiE,GAAd,CAAP,EAA2B5D,MAA3B,EAAmC,KAAnC,EAA0CN,KAA1C,CAAP;AACD;;;+BAEU;AACT,UAAMuC,QAAQtC,SAAS,KAAKiE,GAAd,CAAd;AACA,UAAI3B,MAAM4B,KAAN,KAAgBlG,YAApB,EAAkC;AAChC,YAAI,CAACsE,MAAMJ,KAAX,EAAkB;AAAE0G,oBAAStG,KAAT,EAAgBjB,QAAQiB,MAAMC,aAAd,EAA6BD,MAAM5F,MAAnC,CAAhB;AAA8D;AAClF,YAAI4F,MAAMiI,OAAN,CAAcqC,UAAlB,EAA8B;AAAEtK,gBAAMiI,OAAN,CAAcqC,UAAd,CAAyBtN,IAAzB,CAA8BgD,MAAMsI,GAApC;AAA2C;AAC5E;AACD,aAAO,IAAP;AACD;;;wBAEW;AACV,aAAO5K,SAAS,KAAKiE,GAAd,EAAmBC,KAA1B;AACD;;;wBAEW;AACV,aAAOlE,SAAS,KAAKiE,GAAd,EAAmBiB,UAAnB,CAA8B5J,KAArC;AACD;;;wBAEU;AAAE,aAAO0E,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2B6C,IAAlC;AAAyC,K;sBAC7CrN,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAACmJ,MAAMrN,KAAP,EAA/B;AAAgD;;;wBAEnD;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2B+C,QAAlC;AAA6C,K;sBACjDvN,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAACqJ,UAAUvN,KAAX,EAA/B;AAAoD;;;wBAE/D;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2BjF,IAAlC;AAAyC,K;sBAC7CvF,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAACqB,MAAMvF,KAAP,EAA/B;AAAgD;;;wBAErD;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2BI,MAAlC;AAA2C,K;sBAC/C5K,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAAC0G,QAAQ5K,KAAT,EAA/B;AAAkD;;;wBAEzD;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2Be,MAAlC;AAA2C,K;sBAC/CvL,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAACqH,QAAQvL,KAAT,EAA/B;AAAkD;;;wBAEnD;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2B8B,YAAlC;AAAiD,K;sBACrDtM,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAACoI,cAActM,KAAf,EAA/B;AAAwD;;;wBAE/D;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2ByC,YAAlC;AAAiD,K;sBACrDjN,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAAC+I,cAAcjN,KAAf,EAA/B;AAAwD;;;wBAEjE;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2BqC,UAAlC;AAA+C,K;sBACnD7M,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAAC2I,YAAY7M,KAAb,EAA/B;AAAsD;;;yBAElEM,M,EAAQkK,O,EAAS;AAC3B,aAAQ,IAAIuD,YAAJ,CAAiBzN,MAAjB,EAAyBkK,OAAzB,CAAD,CAAoCiB,IAApC,EAAP;AACD;;;wBAEyB;AAAE,aAAOxN,YAAP;AAAsB;;;wBACvB;AAAE,aAAOC,aAAP;AAAuB;;;wBAC3B;AAAE,aAAOC,WAAP;AAAqB;;;wBACtB;AAAE,aAAOC,YAAP;AAAsB;;;;;;AAGpD2P,aAAa2B,KAAb,GAAqB,IAArB;;AAEA;AACA3B,aAAa9N,QAAb,GAAwBA,QAAxB;AACA8N,aAAa5N,QAAb,GAAwBA,QAAxB;AACA4N,aAAa3N,UAAb,GAA0BA,UAA1B;AACA2N,aAAaxP,UAAb,GAA0BA,UAA1B;AACAwP,aAAatP,OAAb,GAAuBA,OAAvB;AACAsP,aAAalP,SAAb,GAAyBA,SAAzB;AACAkP,aAAahP,QAAb,GAAwBA,QAAxB;AACAgP,aAAa9O,QAAb,GAAwBA,QAAxB;AACA;;kBAEe8O,Y;;;;;;;;;;;;;ACpvCf;;;;;;;;AAQA,IACE4B,OAAO,OAAO,EADhB;AAAA,IACoB;AAClBC,YAAY,GAFd;;;AAIE;;;;;;AAMA;AACAC,QAAQ,EAXV;;AAaA,IACEC,cAAcnT,OAAOoT,qBAAP,IACZpT,OAAOqT,wBADK,IAEZrT,OAAOsT,2BAFK,IAGZtT,OAAOuT,uBAHK,IAIX;AAAA,SAAY3P,WAAW4P,QAAX,EAAqBR,IAArB,CAAZ;AAAA,CALL;AAAA,IAMES,aAAazT,OAAO0T,oBAAP,IACX1T,OAAO2T,uBADI,IAEX3T,OAAO4T,0BAFI,IAGX5T,OAAO6T,sBAHI,IAIV;AAAA,SAAahF,aAAaiF,SAAb,CAAb;AAAA,CAVL;AAAA,IAYEA,kBAZF;AAAA,IAYaC,gBAAgBC,KAAKC,GAAL,EAZ7B;;AAcA;AACA,IAAMC,kBAAkBf,WAAxB;AAAA,IAAqCgB,iBAAiBV,UAAtD;AACAzT,OAAOoU,gBAAP,GAA0B,mBAAW;AACnC,MAAIC,OAAJ,EAAa;AACXlB,kBAAc;AAAA,aAAYvP,WAAW4P,QAAX,EAAqBR,IAArB,CAAZ;AAAA,KAAd;AACAS,iBAAa;AAAA,aAAa5E,aAAaiF,SAAb,CAAb;AAAA,KAAb;AACD,GAHD,MAGO;AACLX,kBAAce,eAAd;AACAT,iBAAaU,cAAb;AACD;AACF,CARD;AASA;;AAEA,SAASG,IAAT,GAAgB;AACd,MAAIC,eAAJ;AAAA,MAAYxQ,aAAZ;;AAEA,MAAI+P,SAAJ,EAAe;AACbL,eAAW7Q,IAAX,CAAgB5C,MAAhB,EAAwB8T,SAAxB;AACAA,gBAAY,IAAZ;AACD;;AAEDZ,QAAM1O,OAAN,CAAc,gBAAQ;AACpB,QAAIgQ,KAAKjC,KAAT,EAAgB;AACdiC,WAAK7B,QAAL,CAAc6B,KAAKjC,KAAnB;AACAiC,WAAKjC,KAAL,GAAa,IAAb;AACAgC,eAAS,IAAT;AACD;AACF,GAND;;AAQA,MAAIA,MAAJ,EAAY;AACVR,oBAAgBC,KAAKC,GAAL,EAAhB;AACAlQ,WAAO,IAAP;AACD,GAHD,MAGO,IAAIiQ,KAAKC,GAAL,KAAaF,aAAb,GAA6Bd,SAAjC,EAA4C;AAAE;AACnDlP,WAAO,IAAP;AACD;AACD,MAAIA,IAAJ,EAAU;AAAE+P,gBAAYX,YAAYvQ,IAAZ,CAAiB5C,MAAjB,EAAyBsU,IAAzB,CAAZ;AAA6C;AAC1D;;AAED,SAASG,YAAT,CAAsB9B,QAAtB,EAAgC;AAC9B,MAAI+B,QAAQ,CAAC,CAAb;AACAxB,QAAM9S,IAAN,CAAW,UAACoU,IAAD,EAAOjL,CAAP,EAAa;AACtB,QAAIiL,KAAK7B,QAAL,KAAkBA,QAAtB,EAAgC;AAC9B+B,cAAQnL,CAAR;AACA,aAAO,IAAP;AACD;AACD,WAAO,KAAP;AACD,GAND;AAOA,SAAOmL,KAAP;AACD;;AAED,IAAMC,YAAY;AAChB;;;;AAIAvG,OAAK,aAASuE,QAAT,EAAmB;AACtB,QAAI6B,aAAJ;AACA,QAAIC,aAAa9B,QAAb,MAA2B,CAAC,CAAhC,EAAmC;AACjCO,YAAM7U,IAAN,CAAYmW,OAAO,EAAC7B,UAAUA,QAAX,EAAnB;AACA,aAAO,iBAAS;AACd6B,aAAKjC,KAAL,GAAaA,KAAb;AACA,YAAI,CAACuB,SAAL,EAAgB;AAAEQ;AAAS;AAC5B,OAHD;AAID,KAND,MAMO;AACL,aAAO,IAAP;AACD;AACF,GAhBe;;AAkBhBxE,UAAQ,gBAAS6C,QAAT,EAAmB;AACzB,QAAIiC,gBAAJ;AACA,QAAI,CAACA,UAAUH,aAAa9B,QAAb,CAAX,IAAqC,CAAC,CAA1C,EAA6C;AAC3CO,YAAM2B,MAAN,CAAaD,OAAb,EAAsB,CAAtB;AACA,UAAI,CAAC1B,MAAMxJ,MAAP,IAAiBoK,SAArB,EAAgC;AAC9BL,mBAAW7Q,IAAX,CAAgB5C,MAAhB,EAAwB8T,SAAxB;AACAA,oBAAY,IAAZ;AACD;AACF;AACF;AA3Be,CAAlB;;kBA8Bea,S;;;;;;;;;;;;;ACnHf;;;;;;;;AAQA,IAAIG,kBAAJ,C,CAAe;;AAEf,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AAAE,SAAO,CAACA,QAAQ,EAAT,EAAaC,IAAb,EAAP;AAA6B,C,CAAC;AAC1D,SAASC,SAAT,CAAmBC,IAAnB,EAAyB/Q,OAAzB,EAAkC;AAChC,MAAI0Q,SAAJ,EAAe;AAAEA,cAAUK,IAAV,EAAgB/Q,OAAhB;AAA2B,GADZ,CACa;AAC7CA,UAAQgR,YAAR,CAAqB,OAArB,EAA8BD,KAAKnW,IAAL,CAAU,GAAV,CAA9B;AACD;;AAED,SAASoP,IAAT,CAAa+G,IAAb,EAAmB/Q,OAAnB,EAA4BiR,MAA5B,EAAoC;AAClC,MAAIA,OAAOvH,MAAP,CAAc,iBAAS;AACzB,QAAI,EAAEkH,QAAQD,UAAUC,KAAV,CAAV,KAA+BG,KAAKlE,OAAL,CAAa+D,KAAb,MAAwB,CAAC,CAA5D,EAA+D;AAAE,aAAO,KAAP;AAAe;AAChFG,SAAK9W,IAAL,CAAU2W,KAAV;AACA,WAAO,IAAP;AACD,GAJG,EAIDtL,MAJH,EAIW;AACTwL,cAAUC,IAAV,EAAgB/Q,OAAhB;AACD;AACF;;AAED,SAAS0L,OAAT,CAAgBqF,IAAhB,EAAsB/Q,OAAtB,EAA+BiR,MAA/B,EAAuC;AACrC,MAAIA,OAAOvH,MAAP,CAAc,iBAAS;AACzB,QAAIvE,UAAJ;AACA,QAAI,EAAEyL,QAAQD,UAAUC,KAAV,CAAV,KAA+B,CAACzL,IAAI4L,KAAKlE,OAAL,CAAa+D,KAAb,CAAL,MAA8B,CAAC,CAAlE,EAAqE;AAAE,aAAO,KAAP;AAAe;AACtFG,SAAKN,MAAL,CAAYtL,CAAZ,EAAe,CAAf;AACA,WAAO,IAAP;AACD,GALG,EAKDG,MALH,EAKW;AACTwL,cAAUC,IAAV,EAAgB/Q,OAAhB;AACD;AACF;;AAED,SAASgO,OAAT,CAAgB+C,IAAhB,EAAsB/Q,OAAtB,EAA+B4Q,KAA/B,EAAsCjG,KAAtC,EAA6C;AAC3C,MAAMxF,IAAI4L,KAAKlE,OAAL,CAAc+D,QAAQD,UAAUC,KAAV,CAAtB,CAAV;AACA,MAAIzL,MAAM,CAAC,CAAX,EAAc;AACZ,QAAIwF,KAAJ,EAAW;AAAE,aAAO,IAAP;AAAc;AAC3BoG,SAAKN,MAAL,CAAYtL,CAAZ,EAAe,CAAf;AACA2L,cAAUC,IAAV,EAAgB/Q,OAAhB;AACA,WAAO,KAAP;AACD,GALD,MAKO;AACL,QAAI2K,UAAU,KAAd,EAAqB;AAAE,aAAO,KAAP;AAAe;AACtCoG,SAAK9W,IAAL,CAAU2W,KAAV;AACAE,cAAUC,IAAV,EAAgB/Q,OAAhB;AACA,WAAO,IAAP;AACD;AACF;;AAED,SAASjF,QAAT,CAAiBgW,IAAjB,EAAuB/Q,OAAvB,EAAgC4Q,KAAhC,EAAuCM,QAAvC,EAAiD;AAC/C,MAAI/L,UAAJ;AACA,MAAI,EAAEyL,QAAQD,UAAUC,KAAV,CAAV,KAA+B,EAAEM,WAAWP,UAAUO,QAAV,CAAb,CAA/B,IACFN,UAAUM,QADR,IACoB,CAAC/L,IAAI4L,KAAKlE,OAAL,CAAa+D,KAAb,CAAL,MAA8B,CAAC,CADvD,EAC0D;AAAE;AAAS;AACrEG,OAAKN,MAAL,CAAYtL,CAAZ,EAAe,CAAf;AACA,MAAI4L,KAAKlE,OAAL,CAAaqE,QAAb,MAA2B,CAAC,CAAhC,EAAmC;AAAEH,SAAK9W,IAAL,CAAUiX,QAAV;AAAsB;AAC3DJ,YAAUC,IAAV,EAAgB/Q,OAAhB;AACD;;AAED,SAASmR,UAAT,CAAoBnR,OAApB,EAA6B;AAC3B,SAAO,CAACmR,WAAW3U,YAAZ,IAA4BwD,QAAQoR,SAApC,IAAkD,YAAM;AAC7D,QAAML,OAAO,CAAC/Q,QAAQqR,YAAR,CAAqB,OAArB,KAAiC,EAAlC,EAAsCR,IAAtC,GAA6CrI,KAA7C,CAAmD,KAAnD,EAA0DkB,MAA1D,CAAiE;AAAA,aAAS,CAAC,CAACkH,KAAX;AAAA,KAAjE,CAAb;AAAA,QACE9G,MAAM;AACJxE,cAAQyL,KAAKzL,MADT;AAEJgM,YAAM;AAAA,eAAKP,KAAK5L,CAAL,CAAL;AAAA,OAFF;AAGJiE,gBAAU;AAAA,eAAS2H,KAAKlE,OAAL,CAAa8D,UAAUC,KAAV,CAAb,MAAmC,CAAC,CAA7C;AAAA,OAHN;AAIJ5G,WAAK,eAAW;AACdA,aAAI+G,IAAJ,EAAU/Q,OAAV,EAAmB5D,MAAM2M,SAAN,CAAgBC,KAAhB,CAAsBxK,IAAtB,CAA2B8O,SAA3B,CAAnB;AACA,eAAO6D,WAAWI,WAAX,GAAyBzH,GAAzB,GAA+B,KAAK,CAA3C;AACD,OAPG;AAQJ4B,cAAQ,kBAAW;AACjBA,gBAAOqF,IAAP,EAAa/Q,OAAb,EAAsB5D,MAAM2M,SAAN,CAAgBC,KAAhB,CAAsBxK,IAAtB,CAA2B8O,SAA3B,CAAtB;AACA,eAAO6D,WAAWI,WAAX,GAAyBzH,GAAzB,GAA+B,KAAK,CAA3C;AACD,OAXG;AAYJkE,cAAQ,gBAAC4C,KAAD,EAAQjG,KAAR;AAAA,eAAkBqD,QAAO+C,IAAP,EAAa/Q,OAAb,EAAsB4Q,KAAtB,EAA6BjG,KAA7B,CAAlB;AAAA,OAZJ;AAaJ5P,eAAS,iBAAC6V,KAAD,EAAQM,QAAR,EAAqB;AAC5BnW,iBAAQgW,IAAR,EAAc/Q,OAAd,EAAuB4Q,KAAvB,EAA8BM,QAA9B;AACA,eAAOC,WAAWI,WAAX,GAAyBzH,GAAzB,GAA+B,KAAK,CAA3C;AACD;AAhBG,KADR;AAmBA,WAAOA,GAAP;AACD,GArBuD,EAAxD;AAsBD;;AAEDqH,WAAWI,WAAX,GAAyB,IAAzB;;AAEAJ,WAAWT,SAAX,GAAuB,UAACc,GAAD,EAAS;AAAEd,cAAY,OAAOc,GAAP,KAAe,UAAf,GAA4BA,GAA5B,GAAkC,IAA9C;AAAqD,CAAvF,C,CAAyF;;kBAE1EL,U;;;;;;;;;;;;;;qjBC1Ff;;;;;;;;AAQA;;;;;;;;AAEA,IACEM,gBAAgB,CADlB;AAAA,IACqBC,iBAAiB,CADtC;AAAA,IACyCC,gBAAgB,CADzD;AAAA,IAGEC,SAAS,OAHX;AAAA,IAIEC,iBAAoBD,MAApB,kBAJF;AAAA,IAKEE,mBAAsBF,MAAtB,oBALF;AAAA,IAMEG,iBAAoBH,MAApB,kBANF;AAAA,IAOEI,oBAAuBJ,MAAvB,qBAPF;AAAA,IASElU,UAAU,sBAAsBpD,SAASqD,eAAT,CAAyBnD,KAA/C,IACR,mBAAmBF,SAASqD,eAAT,CAAyBnD,KADpC,IAC6C,CAACoB,OAAOgC,SAAP,CAAiBC,gBAV3E;AAAA,IAYEM,WAAY,YAAM;AAChB,MAAMC,WAAW,GAAGA,QAApB;AAAA,MAA8BC,aAAa,GAAGC,cAAH,CAAkBF,QAA7D;AAAA,MACEG,cAAcF,WAAWG,IAAX,CAAgBC,MAAhB,CADhB;AAEA,SAAO,eAAO;AACZ,QAAIC,cAAJ;AAAA,QAAWC,eAAX;AACA,WAAOC,OAAOR,SAASI,IAAT,CAAcI,GAAd,MAAuB,iBAA9B,KACJ,EAAEF,QAAQD,OAAOI,cAAP,CAAsBD,GAAtB,CAAV,KACC,CAACD,SAASD,MAAMJ,cAAN,CAAqB,aAArB,KAAuCI,MAAMI,WAAvD,KACA,OAAOH,MAAP,KAAkB,UADlB,IACgCN,WAAWG,IAAX,CAAgBG,MAAhB,MAA4BJ,WAHzD,CAAP;AAID,GAND;AAOD,CAVU,EAZb;AAAA,IAuBEQ,WAAWC,OAAOD,QAAP,IAAoB;AAAA,SAAS,OAAOE,KAAP,KAAiB,QAAjB,IAA6BrD,OAAOmD,QAAP,CAAgBE,KAAhB,CAAtC;AAAA,CAvBjC;;;AAyBE;;;;;;;;;;;;;;;;;AAiBA;AACAC,WAAW,EA3Cb;;AA6CA,IAAIC,QAAQ,CAAZ;;AAEA;AACA,IAAMC,WAAW,EAAjB;AACA,IAAMC,aAAa,EAAnB;AACAA,WAAWoS,aAAX,IAA4B,eAA5B;AACApS,WAAWqS,cAAX,IAA6B,gBAA7B;AACArS,WAAWsS,aAAX,IAA4B,eAA5B;AACA,SAASM,SAAT,CAAmBC,SAAnB,EAA8B;AAAE,SAAOxQ,KAAKyQ,KAAL,CAAWD,YAAY,GAAvB,IAA8B,GAArC;AAA2C,C,CAAC;AAC5E;;AAEA;;;;;AAKA,SAASE,SAAT,CAAmB5Q,KAAnB,EAA0BqM,IAA1B,EAAgC;AAC9B;AACAzO,WAASnF,IAAT,CAAc,aAAd,WAAoCuH,MAAM2B,GAA1C,aAA0D9D,WAAWmC,MAAM4B,KAAjB,CAA1D;AACAhE,WAASnF,IAAT,WAAsBuH,MAAM6Q,IAA5B,eACaJ,UAAUzQ,MAAM8Q,OAAhB,CADb,iBACsDL,UAAUzQ,MAAM+Q,SAAhB,CADtD,uBAEqBN,UAAUzQ,MAAMgR,eAAhB,CAFrB;AAGApT,WAASnF,IAAT,WAAsB4T,IAAtB;AACA;AACA,MAAM4E,WAAW/Q,KAAKgR,GAAL,CAAShR,KAAKiR,GAAL,CAAS,CAACnR,MAAMoR,KAAhB,EAAuB,CAAvB,CAAT,EAAoCpR,MAAMgL,QAA1C,CAAjB;AAAA,MACEqG,cAAc,CAACJ;AACb;AACC,GAAC5E,SAASkE,cAAT,IAA2BlE,SAASmE,iBAArC,KAA2DxQ,MAAM+Q,SAAjE,GACC3C,KAAKC,GAAL,KAAarO,MAAM+Q,SADpB,GACgC,CAHpB,CAAD,IAIV,IALN;;AAOA,MAAIpE,cAAJ;AACA,MAAI;AACFA,YAAQ,IAAI3M,MAAM5F,MAAN,CAAakX,eAAjB,CAAiCjF,IAAjC,EAAuC;AAC7CO,oBAAc5M,MAAMiI,OAAN,CAAcyE,QADiB;AAE7C6E,qBAAevR,MAAMiI,OAAN,CAAcsJ,aAFgB;AAG7CF,mBAAaA,WAHgC;AAI7CG,eAAS,IAJoC;AAK7CC,kBAAY;AALiC,KAAvC,CAAR;AAOA;AACA,QAAIvV,OAAJ,EAAa;AAAEyQ,YAAM4E,aAAN,GAAsBvR,MAAMiI,OAAN,CAAcsJ,aAApC;AAAoD;AACpE,GAVD,CAUE,OAAOzP,KAAP,EAAc;AACd6K,YAAQ3M,MAAM5F,MAAN,CAAatB,QAAb,CAAsB4Y,WAAtB,CAAkC,iBAAlC,CAAR;AACA/E,UAAMgF,mBAAN,CAA0BtF,IAA1B,EAAgC,IAAhC,EAAsC,KAAtC,EAA6CrM,MAAMiI,OAAN,CAAcyE,QAA3D,EAAqE2E,WAArE;AACA1E,UAAM4E,aAAN,GAAsBvR,MAAMiI,OAAN,CAAcsJ,aAApC;AACD;AACD5E,QAAMiF,eAAN,GAAwB5R,MAAMsI,GAA9B;AACAtI,QAAMxB,OAAN,CAAcqT,aAAd,CAA4BlF,KAA5B;AACA/O,WAASnF,IAAT,CAAc,cAAd,EAjC8B,CAiCC;AAChC;;AAED;;;;AAIA,SAASqZ,kBAAT,CAA4B9R,KAA5B,EAAmC;AACjC;AACApC,WAASnF,IAAT,CAAc,sBAAd,WAA6CuH,MAAM2B,GAAnD,aAAmE9D,WAAWmC,MAAM4B,KAAjB,CAAnE;AACAhE,WAASnF,IAAT,sBAAiCgY,UAAUzQ,MAAMgR,eAAhB,CAAjC;AACA;AACA,MAAIhR,MAAM4B,KAAN,KAAgBuO,aAApB,EAAmC;AACjCvS,aAASnF,IAAT,CAAc,QAAd,EAAwB,uBAAxB,EADiC,CACiB;AAClD;AACD;AACD,MAAMsZ,cAAc3D,KAAKC,GAAL,KAAarO,MAAM+Q,SAAvC;AACA/Q,QAAMgR,eAAN,GAAwBhR,MAAM6Q,IAAN,GACtB3Q,KAAKgR,GAAL,CAASlR,MAAMgR,eAAN,GAAwBe,WAAjC,EAA8C/R,MAAMgL,QAApD,CADsB,GAEtB9K,KAAKiR,GAAL,CAASnR,MAAMgR,eAAN,GAAwBe,WAAjC,EAA8C,CAA9C,CAFF;AAGAnU,WAASnF,IAAT,sBAAiCgY,UAAUzQ,MAAMgR,eAAhB,CAAjC,EAbiC,CAaqC;AACtEpT,WAASnF,IAAT,CAAc,uBAAd,EAdiC,CAcO;AACzC;;AAED;;;;;AAKA,SAASuZ,SAAT,CAAmBhS,KAAnB,EAA0B;AACxBpC,WAASnF,IAAT,CAAc,cAAd,WAAqCuH,MAAM2B,GAA3C,YAA0D3B,MAAM6Q,IAAhE,EADwB,CACiD;AACzE7Q,QAAM4B,KAAN,GAAcqO,aAAd;AACArS,WAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EAHwB,CAG2B;AACnD5B,QAAM8Q,OAAN,GAAgB,CAAhB;AACA9Q,QAAM+Q,SAAN,GAAkB,CAAlB;AACA/Q,QAAMgR,eAAN,GAAwBhR,MAAM6Q,IAAN,GAAa7Q,MAAMgL,QAAnB,GAA8B,CAAtD;AACD;;AAED;;;;AAIA,SAASiH,aAAT,CAAuBjS,KAAvB,EAA8B;AAC5B;AACApC,WAASnF,IAAT,CAAc,iBAAd,WAAwCuH,MAAM2B,GAA9C,aAA8D9D,WAAWmC,MAAM4B,KAAjB,CAA9D;AACAhE,WAASnF,IAAT,WAAsBuH,MAAM6Q,IAA5B,eACaJ,UAAUzQ,MAAM8Q,OAAhB,CADb,iBACsDL,UAAUzQ,MAAM+Q,SAAhB,CADtD,uBAEqBN,UAAUzQ,MAAMgR,eAAhB,CAFrB;AAGA;AACA,MAAIhR,MAAM4B,KAAN,KAAgBuO,aAApB,EAAmC;AACjCvS,aAASnF,IAAT,CAAc,QAAd,EAAwB,kBAAxB,EADiC,CACY;AAC7C;AACD;;AAEDuH,QAAM4B,KAAN,GAAcqO,aAAd;AACArS,WAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EAb4B,CAauB;AACnDgP,YAAU5Q,KAAV,EAAiBuQ,cAAjB;;AAEAyB,YAAUhS,KAAV;AACApC,WAASnF,IAAT,CAAc,kBAAd,EAjB4B,CAiBO;AACpC;;AAED;;;;AAIA,SAASyZ,cAAT,CAAwBlS,KAAxB,EAA+B;AAC7B;AACApC,WAASnF,IAAT,CAAc,kBAAd,WAAyCuH,MAAM2B,GAA/C,aAA+D9D,WAAWmC,MAAM4B,KAAjB,CAA/D;AACAhE,WAASnF,IAAT,WAAsBuH,MAAM6Q,IAA5B,eACaJ,UAAUzQ,MAAM8Q,OAAhB,CADb,iBACsDL,UAAUzQ,MAAM+Q,SAAhB,CADtD,uBAEqBN,UAAUzQ,MAAMgR,eAAhB,CAFrB;AAGA;AACA,MAAIhR,MAAM4B,KAAN,KAAgBsO,cAApB,EAAoC;AAClCtS,aAASnF,IAAT,CAAc,QAAd,EAAwB,mBAAxB,EADkC,CACY;AAC9C;AACD;;AAEDuH,QAAM4B,KAAN,GAAcuO,aAAd;AACAvS,WAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EAb6B,CAasB;AACnD5B,QAAM+Q,SAAN,GAAkB3C,KAAKC,GAAL,EAAlB;AACArO,QAAMmS,WAAN,GAAoB,CAACnS,MAAM6Q,IAA3B;AACAD,YAAU5Q,KAAV,EAAiBsQ,gBAAjB;;AAEA,MAAM8B,eAAepS,MAAM6Q,IAAN,GAAa7Q,MAAMgL,QAAN,GAAiBhL,MAAMgR,eAApC,GAAsDhR,MAAMgR,eAAjF;AACApT,WAASnF,IAAT,mBAA8BgY,UAAU2B,YAAV,CAA9B,EAnB6B,CAmB6B;AAC1D,MAAIA,eAAe,CAAnB,EAAsB;AACpBpS,UAAMqS,KAAN,GAAcrU,WAAW,YAAM;AAAEiU,oBAAcjS,KAAd;AAAuB,KAA1C,EAA4CoS,YAA5C,CAAd;AACD,GAFD,MAEO;AACLH,kBAAcjS,KAAd;AACD;AACDpC,WAASnF,IAAT,CAAc,mBAAd,EAzB6B,CAyBO;AACrC;;AAED;;;;AAIA,SAAS6Z,KAAT,CAAetS,KAAf,EAAsB;AACpBpC,WAASnF,IAAT,CAAc,SAAd,WAAgCuH,MAAM2B,GAAtC,YAAqD3B,MAAM6Q,IAA3D,EADoB,CACgD;AACpE5H,eAAajJ,MAAMqS,KAAnB;AACA,MAAIrS,MAAM4B,KAAN,KAAgBqO,aAApB,EAAmC;AACjCrS,aAASnF,IAAT,CAAc,QAAd,EAAwB,UAAxB,EADiC,CACI;AACrC;AACD;;AAEDuH,QAAM4B,KAAN,GAAcqO,aAAd;AACArS,WAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EAToB,CAS+B;AACnDgP,YAAU5Q,KAAV,EAAiBwQ,iBAAjB;AACA5S,WAASnF,IAAT,CAAc,UAAd,EAXoB,CAWO;AAC5B;;AAED;;;;;AAKA,SAAS+R,GAAT,CAAYxK,KAAZ,EAAmBmJ,KAAnB,EAA0B;AACxB;AACAvL,WAASnF,IAAT,CAAc,MAAd,WAA6BuH,MAAM2B,GAAnC,aAAmD9D,WAAWmC,MAAM4B,KAAjB,CAAnD;AACAhE,WAASnF,IAAT,YAAuB,CAAC,CAAC0Q,KAAzB;AACAvL,WAASnF,IAAT,WAAsBuH,MAAM6Q,IAA5B,eACaJ,UAAUzQ,MAAM8Q,OAAhB,CADb,iBACsDL,UAAUzQ,MAAM+Q,SAAhB,CADtD,uBAEqBN,UAAUzQ,MAAMgR,eAAhB,CAFrB;AAGA;AACA,MAAIhR,MAAM6Q,IAAN,IAAc7Q,MAAM4B,KAAN,KAAgBqO,aAA9B,IACAjQ,MAAM6Q,IAAN,IAAc7Q,MAAM4B,KAAN,KAAgBqO,aAA9B,IAA+C,CAAC9G,KADpD,EAC2D;AACzDvL,aAASnF,IAAT,CAAc,QAAd,EAAwB,OAAxB,EADyD,CACvB;AAClC;AACD;AACD;;;;;;AAMA,MAAIuH,MAAMiI,OAAN,CAAcsE,QAAlB,EAA4B;AAAEvM,UAAMiI,OAAN,CAAcsE,QAAd,CAAuBvP,IAAvB,CAA4BgD,MAAMsI,GAAlC,EAAuC,CAAC,CAACa,KAAzC;AAAkD;;AAEhF,MAAIA,SAAS,CAACnJ,MAAM6Q,IAAP,IAAe7Q,MAAM4B,KAAN,KAAgBsO,cAAxC,IACA,CAAClQ,MAAMoR,KAAP,GAAepR,MAAMgL,QADzB,EACmC;AAAE;AACnC;AACApN,aAASnF,IAAT,YACE0Q,QAAQ,OAAR,GACA,CAACnJ,MAAM6Q,IAAP,IAAe7Q,MAAM4B,KAAN,KAAgBsO,cAA/B,GAAgD,UAAhD,GACA,eAHF;AAIA;AACAoC,UAAMtS,KAAN;AACAA,UAAM6Q,IAAN,GAAa,IAAb;AACAmB,cAAUhS,KAAV;AAED,GAZD,MAYO;AACL8R,uBAAmB9R,KAAnB;AACAsS,UAAMtS,KAAN;;AAEAA,UAAM4B,KAAN,GAAcsO,cAAd;AACAtS,aAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EALK,CAK8C;AACnD5B,UAAM6Q,IAAN,GAAa,IAAb;AACA7Q,UAAM8Q,OAAN,GAAgB1C,KAAKC,GAAL,EAAhB;AACArO,UAAM+Q,SAAN,GAAkB,CAAlB;AACAH,cAAU5Q,KAAV,EAAiBqQ,cAAjB;;AAEA,QAAIrQ,MAAMoR,KAAN,GAAc,CAAlB,EAAqB;AACnBpR,YAAMqS,KAAN,GAAcrU,WAAW,YAAM;AAAEkU,uBAAelS,KAAf;AAAwB,OAA3C,EAA6CA,MAAMoR,KAAnD,CAAd;AACD,KAFD,MAEO;AACL,UAAIpR,MAAMoR,KAAN,GAAc,CAAlB,EAAqB;AAAE;AACrBpR,cAAMgR,eAAN,GAAwB9Q,KAAKgR,GAAL,CAASlR,MAAMgR,eAAN,GAAwBhR,MAAMoR,KAAvC,EAA8CpR,MAAMgL,QAApD,CAAxB;AACD;AACDkH,qBAAelS,KAAf;AACD;AACF;AACDpC,WAASnF,IAAT,CAAc,OAAd,EArDwB,CAqDA;AACzB;;AAED;;;;;AAKA,SAASkS,IAAT,CAAa3K,KAAb,EAAoBmJ,KAApB,EAA2B;AACzB;AACAvL,WAASnF,IAAT,CAAc,OAAd,WAA8BuH,MAAM2B,GAApC,aAAoD9D,WAAWmC,MAAM4B,KAAjB,CAApD;AACAhE,WAASnF,IAAT,YAAuB,CAAC,CAAC0Q,KAAzB;AACAvL,WAASnF,IAAT,WAAsBuH,MAAM6Q,IAA5B,eACaJ,UAAUzQ,MAAM8Q,OAAhB,CADb,iBACsDL,UAAUzQ,MAAM+Q,SAAhB,CADtD,uBAEqBN,UAAUzQ,MAAMgR,eAAhB,CAFrB;AAGA;AACA,MAAI,CAAChR,MAAM6Q,IAAP,IAAe7Q,MAAM4B,KAAN,KAAgBqO,aAA/B,IACA,CAACjQ,MAAM6Q,IAAP,IAAe7Q,MAAM4B,KAAN,KAAgBqO,aAA/B,IAAgD,CAAC9G,KADrD,EAC4D;AAC1DvL,aAASnF,IAAT,CAAc,QAAd,EAAwB,QAAxB,EAD0D,CACvB;AACnC;AACD;AACD;;;;;;AAMA,MAAIuH,MAAMiI,OAAN,CAAcwE,SAAlB,EAA6B;AAAEzM,UAAMiI,OAAN,CAAcwE,SAAd,CAAwBzP,IAAxB,CAA6BgD,MAAMsI,GAAnC,EAAwC,CAAC,CAACa,KAA1C;AAAmD;;AAElF,MAAIA,SAASnJ,MAAM6Q,IAAN,IAAc7Q,MAAM4B,KAAN,KAAgBsO,cAAvC,IACA,CAAClQ,MAAMoR,KAAP,GAAepR,MAAMgL,QADzB,EACmC;AAAE;AACnC;AACApN,aAASnF,IAAT,YACE0Q,QAAQ,OAAR,GACAnJ,MAAM6Q,IAAN,IAAc7Q,MAAM4B,KAAN,KAAgBsO,cAA9B,GAA+C,UAA/C,GACA,eAHF;AAIA;AACAoC,UAAMtS,KAAN;AACAA,UAAM6Q,IAAN,GAAa,KAAb;AACAmB,cAAUhS,KAAV;AAED,GAZD,MAYO;AACL8R,uBAAmB9R,KAAnB;AACAsS,UAAMtS,KAAN;;AAEAA,UAAM4B,KAAN,GAAcsO,cAAd;AACAtS,aAASnF,IAAT,YAAuBoF,WAAWmC,MAAM4B,KAAjB,CAAvB,EALK,CAK8C;AACnD5B,UAAM6Q,IAAN,GAAa,KAAb;AACA7Q,UAAM8Q,OAAN,GAAgB1C,KAAKC,GAAL,EAAhB;AACArO,UAAM+Q,SAAN,GAAkB,CAAlB;AACAH,cAAU5Q,KAAV,EAAiBqQ,cAAjB;;AAEA,QAAIrQ,MAAMoR,KAAN,GAAc,CAAlB,EAAqB;AACnBpR,YAAMqS,KAAN,GAAcrU,WAAW,YAAM;AAAEkU,uBAAelS,KAAf;AAAwB,OAA3C,EAA6CA,MAAMoR,KAAnD,CAAd;AACD,KAFD,MAEO;AACL,UAAIpR,MAAMoR,KAAN,GAAc,CAAlB,EAAqB;AAAE;AACrBpR,cAAMgR,eAAN,GAAwB9Q,KAAKiR,GAAL,CAASnR,MAAMgR,eAAN,GAAwBhR,MAAMoR,KAAvC,EAA8C,CAA9C,CAAxB;AACD;AACDc,qBAAelS,KAAf;AACD;AACF;AACDpC,WAASnF,IAAT,CAAc,QAAd,EArDyB,CAqDA;AAC1B;;AAED;;;;;AAKA,SAASmS,WAAT,CAAoB5K,KAApB,EAA2B6K,UAA3B,EAAuC;AACrC,MAAM5C,UAAUjI,MAAMiI,OAAtB;;AAEA,WAASsK,UAAT,CAAoBtH,MAApB,EAA4B;AAC1B,QAAMuH,cAAc,OAAO3H,WAAWI,MAAX,CAAP,KAA8B,QAA9B,GAAyC;AAC3D,KAACjL,MAAM5F,MAAN,CAAaiG,gBAAb,CAA8BL,MAAMxB,OAApC,EAA6C,EAA7C,EACG,oBAAUnE,OAAV,iBAAgC4Q,MAAhC,CADH,KACiD,EADlD,EAEGjE,KAFH,CAES,GAFT,EAEc6D,WAAWI,MAAX,CAFd,CADkB,GAIlBJ,WAAWI,MAAX,CAJF;AAKA;AACAjL,UAAMyS,cAAN,CAAqBxH,MAArB,IAA+B,OAAOuH,WAAP,KAAuB,QAAvB,GAAkCA,YAAYnD,IAAZ,EAAlC,GAAuD,IAAtF;AACA;AACA,WAAO,OAAOmD,WAAP,KAAuB,QAAvB,GAAkCA,YAAYnD,IAAZ,EAAlC,GAAuD,IAA9D;AACD;;AAED;AACA,MAAI,OAAOxE,WAAW0G,aAAlB,KAAoC,QAAxC,EAAkD;AAChDtJ,YAAQsJ,aAAR,GAAwB1G,WAAW0G,aAAnC;AACD;;AAED;AACA;AACE,QAAM9T,QAAQ8U,WAAW,UAAX,CAAd;AACA,QAAI,OAAO9U,KAAP,KAAiB,QAAjB,IAA6BA,UAAU,KAAvC,IAAgDA,UAAU,MAA9D,EAAsE;AACpEwK,cAAQyE,QAAR,GAAmBjP,KAAnB;AACD;AACF;;AAED;AACA,GAAC,UAAD,EAAa,OAAb,EAAsBmB,OAAtB,CAA8B,kBAAU;AACtC,QAAMnB,QAAQ8U,WAAWtH,MAAX,CAAd;AACA,QAAI,OAAOxN,KAAP,KAAiB,QAArB,EAA+B;AAC7B,UAAI0J,gBAAJ;AAAA,UAAauJ,kBAAb;AACA,UAAI,WAAWhX,IAAX,CAAgB+D,KAAhB,CAAJ,EAA4B;AAAE;AAC5BwK,gBAAQgD,MAAR,IAAkB,IAAlB;AACAjL,cAAMiL,MAAN,IAAgB,CAAhB;AACD,OAHD,MAGO,IAAI,CAAC9D,UAAU,eAAeC,IAAf,CAAoB3J,KAApB,CAAX,KACPF,SAAUmT,YAAY5P,WAAWqG,QAAQ,CAAR,CAAX,CAAtB,CADO,KAEN8D,WAAW,UAAX,IAAyByF,aAAa,CAFhC,CAAJ,EAEwC;AAC7CzI,gBAAQgD,MAAR,SAAqByF,SAArB,IAAiCvJ,QAAQ,CAAR,KAAc,EAA/C;AACAnH,cAAMiL,MAAN,IAAgByF,aAAavJ,QAAQ,CAAR,IAAa,CAAb,GAAiB,IAA9B,CAAhB;AACD;AACF;AACF,GAdD;;AAgBA;AACA,GAAC,UAAD,EAAa,WAAb,EAA0BvI,OAA1B,CAAkC,kBAAU;AAC1C,QAAI,OAAOiM,WAAWI,MAAX,CAAP,KAA8B,UAAlC,EAA8C;AAC5ChD,cAAQgD,MAAR,IAAkBJ,WAAWI,MAAX,CAAlB;AACD,KAFD,MAEO,IAAIJ,WAAW/N,cAAX,CAA0BmO,MAA1B,KAAqCJ,WAAWI,MAAX,KAAsB,IAA/D,EAAqE;AAC1EhD,cAAQgD,MAAR,IAAkB,KAAK,CAAvB;AACD;AACF,GAND;AAOD;;IAEKyH,e;AACJ;;;;;;AAMA,2BAAYlU,OAAZ,EAAqByJ,OAArB,EAA8B0K,MAA9B,EAAsC;AAAA;;AACpC,QAAM3S,QAAQ;AACZsI,WAAK,IADO;AAEZL,eAAS,EAAE;AACTsJ,uBAAe,EADR;AAEP7E,kBAAU;AAFH,OAFG;AAMZ1B,gBAAU,CANE;AAOZoG,aAAO,CAPK;AAQZP,YAAM,CAAC,CAAC8B;AARI,KAAd;AAUA3S,UAAMyS,cAAN,GAAuB,EAAvB,CAXoC,CAWT;;AAE3BxV,WAAO4O,cAAP,CAAsB,IAAtB,EAA4B,KAA5B,EAAmC,EAACpO,OAAO,EAAEE,KAAV,EAAnC;AACAqC,UAAM2B,GAAN,GAAY,KAAKA,GAAjB;AACAjE,aAAS,KAAKiE,GAAd,IAAqB3B,KAArB;;AAEA,QAAI,CAACxB,QAAQ2G,QAAT,IAAqB3G,QAAQ2G,QAAR,KAAqBrC,KAAK6E,YAAnD,EAAiE;AAC/D,YAAM,IAAIrD,KAAJ,CAAU,iCAAV,CAAN;AACD;AACDtE,UAAMxB,OAAN,GAAgBA,OAAhB;AACAwB,UAAM5F,MAAN,GAAeoE,QAAQkE,aAAR,CAAsBsJ,WAArC;AACA,QAAI,CAAC/D,OAAL,EAAc;AACZA,gBAAU,EAAV;AACD,KAFD,MAEO,IAAI,CAACtL,SAASsL,OAAT,CAAL,EAAwB;AAC7B,YAAM,IAAI3D,KAAJ,CAAU,kBAAV,CAAN;AACD;;AAED;AACA,QAAI,CAAC2D,QAAQnL,cAAR,CAAuB,UAAvB,CAAL,EAAyC;AAAEmL,cAAQyE,QAAR,GAAmB,CAAnB;AAAuB;AAClE,QAAI,CAACzE,QAAQnL,cAAR,CAAuB,UAAvB,CAAL,EAAyC;AAAEmL,cAAQ+C,QAAR,GAAmB,CAAnB;AAAuB;AAClE,QAAI,CAAC/C,QAAQnL,cAAR,CAAuB,OAAvB,CAAL,EAAsC;AAAEmL,cAAQmJ,KAAR,GAAgB,CAAhB;AAAoB;;AAE5DxG,gBAAW5K,KAAX,EAAkBiI,OAAlB;AACA+J,cAAUhS,KAAV;AACD;;AAED;;;;;;;;+BAIWiI,O,EAAS;AAClB,UAAItL,SAASsL,OAAT,CAAJ,EAAuB;AACrB2C,oBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+BsG,OAA/B;AACD;AACD,aAAO,IAAP;AACD;;AAED;;;;;;;;;uBAMGkB,K,EAAOlB,O,EAAS;AACjB,UAAI6D,UAAUhI,MAAV,GAAmB,CAAnB,IAAwB,OAAOqF,KAAP,KAAiB,SAA7C,EAAwD;AACtDlB,kBAAUkB,KAAV;AACAA,gBAAQ,KAAR;AACD;;AAED,WAAKyB,UAAL,CAAgB3C,OAAhB;AACAuC,UAAG9M,SAAS,KAAKiE,GAAd,CAAH,EAAuBwH,KAAvB;AACA,aAAO,IAAP;AACD;;AAED;;;;;;;;wBAKIA,K,EAAO;AACTwB,WAAIjN,SAAS,KAAKiE,GAAd,CAAJ,EAAwBwH,KAAxB;AACA,aAAO,IAAP;AACD;;;wBAEW;AAAE,aAAOzL,SAAS,KAAKiE,GAAd,EAAmBC,KAA1B;AAAkC;;;wBAElC;AAAE,aAAOlE,SAAS,KAAKiE,GAAd,EAAmBnD,OAA1B;AAAoC;;;wBAElC;AAAE,aAAOd,SAAS,KAAKiE,GAAd,EAAmBwQ,WAA1B;AAAwC;;;wBAExC;AAAE,aAAOzU,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2BsJ,aAAlC;AAAkD,K;sBACtD9T,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAAC4P,eAAe9T,KAAhB,EAA/B;AAAyD;;;wBAErE;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2ByE,QAAlC;AAA6C,K;sBACjDjP,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAAC+K,UAAUjP,KAAX,EAA/B;AAAoD;;;wBAE3D;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2B+C,QAAlC;AAA6C,K;sBACjDvN,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAACqJ,UAAUvN,KAAX,EAA/B;AAAoD;;;wBAE9D;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2BmJ,KAAlC;AAA0C,K;sBAC9C3T,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAACyP,OAAO3T,KAAR,EAA/B;AAAiD;;;wBAErD;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2BsE,QAAlC;AAA6C,K;sBACjD9O,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAAC4K,UAAU9O,KAAX,EAA/B;AAAoD;;;wBAE1D;AAAE,aAAOC,SAAS,KAAKiE,GAAd,EAAmBsG,OAAnB,CAA2BwE,SAAlC;AAA8C,K;sBAClDhP,K,EAAO;AAAEmN,kBAAWlN,SAAS,KAAKiE,GAAd,CAAX,EAA+B,EAAC8K,WAAWhP,KAAZ,EAA/B;AAAqD;;;wBAEjD;AAAE,aAAOwS,aAAP;AAAuB;;;wBACxB;AAAE,aAAOC,cAAP;AAAwB;;;wBAC3B;AAAE,aAAOC,aAAP;AAAuB;;;;;;AAGtD;;;AACAuC,gBAAgBhV,QAAhB,GAA2BA,QAA3B;AACAgV,gBAAgB9U,QAAhB,GAA2BA,QAA3B;AACA8U,gBAAgB7U,UAAhB,GAA6BA,UAA7B;AACA6U,gBAAgBjC,SAAhB,GAA4BA,SAA5B;AACA;;kBAEeiC,e;;;;;;;ACpgBf,gCAAgC,wCAAwC,wBAAwB,+BAA+B,cAAc,kBAAkB,OAAO,MAAM,gBAAgB,uCAAuC,YAAY,aAAa,oCAAoC,iCAAiC,+BAA+B,4BAA4B,kCAAkC,+BAA+B,6BAA6B,0BAA0B,0CAA0C,uCAAuC,qCAAqC,kCAAkC,UAAU,gCAAgC,UAAU,iCAAiC,iCAAiC,8BAA8B,4BAA4B,yBAAyB,gCAAgC,aAAa,+BAA+B,eAAe,YAAY,WAAW,iBAAiB,cAAc,YAAY,aAAa,mBAAmB,WAAW,YAAY,qBAAqB,aAAa,+BAA+B,uBAAuB,2BAA2B,mBAAmB,kDAAkD,YAAY,aAAa,E","file":"plain-overlay-limit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 424b70829dd347295aab","/*\n * CSSPrefix\n * https://github.com/anseki/cssprefix\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\nfunction ucf(text) { return text.substr(0, 1).toUpperCase() + text.substr(1); }\n\nconst PREFIXES = ['webkit', 'ms', 'moz', 'o'],\n  NAME_PREFIXES = PREFIXES.reduce((prefixes, prefix) => {\n    prefixes.push(prefix);\n    prefixes.push(ucf(prefix));\n    return prefixes;\n  }, []),\n  VALUE_PREFIXES = PREFIXES.map(prefix => `-${prefix}-`),\n\n  /**\n   * Get sample CSSStyleDeclaration.\n   * @returns {CSSStyleDeclaration}\n   */\n  getDeclaration = (() => {\n    let declaration;\n    return () => (declaration = declaration || document.createElement('div').style);\n  })(),\n\n  /**\n   * Normalize name.\n   * @param {} propName - A name that is normalized.\n   * @returns {string} A normalized name.\n   */\n  normalizeName = (() => {\n    const rePrefixedName = new RegExp('^(?:' + PREFIXES.join('|') + ')(.)', 'i'),\n      reUc = /[A-Z]/;\n    return propName => (propName = (propName + '').replace(/\\s/g, '')\n      .replace(/-([\\da-z])/gi, (str, p1) => p1.toUpperCase()) // camelCase\n      // 'ms' and 'Ms' are found by rePrefixedName 'i' option\n      .replace(rePrefixedName, (str, p1) => reUc.test(p1) ? p1.toLowerCase() : str) // Remove prefix\n    ).toLowerCase() === 'float' ? 'cssFloat' : propName; // For old CSSOM\n  })(),\n\n  /**\n   * Normalize value.\n   * @param {} propValue - A value that is normalized.\n   * @returns {string} A normalized value.\n   */\n  normalizeValue = (() => {\n    const rePrefixedValue = new RegExp('^(?:' + VALUE_PREFIXES.join('|') + ')', 'i');\n    return propValue => (propValue + '').replace(/\\s/g, '').replace(rePrefixedValue, '');\n  })(),\n\n  /**\n   * Polyfill for `CSS.supports`.\n   * @param {string} propName - A name.\n   * @param {string} propValue - A value.\n   * @returns {boolean} `true` if given pair is accepted.\n   */\n  cssSupports = (() => {\n    // return window.CSS && window.CSS.supports || ((propName, propValue) => {\n    // `CSS.supports` doesn't find prefixed property.\n    return ((propName, propValue) => {\n      const declaration = getDeclaration();\n      // In some browsers, `declaration[prop] = value` updates any property.\n      propName = propName.replace(/[A-Z]/g, str => `-${str.toLowerCase()}`); // kebab-case\n      declaration.setProperty(propName, propValue);\n      return declaration.getPropertyValue(propName) === propValue;\n    });\n  })(),\n\n  propNames = {}, propValues = {}; // Cache\n\n// [DEBUG]\nwindow.normalizeName = normalizeName;\nwindow.normalizeValue = normalizeValue;\nwindow.cssSupports = cssSupports;\n// [/DEBUG]\n\nfunction getName(propName) {\n  propName = normalizeName(propName);\n  if (propName && propNames[propName] == null) {\n    window.getNameDone = 'get'; // [DEBUG/]\n    const declaration = getDeclaration();\n\n    if (declaration[propName] != null) { // Original\n      propNames[propName] = propName;\n\n    } else { // Try with prefixes\n      const ucfName = ucf(propName);\n      if (!NAME_PREFIXES.some(prefix => {\n        const prefixed = prefix + ucfName;\n        if (declaration[prefixed] != null) {\n          propNames[propName] = prefixed;\n          return true;\n        }\n        return false;\n      })) {\n        propNames[propName] = false;\n      }\n    }\n\n  }\n  return propNames[propName] || void 0;\n}\n\nfunction getValue(propName, propValue) {\n  let res;\n\n  if (!(propName = getName(propName))) { return res; } // Invalid property\n\n  propValues[propName] = propValues[propName] || {};\n  (Array.isArray(propValue) ? propValue : [propValue]).some(propValue => {\n    propValue = normalizeValue(propValue);\n    (window.getValueDone = window.getValueDone || []).push(propValue); // [DEBUG/]\n\n    if (propValues[propName][propValue] != null) { // Cache\n      if (propValues[propName][propValue] !== false) {\n        res = propValues[propName][propValue];\n        return true;\n      } else {\n        return false; // Continue to next value\n      }\n    }\n    window.getValueDone.push('get'); // [DEBUG/]\n\n    if (cssSupports(propName, propValue)) { // Original\n      res = propValues[propName][propValue] = propValue;\n      return true;\n    }\n\n    if (VALUE_PREFIXES.some(prefix => { // Try with prefixes\n      const prefixed = prefix + propValue;\n      if (cssSupports(propName, prefixed)) {\n        res = propValues[propName][propValue] = prefixed;\n        return true;\n      }\n      return false;\n    })) {\n      return true;\n    }\n\n    propValues[propName][propValue] = false;\n    return false; // Continue to next value\n  });\n\n  return typeof res === 'string' ? res : void 0; // It might be empty string.\n}\n\nconst CSSPrefix = {\n  getName: getName,\n  getValue: getValue\n};\n\nexport default CSSPrefix;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/cssprefix/src/cssprefix.js","/*\n * PlainOverlay\n * https://anseki.github.io/plain-overlay/\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\nimport CSSPrefix from 'cssprefix';\nimport AnimEvent from 'anim-event';\nimport mClassList from 'm-class-list';\nimport TimedTransition from 'timed-transition';\nimport CSS_TEXT from './default.scss';\nmClassList.ignoreNative = true;\n\nconst\n  APP_ID = 'plainoverlay',\n  STYLE_ELEMENT_ID = `${APP_ID}-style`,\n  STYLE_CLASS = APP_ID,\n  STYLE_CLASS_DOC = `${APP_ID}-doc`,\n  STYLE_CLASS_SHOW = `${APP_ID}-show`,\n  STYLE_CLASS_HIDE = `${APP_ID}-hide`,\n  STYLE_CLASS_FORCE = `${APP_ID}-force`,\n  STYLE_CLASS_BODY = `${APP_ID}-body`,\n  FACE_DEFS_ELEMENT_ID = `${APP_ID}-builtin-face-defs`,\n\n  STATE_HIDDEN = 0, STATE_SHOWING = 1, STATE_SHOWN = 2, STATE_HIDING = 3,\n  // DURATION = 2500, // COPY: default.scss\n  DURATION = 200, // COPY: default.scss\n  TOLERANCE = 0.5,\n\n  IS_TRIDENT = !!document.uniqueID,\n  IS_EDGE = '-ms-scroll-limit' in document.documentElement.style &&\n    '-ms-ime-align' in document.documentElement.style && !window.navigator.msPointerEnabled,\n  IS_WEBKIT = !window.chrome && 'WebkitAppearance' in document.documentElement.style, // [DEBUG/]\n  IS_BLINK = !!(window.chrome && window.chrome.webstore),\n  IS_GECKO = 'MozAppearance' in document.documentElement.style, // [DEBUG/]\n\n  isObject = (() => {\n    const toString = {}.toString, fnToString = {}.hasOwnProperty.toString,\n      objFnString = fnToString.call(Object);\n    return obj => {\n      let proto, constr;\n      return obj && toString.call(obj) === '[object Object]' &&\n        (!(proto = Object.getPrototypeOf(obj)) ||\n          (constr = proto.hasOwnProperty('constructor') && proto.constructor) &&\n          typeof constr === 'function' && fnToString.call(constr) === objFnString);\n    };\n  })(),\n  isFinite = Number.isFinite || (value => typeof value === 'number' && window.isFinite(value)),\n\n  /**\n   * An object that has properties of instance.\n   * @typedef {Object} props\n   * @property {Element} elmTarget - Target element.\n   * @property {Element} elmTargetBody - Target body element.\n   * @property {Element} elmOverlay - Overlay element.\n   * @property {Element} elmOverlayBody - Overlay body element.\n   * @property {boolean} isDoc - `true` if target is document.\n   * @property {Window} window - Window that conatins target element.\n   * @property {HTMLDocument} document - Document that conatins target element.\n   * @property {TimedTransition} transition - TimedTransition instance.\n   * @property {number} state - Current state.\n   * @property {Object} options - Options.\n   */\n\n  /** @type {Object.<_id: number, props>} */\n  insProps = {};\n\nlet insId = 0;\n\n// [DEBUG]\nconst traceLog = [];\nconst STATE_TEXT = {};\nSTATE_TEXT[STATE_HIDDEN] = 'STATE_HIDDEN';\nSTATE_TEXT[STATE_SHOWING] = 'STATE_SHOWING';\nSTATE_TEXT[STATE_SHOWN] = 'STATE_SHOWN';\nSTATE_TEXT[STATE_HIDING] = 'STATE_HIDING';\n// [/DEBUG]\n\nfunction forceReflow(target) {\n  // Trident and Blink bug (reflow like `offsetWidth` can't update)\n  setTimeout(() => {\n    const parent = target.parentNode, next = target.nextSibling;\n    // It has to be removed first for Blink.\n    parent.insertBefore(parent.removeChild(target), next);\n  }, 0);\n}\nwindow.forceReflow = forceReflow; // [DEBUG/]\n\n/**\n * Set style properties while saving current properties.\n * @param {Element} element - Target element.\n * @param {Object} styleProps - New style properties.\n * @param {(Object|null)} savedStyleProps - Current style properties holder.\n * @param {Array} [propNames] - Names of target properties.\n * @returns {Element} Target element itself.\n */\nfunction setStyle(element, styleProps, savedStyleProps, propNames) {\n  const style = element.style;\n  (propNames || Object.keys(styleProps)).forEach(prop => {\n    if (styleProps[prop] != null) {\n      if (savedStyleProps && savedStyleProps[prop] == null) {\n        savedStyleProps[prop] = style[prop];\n      }\n      style[prop] = styleProps[prop];\n      styleProps[prop] = null;\n    }\n  });\n  return element;\n}\n\n/**\n * Restore saved style properties.\n * @param {Element} element - Target element.\n * @param {Object} savedStyleProps - Saved style properties.\n * @param {Array} [propNames] - Names of properties that is restored.\n * @returns {Element} Target element itself.\n */\nfunction restoreStyle(element, savedStyleProps, propNames) {\n  return setStyle(element, savedStyleProps, null, propNames);\n}\n\n/**\n * An object that simulates `DOMRect` to indicate a bounding-box.\n * @typedef {Object} BBox\n * @property {(number|null)} left - document coordinate\n * @property {(number|null)} top - document coordinate\n * @property {(number|null)} right - document coordinate\n * @property {(number|null)} bottom - document coordinate\n * @property {(number|null)} width\n * @property {(number|null)} height\n */\n\n/**\n * Get an element's bounding-box that contains coordinates relative to the element's document or window.\n * @param {Element} element - Target element.\n * @param {Window} [window] - Whether it's relative to the element's window, or document.\n * @returns {(BBox|null)} A bounding-box or null when failed.\n */\nfunction getBBox(element, window) {\n  const rect = element.getBoundingClientRect(),\n    bBox = {left: rect.left, top: rect.top,\n      right: rect.right, bottom: rect.bottom, width: rect.width, height: rect.height};\n  if (window) {\n    bBox.left += window.pageXOffset;\n    bBox.right += window.pageXOffset;\n    bBox.top += window.pageYOffset;\n    bBox.bottom += window.pageYOffset;\n  }\n  return bBox;\n}\nwindow.getBBox = getBBox; // [DEBUG/]\n\nfunction scrollLeft(element, isDoc, window, value) {\n  if (isDoc) {\n    const target = window;\n    if (value != null) { target.scrollTo(value, target.pageYOffset); }\n    return target.pageXOffset;\n  } else {\n    const target = element;\n    if (value != null) { target.scrollLeft = value; }\n    return target.scrollLeft;\n  }\n}\nwindow.scrollLeft = scrollLeft; // [DEBUG/]\n\nfunction scrollTop(element, isDoc, window, value) {\n  if (isDoc) {\n    const target = window;\n    if (value != null) { target.scrollTo(target.pageXOffset, value); }\n    return target.pageYOffset;\n  } else {\n    const target = element;\n    if (value != null) { target.scrollTop = value; }\n    return target.scrollTop;\n  }\n}\nwindow.scrollTop = scrollTop; // [DEBUG/]\n\nfunction resizeTarget(props, width, height) {\n  const elmTargetBody = props.elmTargetBody;\n\n  let rect = elmTargetBody.getBoundingClientRect();\n  if (Math.abs(rect.width - width) < TOLERANCE &&\n      Math.abs(rect.height - height) < TOLERANCE) { return; }\n\n  const targetBodyCmpStyle = props.window.getComputedStyle(elmTargetBody, ''),\n    boxSizing = targetBodyCmpStyle.boxSizing,\n    includeProps = boxSizing === 'border-box' ? [] :\n      boxSizing === 'padding-box' ? ['border'] : ['border', 'padding'], // content-box\n\n    PROP_NAMES = {\n      border: {\n        width: ['borderLeftWidth', 'borderRightWidth'],\n        height: ['borderTopWidth', 'borderBottomWidth']\n      },\n      padding: {\n        width: ['paddingLeft', 'paddingRight'],\n        height: ['paddingTop', 'paddingBottom']\n      }\n    },\n\n    values = ['width', 'height'].reduce((values, dir) => {\n      includeProps.forEach(part => {\n        PROP_NAMES[part][dir].forEach(propName => {\n          values[dir] -= parseFloat(targetBodyCmpStyle[propName]);\n        });\n      });\n      return values;\n    }, {width: width, height: height});\n\n  // Since the `width` and `height` might change each other, fix both.\n  setStyle(elmTargetBody, {\n    // The value might be negative number when size is too small.\n    width: values.width > 0 ? `${values.width}px` : 0,\n    height: values.height > 0 ? `${values.height}px` : 0\n  }, props.savedStyleTargetBody);\n\n  // In some browsers, getComputedStyle might return computed values that is not px instead of used values.\n  const fixStyle = {};\n  rect = elmTargetBody.getBoundingClientRect();\n  if (Math.abs(rect.width - width) >= TOLERANCE) {\n    // [DEBUG]\n    console.warn(`[resizeTarget] Incorrect width: ${rect.width}` +\n      ` (expected: ${width} passed: ${values.width})`);\n    // [/DEBUG]\n    fixStyle.width = `${values.width - (rect.width - width)}px`;\n  }\n  if (rect.height !== height) {\n    // [DEBUG]\n    console.warn(`[resizeTarget] Incorrect height: ${rect.height}` +\n      ` (expected: ${height} passed: ${values.height})`);\n    // [/DEBUG]\n    fixStyle.height = `${values.height - (rect.height - height)}px`;\n  }\n  setStyle(elmTargetBody, fixStyle, props.savedStyleTargetBody);\n}\nwindow.resizeTarget = resizeTarget; // [DEBUG/]\n\n// Trident and Edge bug, width and height are interchanged.\nfunction getDocClientWH(props) {\n  const elmTarget = props.elmTarget,\n    width = elmTarget.clientWidth, height = elmTarget.clientHeight;\n  if (IS_TRIDENT || IS_EDGE) {\n    const targetBodyCmpStyle = props.window.getComputedStyle(props.elmTargetBody, ''),\n      wMode = targetBodyCmpStyle.writingMode || targetBodyCmpStyle['writing-mode'], // Trident bug\n      direction = targetBodyCmpStyle.direction;\n    return wMode === 'tb-rl' || wMode === 'bt-rl' || wMode === 'tb-lr' || wMode === 'bt-lr' ||\n        IS_EDGE && (\n          direction === 'ltr' && (wMode === 'vertical-rl' || wMode === 'vertical-lr') ||\n          direction === 'rtl' && (wMode === 'vertical-rl' || wMode === 'vertical-lr')) ?\n      {width: height, height: width} : // interchange\n      {width: width, height: height};\n  } else {\n    return {width: width, height: height};\n  }\n}\nwindow.getDocClientWH = getDocClientWH; // [DEBUG/]\n\nfunction restoreScroll(props, element) {\n  traceLog.push('<restoreScroll>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n\n  function scrollElement(element, isDoc, left, top) {\n    try {\n      scrollLeft(element, isDoc, props.window, left);\n      scrollTop(element, isDoc, props.window, top);\n    } catch (error) { /* Something might have been changed, and that can be ignored. */ }\n  }\n\n  if (element) {\n    return props.savedElementsScroll.some(elementScroll => {\n      if (elementScroll.element === element) {\n        scrollElement(elementScroll.element, elementScroll.isDoc, elementScroll.left, elementScroll.top);\n        return true;\n      }\n      return false;\n    })\n    ? (traceLog.push('DONE:ELEMENT', `_id:${props._id}`, '</restoreScroll>'), true) : // [DEBUG/]\n      (traceLog.push('NotInTarget', `_id:${props._id}`, '</restoreScroll>'), false) // [DEBUG/]\n    ;\n  } else {\n    props.savedElementsScroll.forEach(elementScroll => {\n      scrollElement(elementScroll.element, elementScroll.isDoc, elementScroll.left, elementScroll.top);\n    });\n    traceLog.push('DONE:ALL', `_id:${props._id}`, '</restoreScroll>'); // [DEBUG/]\n    return true;\n  }\n}\n\nfunction restoreAccKeys(props) {\n  props.savedElementsAccKeys.forEach(elementAccKeys => {\n    try {\n      if (elementAccKeys.tabIndex === false) {\n        elementAccKeys.element.removeAttribute('tabindex');\n      } else if (elementAccKeys.tabIndex != null) {\n        elementAccKeys.element.tabIndex = elementAccKeys.tabIndex;\n      }\n    } catch (error) { /* Something might have been changed, and that can be ignored. */ }\n\n    try {\n      if (elementAccKeys.accessKey) {\n        elementAccKeys.element.accessKey = elementAccKeys.accessKey;\n      }\n    } catch (error) { /* Something might have been changed, and that can be ignored. */ }\n  });\n}\nwindow.restoreAccKeys = restoreAccKeys; // [DEBUG/]\n\nfunction avoidFocus(props, element) {\n  // [DEBUG]\n  traceLog.push('<avoidFocus>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n  traceLog.push(\n    `element:${element === document ? 'document' : element.tagName || 'UNKNOWN'}` +\n    `${element.id ? `#${element.id}` : ''}`);\n  // [/DEBUG]\n  if (props.isDoc && element !== element.ownerDocument.body &&\n        !(props.elmOverlay.compareDocumentPosition(element) & Node.DOCUMENT_POSITION_CONTAINED_BY) ||\n      !props.isDoc && (element === props.elmTargetBody ||\n        props.elmTargetBody.compareDocumentPosition(element) & Node.DOCUMENT_POSITION_CONTAINED_BY)) {\n    if (element.blur) { // Trident and Edge don't support SVG#blur\n      element.blur();\n    } else {\n      element.ownerDocument.body.focus();\n    }\n    traceLog.push('DONE', `_id:${props._id}`, '</avoidFocus>'); // [DEBUG/]\n    return true;\n  }\n  traceLog.push('NotInTarget', `_id:${props._id}`, '</avoidFocus>'); // [DEBUG/]\n  return false;\n}\n\n// Selection.containsNode polyfill for Trident\nfunction selContainsNode(selection, node, partialContainment) {\n  const nodeRange = node.ownerDocument.createRange(),\n    iLen = selection.rangeCount;\n  nodeRange.selectNodeContents(node);\n  for (let i = 0; i < iLen; i++) {\n    const selRange = selection.getRangeAt(i);\n    // Edge bug (Issue #7321753); getRangeAt returns empty (collapsed) range\n    // NOTE: It can not recover when the selection has multiple ranges.\n    if (!selRange.toString().length && selection.toString().length && iLen === 1) {\n      console.log('Edge bug (Issue #7321753)'); // [DEBUG/]\n      selRange.setStart(selection.anchorNode, selection.anchorOffset);\n      selRange.setEnd(selection.focusNode, selection.focusOffset);\n      // Edge doesn't throw when end is upper than start.\n      if (selRange.toString() !== selection.toString()) {\n        selRange.setStart(selection.focusNode, selection.focusOffset);\n        selRange.setEnd(selection.anchorNode, selection.anchorOffset);\n        if (selRange.toString() !== selection.toString()) {\n          throw new Error('Edge bug (Issue #7321753); Couldn\\'t recover');\n        }\n      }\n    }\n    if (partialContainment ?\n        selRange.compareBoundaryPoints(Range.START_TO_END, nodeRange) >= 0 &&\n        selRange.compareBoundaryPoints(Range.END_TO_START, nodeRange) <= 0 :\n        selRange.compareBoundaryPoints(Range.START_TO_START, nodeRange) < 0 &&\n        selRange.compareBoundaryPoints(Range.END_TO_END, nodeRange) > 0) {\n      return true;\n    }\n  }\n  return false;\n}\nwindow.selContainsNode = selContainsNode; // [DEBUG/]\n\n/**\n * Indicates whether the selection is part of the node or not.\n * @param {Node} node - Target node.\n * @param {Selection} selection - The parsed selection.\n * @returns {boolean} `true` if all ranges of `selection` are part of `node`.\n */\nfunction nodeContainsSel(node, selection) {\n  const nodeRange = node.ownerDocument.createRange(),\n    iLen = selection.rangeCount;\n  nodeRange.selectNode(node);\n  for (let i = 0; i < iLen; i++) {\n    const selRange = selection.getRangeAt(i);\n    if (selRange.compareBoundaryPoints(Range.START_TO_START, nodeRange) < 0 ||\n        selRange.compareBoundaryPoints(Range.END_TO_END, nodeRange) > 0) {\n      return false;\n    }\n  }\n  return true;\n}\nwindow.nodeContainsSel = nodeContainsSel; // [DEBUG/]\n\nfunction avoidSelect(props) {\n  traceLog.push('<avoidSelect>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  const selection = ('getSelection' in window ? props.window : props.document).getSelection();\n  // [DEBUG]\n  if (selection.rangeCount) {\n    let start = selection.anchorNode, end = selection.focusNode;\n    if (start && start.nodeType === Node.TEXT_NODE) { start = start.parentNode; }\n    if (end && end.nodeType === Node.TEXT_NODE) { end = end.parentNode; }\n    traceLog.push(\n      `start:${!start ? 'NONE' : start === document ? 'document' : start.tagName || 'UNKNOWN'}` +\n      `${start && start.id ? `#${start.id}` : ''}` +\n      `(${selection.anchorOffset})` +\n      `,end:${!end ? 'NONE' : end === document ? 'document' : end.tagName || 'UNKNOWN'}` +\n      `${end && end.id ? `#${end.id}` : ''}` +\n      `(${selection.focusOffset})` +\n      `,isCollapsed:${selection.isCollapsed}`\n    );\n  } else {\n    traceLog.push('NoRange');\n  }\n  // [/DEBUG]\n  if (selection.rangeCount && (props.isDoc ?\n      !nodeContainsSel(props.elmOverlayBody, selection) :\n      (selection.containsNode &&\n          (!IS_BLINK || !selection.isCollapsed) ?  // Blink bug, fails with empty string.\n        selection.containsNode(props.elmTargetBody, true) :\n        selContainsNode(selection, props.elmTargetBody, true))\n      )) {\n    try {\n      selection.removeAllRanges(); // Trident bug?, `Error:800a025e` comes sometime\n    } catch (error) { /* ignore */ }\n    props.document.body.focus();\n    // Trident bug? It seems that `focus()` makes selection again.\n    if (selection.rangeCount > 0) {\n      try {\n        selection.removeAllRanges(); // Trident bug?, `Error:800a025e` comes sometime\n      } catch (error) { /* ignore */ }\n    }\n    traceLog.push('DONE', `_id:${props._id}`, '</avoidSelect>'); // [DEBUG/]\n    return true;\n  }\n  traceLog.push('NoSelection', `_id:${props._id}`, '</avoidSelect>'); // [DEBUG/]\n  return false;\n}\n\nfunction barLeft(wMode, direction) {\n  const svgSpec = wMode === 'rl-tb' || wMode === 'tb-rl' || wMode === 'bt-rl' || wMode === 'rl-bt';\n  return IS_TRIDENT && svgSpec ||\n    IS_EDGE && (svgSpec ||\n      direction === 'rtl' && (wMode === 'horizontal-tb' || wMode === 'vertical-rl') ||\n      direction === 'ltr' && wMode === 'vertical-rl');\n}\nwindow.barLeft = barLeft; // [DEBUG/]\n\nfunction barTop(wMode, direction) {\n  const svgSpec = wMode === 'bt-rl' || wMode === 'bt-lr' || wMode === 'lr-bt' || wMode === 'rl-bt';\n  return IS_TRIDENT && svgSpec ||\n    IS_EDGE && (svgSpec ||\n      direction === 'rtl' && (wMode === 'vertical-lr' || wMode === 'vertical-rl'));\n}\nwindow.barTop = barTop; // [DEBUG/]\n\nfunction disableDocBars(props) {\n  const elmTarget = props.elmTarget, elmTargetBody = props.elmTargetBody,\n    targetBodyRect = elmTargetBody.getBoundingClientRect();\n\n  // Get size of each scrollbar.\n  let clientWH = getDocClientWH(props),\n    barV = -clientWH.width, barH = -clientWH.height; // elmTarget.clientWidth/clientHeight\n  setStyle(elmTarget, {overflow: 'hidden'}, props.savedStyleTarget);\n  clientWH = getDocClientWH(props);\n  barV += clientWH.width;\n  barH += clientWH.height;\n\n  if (barV || barH) {\n    const targetBodyCmpStyle = props.window.getComputedStyle(elmTargetBody, '');\n    let propV, propH;\n    // There is no way to get absolute position of document.\n    // We need distance between the document and its window, or a method like `element.screenX`\n    // that gets absolute position of an element.\n    // For the moment, Trident and Edge make a scrollbar at the left/top side when RTL document\n    // or CJK vertical document is rendered.\n    if (IS_TRIDENT || IS_EDGE) {\n      const wMode = targetBodyCmpStyle.writingMode || targetBodyCmpStyle['writing-mode'], // Trident bug\n        direction = targetBodyCmpStyle.direction;\n      if (barV) { propV = barLeft(wMode, direction) ? 'marginLeft' : 'marginRight'; }\n      if (barH) { propH = barTop(wMode, direction) ? 'marginTop' : 'marginBottom'; }\n    } else {\n      if (barV) { propV = 'marginRight'; }\n      if (barH) { propH = 'marginBottom'; }\n    }\n\n    const addStyle = {};\n    if (barV) { addStyle[propV] = `${parseFloat(targetBodyCmpStyle[propV]) + barV}px`; }\n    if (barH) { addStyle[propH] = `${parseFloat(targetBodyCmpStyle[propH]) + barH}px`; }\n    setStyle(elmTargetBody, addStyle, props.savedStyleTargetBody);\n    resizeTarget(props, targetBodyRect.width, targetBodyRect.height);\n\n    // `overflow: 'hidden'` might change scroll.\n    restoreScroll(props, elmTarget);\n    return true;\n  } else {\n    restoreStyle(elmTarget, props.savedStyleTarget, ['overflow']);\n    return false;\n  }\n}\nwindow.disableDocBars = disableDocBars; // [DEBUG/]\n\nfunction position(props, targetBodyBBox) {\n  const elmTargetBody = props.elmTargetBody,\n    targetBodyCmpStyle = props.window.getComputedStyle(elmTargetBody, ''),\n\n    elmOverlay = props.elmOverlay,\n    overlayCmpStyle = props.window.getComputedStyle(elmOverlay, ''),\n    overlayBBox = getBBox(elmOverlay, props.window),\n\n    borders = ['Top', 'Right', 'Bottom', 'Left'].reduce((borders, prop) => {\n      borders[prop.toLowerCase()] = parseFloat(targetBodyCmpStyle[`border${prop}Width`]);\n      return borders;\n    }, {}),\n\n    // Get distance between document and origin of `elmOverlay`.\n    offset = {left: overlayBBox.left - parseFloat(overlayCmpStyle.left),\n      top: overlayBBox.top - parseFloat(overlayCmpStyle.top)},\n\n    style = {\n      left: `${targetBodyBBox.left - offset.left + borders.left}px`,\n      top: `${targetBodyBBox.top - offset.top + borders.top}px`,\n      width: `${targetBodyBBox.width - borders.left - borders.right}px`,\n      height: `${targetBodyBBox.height - borders.top - borders.bottom}px`\n    },\n    reValue = /^([\\d\\.]+)(px|%)$/;\n\n  // border-radius\n  [\n    {prop: 'TopLeft', hBorder: 'left', vBorder: 'top'},\n    {prop: 'TopRight', hBorder: 'right', vBorder: 'top'},\n    {prop: 'BottomRight', hBorder: 'right', vBorder: 'bottom'},\n    {prop: 'BottomLeft', hBorder: 'left', vBorder: 'bottom'}\n  ].forEach(corner => {\n    const prop = CSSPrefix.getName(`border${corner.prop}Radius`),\n      values = targetBodyCmpStyle[prop].split(' ');\n    let h = values[0], v = values[1] || values[0],\n      matches = reValue.exec(h);\n    h = !matches ? 0 :\n      matches[2] === 'px' ? +matches[1] :\n      matches[1] * targetBodyBBox.width / 100;\n    matches = reValue.exec(v);\n    v = !matches ? 0 :\n      matches[2] === 'px' ? +matches[1] :\n      matches[1] * targetBodyBBox.height / 100;\n\n    h -= borders[corner.hBorder];\n    v -= borders[corner.vBorder];\n    if (h > 0 && v > 0) {\n      style[prop] = `${h}px ${v}px`;\n    }\n  });\n\n  setStyle(elmOverlay, style);\n  props.targetBodyBBox = targetBodyBBox;\n}\nwindow.position = position; // [DEBUG/]\n\nfunction getTargetElements(props) {\n  const elmTargetBody = props.elmTargetBody,\n    elmOverlay = props.elmOverlay,\n    targetElements = [props.elmTarget];\n  if (props.isDoc) {\n    targetElements.push(elmTargetBody);\n    Array.prototype.slice.call(elmTargetBody.childNodes).forEach(childNode => {\n      if (childNode.nodeType === Node.ELEMENT_NODE &&\n          childNode !== elmOverlay &&\n          !mClassList(childNode).contains(STYLE_CLASS) &&\n          childNode.id !== FACE_DEFS_ELEMENT_ID) {\n        targetElements.push(childNode);\n        Array.prototype.push.apply(targetElements, childNode.querySelectorAll('*'));\n      }\n    });\n  } else {\n    Array.prototype.push.apply(targetElements, elmTargetBody.querySelectorAll('*'));\n  }\n  return targetElements;\n}\n\nfunction finishShowing(props) {\n  traceLog.push('<finishShowing>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  // blur\n  props.filterElements = null;\n  if (props.options.blur !== false) {\n    const propName = CSSPrefix.getName('filter'),\n      propValue = CSSPrefix.getValue('filter', `blur(${props.options.blur}px)`);\n    if (propValue) { // undefined if no propName\n      // Array of {element: element, savedStyle: {}}\n      const filterElements = props.isDoc ?\n        Array.prototype.slice.call(props.elmTargetBody.childNodes).filter(childNode =>\n            childNode.nodeType === Node.ELEMENT_NODE &&\n            childNode !== props.elmOverlay &&\n            !mClassList(childNode).contains(STYLE_CLASS) &&\n            childNode.id !== FACE_DEFS_ELEMENT_ID)\n          .map(element => ({element: element, savedStyle: {}})) :\n        [{element: props.elmTargetBody, savedStyle: {}}];\n\n      filterElements.forEach(filterElement => {\n        const style = {}; // new object for each element.\n        style[propName] = propValue;\n        setStyle(filterElement.element, style, filterElement.savedStyle);\n      });\n      props.filterElements = filterElements;\n    }\n  }\n\n  props.state = STATE_SHOWN;\n  traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  if (props.options.onShow) { props.options.onShow.call(props.ins); }\n  traceLog.push(`_id:${props._id}`, '</finishShowing>'); // [DEBUG/]\n}\n\nfunction finishHiding(props\n    /* [DISABLE-SYNC/]\n    , sync\n    [DISABLE-SYNC/] */\n    ) {\n  // sync-mode (`sync` is `true`): Skip restoring active element and finish all immediately.\n  traceLog.push('<finishHiding>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  /* [DISABLE-SYNC/]\n  traceLog.push(`sync:${!!sync}`); // [DEBUG/]\n  [DISABLE-SYNC/] */\n  mClassList(props.elmOverlay).add(STYLE_CLASS_HIDE);\n\n  restoreStyle(props.elmTarget, props.savedStyleTarget);\n  restoreStyle(props.elmTargetBody, props.savedStyleTargetBody);\n  props.savedStyleTarget = {};\n  props.savedStyleTargetBody = {};\n\n  restoreAccKeys(props);\n  props.savedElementsAccKeys = [];\n\n  if (\n      /* [DISABLE-SYNC/]\n      !sync &&\n      [DISABLE-SYNC/] */\n      props.isDoc && props.activeElement) {\n    // props.state must be STATE_HIDDEN for avoiding focus.\n    const stateSave = props.state;\n    props.state = STATE_HIDDEN;\n    traceLog.push(`[SAVE1]state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n    // the event is fired after function exited in some browsers (e.g. Trident).\n    traceLog.push('focusListener:REMOVE'); // [DEBUG/]\n    props.elmTargetBody.removeEventListener('focus', props.focusListener, true);\n    props.activeElement.focus();\n    // Don't change props.state for calling `hide(force)` before `restoreAndFinish` (async-mode)\n    props.state = stateSave;\n    traceLog.push(`[SAVE2]state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  }\n  props.activeElement = null;\n\n  // Since `focus()` might scroll, do this after `focus()` and reflow.\n  function restoreAndFinish() {\n    traceLog.push('<finishHiding.restoreAndFinish>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n    props.timerRestoreAndFinish = null;\n    props.state = STATE_HIDDEN;\n    traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n    traceLog.push('focusListener:ADD'); // [DEBUG/]\n    props.elmTargetBody.addEventListener('focus', props.focusListener, true);\n    restoreScroll(props);\n    props.savedElementsScroll = null;\n\n    if (props.options.onHide) { props.options.onHide.call(props.ins); }\n    traceLog.push(`_id:${props._id}`, '</finishHiding.restoreAndFinish>'); // [DEBUG/]\n  }\n\n  if (props.timerRestoreAndFinish) {\n    traceLog.push('ClearPrevTimer'); // [DEBUG/]\n    clearTimeout(props.timerRestoreAndFinish);\n    props.timerRestoreAndFinish = null;\n  }\n  /* [DISABLE-SYNC/]\n  if (sync) {\n    restoreAndFinish();\n  } else {\n  [DISABLE-SYNC/] */ // eslint-disable-next-line indent\n    props.timerRestoreAndFinish = setTimeout(restoreAndFinish, 0);\n  /* [DISABLE-SYNC/]\n  }\n  [DISABLE-SYNC/] */\n  traceLog.push(`_id:${props._id}`, '</finishHiding>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @param {boolean} [force] - Skip effect.\n * @returns {void}\n */\nfunction show(props, force) {\n  traceLog.push('<show>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  traceLog.push(`force:${!!force}`); // [DEBUG/]\n\n  function getScroll(elements, fromDoc) {\n\n    function elementCanScroll(element, isDoc) {\n      const cmpStyle = props.window.getComputedStyle(element, ''),\n        tagName = element.nodeName.toLowerCase();\n      return (cmpStyle.overflow === 'scroll' || cmpStyle.overflow === 'auto' ||\n          cmpStyle.overflowX === 'scroll' || cmpStyle.overflowX === 'auto' ||\n          cmpStyle.overflowY === 'scroll' || cmpStyle.overflowY === 'auto') ||\n        // document with `visible` might make scrollbars.\n        isDoc && (cmpStyle.overflow === 'visible' ||\n          cmpStyle.overflowX === 'visible' || cmpStyle.overflowY === 'visible') ||\n        // `overflow` of these differs depending on browser.\n        !isDoc && (tagName === 'textarea' || tagName === 'select');\n    }\n\n    const elementsScroll = [];\n    elements.forEach((element, i) => {\n      const isDoc = fromDoc && i === 0;\n      if (elementCanScroll(element, isDoc)) {\n        elementsScroll.push({\n          element: element,\n          isDoc: isDoc,\n          left: scrollLeft(element, isDoc, props.window),\n          top: scrollTop(element, isDoc, props.window)\n        });\n      }\n    });\n    return elementsScroll;\n  }\n\n  function disableAccKeys(elements, fromDoc) {\n    const savedElementsAccKeys = [];\n    elements.forEach((element, i) => {\n      if (fromDoc && i === 0) { return; }\n\n      const elementAccKeys = {},\n        tabIndex = element.tabIndex;\n      // In Trident and Edge, `tabIndex` of all elements are `0` or something even if the element is not focusable.\n      if (tabIndex !== -1) {\n        elementAccKeys.element = element;\n        elementAccKeys.tabIndex = element.hasAttribute('tabindex') ? tabIndex : false;\n        element.tabIndex = -1;\n      }\n\n      const accessKey = element.accessKey;\n      if (accessKey) {\n        elementAccKeys.element = element;\n        elementAccKeys.accessKey = accessKey;\n        element.accessKey = '';\n      }\n\n      if (elementAccKeys.element) {\n        savedElementsAccKeys.push(elementAccKeys);\n      }\n    });\n    return savedElementsAccKeys;\n  }\n\n  if (props.state === STATE_SHOWN ||\n      props.state === STATE_SHOWING && !force ||\n      props.state !== STATE_SHOWING &&\n        props.options.onBeforeShow && props.options.onBeforeShow.call(props.ins) === false) {\n    traceLog.push('CANCEL', '</show>'); // [DEBUG/]\n    return;\n  }\n\n  if (props.state === STATE_HIDDEN) {\n    const elmOverlay = props.elmOverlay,\n      elmOverlayClassList = mClassList(elmOverlay);\n    props.document.body.appendChild(elmOverlay); // Move to last (for same z-index)\n    const targetElements = getTargetElements(props);\n    window.targetElements = targetElements; // [DEBUG/]\n\n    elmOverlayClassList.remove(STYLE_CLASS_HIDE); // Before `getBoundingClientRect` (`position`).\n    if (!props.isDoc) {\n      const elmTargetBody = props.elmTargetBody;\n      if (props.window.getComputedStyle(elmTargetBody, '').display === 'inline') {\n        setStyle(elmTargetBody, {display: 'inline-block'}, props.savedStyleTargetBody);\n      }\n      position(props, getBBox(elmTargetBody, props.window));\n    }\n\n    props.savedElementsScroll = getScroll(targetElements, props.isDoc);\n    props.disabledDocBars = false;\n    // savedElementsScroll is empty when document is disconnected.\n    if (props.isDoc && props.savedElementsScroll.length && props.savedElementsScroll[0].isDoc) {\n      props.disabledDocBars = disableDocBars(props);\n    }\n    props.savedElementsAccKeys = disableAccKeys(targetElements, props.isDoc);\n    props.activeElement = props.document.activeElement;\n    if (props.activeElement) { avoidFocus(props, props.activeElement); }\n    avoidSelect(props);\n    elmOverlay.offsetWidth; /* force reflow */ // eslint-disable-line no-unused-expressions\n\n    if (props.options.onPosition) { props.options.onPosition.call(props.ins); }\n  }\n\n  props.transition.on(force);\n  props.state = STATE_SHOWING;\n  traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  if (force) {\n    finishShowing(props);\n  }\n  traceLog.push(`_id:${props._id}`, '</show>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @param {boolean} [force] - Skip effect.\n * @returns {void}\n */\nfunction hide(props, force\n    /* [DISABLE-SYNC/]\n    , sync\n    [DISABLE-SYNC/] */\n    ) {\n  // sync-mode (both `force` and `sync` are `true`)\n  traceLog.push('<hide>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  traceLog.push(`force:${!!force}`); // [DEBUG/]\n  /* [DISABLE-SYNC/]\n  traceLog.push(`sync:${!!sync}`); // [DEBUG/]\n  [DISABLE-SYNC/] */\n  if (props.state === STATE_HIDDEN ||\n      props.state === STATE_HIDING && !force ||\n      props.state !== STATE_HIDING &&\n        props.options.onBeforeHide && props.options.onBeforeHide.call(props.ins) === false) {\n    traceLog.push('CANCEL', '</hide>'); // [DEBUG/]\n    return;\n  }\n\n  // blur\n  if (props.filterElements) {\n    props.filterElements.forEach(\n      filterElement => { restoreStyle(filterElement.element, filterElement.savedStyle); });\n    props.filterElements = null;\n  }\n\n  // In Gecko, hidden element can be activeElement.\n  const element = props.document.activeElement;\n  if (element && element !== element.ownerDocument.body &&\n      props.elmOverlay.compareDocumentPosition(element) & Node.DOCUMENT_POSITION_CONTAINED_BY) {\n    if (element.blur) { // Trident and Edge don't support SVG#blur\n      element.blur();\n    } else {\n      element.ownerDocument.body.focus();\n    }\n  }\n\n  props.transition.off(force);\n  props.state = STATE_HIDING;\n  traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  if (force) {\n    finishHiding(props\n      /* [DISABLE-SYNC/]\n      , sync\n      [DISABLE-SYNC/] */\n      );\n  }\n  traceLog.push(`_id:${props._id}`, '</hide>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @param {Object} newOptions - New options.\n * @returns {void}\n */\nfunction setOptions(props, newOptions) {\n  const options = props.options;\n\n  // face\n  if (newOptions.hasOwnProperty('face') &&\n      (newOptions.face == null ? void 0 : newOptions.face) !== options.face) {\n    const elmOverlayBody = props.elmOverlayBody;\n    // Clear\n    while (elmOverlayBody.firstChild) { elmOverlayBody.removeChild(elmOverlayBody.firstChild); }\n    if (newOptions.face === false) { // No face\n      options.face = false;\n    } else if (newOptions.face && newOptions.face.nodeType === Node.ELEMENT_NODE) { // Specific face\n      options.face = newOptions.face;\n      elmOverlayBody.appendChild(newOptions.face);\n    } else if (newOptions.face == null) { // Builtin face\n      options.face = void 0;\n    }\n  }\n\n  // duration\n  if (isFinite(newOptions.duration) && newOptions.duration !== options.duration) {\n    options.duration = newOptions.duration;\n    props.elmOverlay.style[CSSPrefix.getName('transitionDuration')] =\n      newOptions.duration === DURATION ? '' : `${newOptions.duration}ms`;\n    props.transition.duration = `${newOptions.duration}ms`;\n  }\n\n  // blur\n  if (isFinite(newOptions.blur) || newOptions.blur === false) {\n    options.blur = newOptions.blur;\n  }\n\n  // style\n  if (isObject(newOptions.style)) {\n    setStyle(props.elmOverlay, newOptions.style);\n  }\n\n  // Event listeners\n  ['onShow', 'onHide', 'onBeforeShow', 'onBeforeHide', 'onPosition'].forEach(option => {\n    if (typeof newOptions[option] === 'function') {\n      options[option] = newOptions[option];\n    } else if (newOptions.hasOwnProperty(option) && newOptions[option] == null) {\n      options[option] = void 0;\n    }\n  });\n}\n\nfunction scroll(props, target, dirLeft, value) {\n  let isDoc, curValue;\n\n  if (target) {\n    const targetElements = getTargetElements(props);\n    if (targetElements.indexOf(target) === -1) { return curValue; } // return undefined\n    isDoc = target.nodeName.toLowerCase() === 'html';\n  } else {\n    target = props.elmTarget;\n    isDoc = props.isDoc;\n  }\n\n  const elementScroll = value != null && props.savedElementsScroll &&\n    (props.savedElementsScroll.find ?\n      props.savedElementsScroll.find(elementScroll => elementScroll.element === target) :\n      (elementsScroll => {\n        let found;\n        elementsScroll.some(elementScroll => {\n          if (elementScroll.element === target) {\n            found = elementScroll;\n            return true;\n          }\n          return false;\n        });\n        return found;\n      })(props.savedElementsScroll));\n\n  curValue = (dirLeft ? scrollLeft : scrollTop)(target, isDoc, props.window, value);\n  if (elementScroll) { elementScroll[dirLeft ? 'left' : 'top'] = curValue; }\n  return curValue;\n}\n\nclass PlainOverlay {\n  /**\n   * Create a `PlainOverlay` instance.\n   * @param {Element} [target] - Target element.\n   * @param {Object} [options] - Options.\n   */\n  constructor(target, options) {\n\n    /**\n     * @param {Object} [target] - Element or something that is checked.\n     * @returns {(Element|null)} Valid element or null.\n     */\n    function getTarget(target) {\n      let validElement;\n      if (!target) {\n        validElement = document.documentElement; // documentElement of current document\n      } else if (target.nodeType) {\n        if (target.nodeType === Node.DOCUMENT_NODE) {\n          validElement = target.documentElement; // documentElement of target document\n        } else if (target.nodeType === Node.ELEMENT_NODE) {\n          const nodeName = target.nodeName.toLowerCase();\n          validElement =\n            nodeName === 'body' ? target.ownerDocument.documentElement : // documentElement of target body\n            nodeName === 'iframe' || nodeName === 'frame' ?\n              target.contentDocument.documentElement : // documentElement of target frame\n            target;\n        }\n        if (!validElement) { throw new Error('This element is not accepted.'); }\n      } else if (target === target.window) {\n        validElement = target.document.documentElement; // documentElement of target window\n      }\n      return validElement;\n    }\n\n    const props = {\n      ins: this,\n      options: { // Initial options (not default)\n        face: false, // Initial state.\n        duration: DURATION, // Initial state.\n        blur: false // Initial state.\n      },\n      state: STATE_HIDDEN,\n      savedStyleTarget: {},\n      savedStyleTargetBody: {}\n    };\n\n    Object.defineProperty(this, '_id', {value: ++insId});\n    props._id = this._id;\n    insProps[this._id] = props;\n\n    if (arguments.length === 1) {\n      if (!(props.elmTarget = getTarget(target))) {\n        if (!isObject(target)) { throw new Error('Invalid argument.'); }\n        props.elmTarget = document.documentElement; // documentElement of current document\n        options = target;\n      }\n    } else if (!(props.elmTarget = getTarget(target))) {\n      throw new Error('This target is not accepted.');\n    }\n    if (!options) {\n      options = {};\n    } else if (!isObject(options)) {\n      throw new Error('Invalid options.');\n    }\n\n    props.isDoc = props.elmTarget.nodeName.toLowerCase() === 'html';\n    const elmDocument = props.document = props.elmTarget.ownerDocument;\n    props.window = elmDocument.defaultView;\n    const elmTargetBody = props.elmTargetBody = props.isDoc ? elmDocument.body : props.elmTarget;\n\n    // Setup window\n    if (!elmDocument.getElementById(STYLE_ELEMENT_ID)) {\n      const head = elmDocument.getElementsByTagName('head')[0] || elmDocument.documentElement,\n        sheet = head.insertBefore(elmDocument.createElement('style'), head.firstChild);\n      sheet.type = 'text/css';\n      sheet.id = STYLE_ELEMENT_ID;\n      sheet.textContent = CSS_TEXT;\n      if (IS_TRIDENT || IS_EDGE) { forceReflow(sheet); } // Trident bug\n    }\n\n    // elmOverlay\n    const elmOverlay = props.elmOverlay = elmDocument.createElement('div'),\n      elmOverlayClassList = mClassList(elmOverlay);\n    elmOverlayClassList.add(STYLE_CLASS, STYLE_CLASS_HIDE);\n    if (props.isDoc) { elmOverlayClassList.add(STYLE_CLASS_DOC); }\n\n    // TimedTransition\n    props.transition = new TimedTransition(elmOverlay, {\n      procToOn: force => {\n        const elmOverlayClassList = mClassList(elmOverlay);\n        elmOverlayClassList.toggle(STYLE_CLASS_FORCE, !!force);\n        elmOverlayClassList.add(STYLE_CLASS_SHOW);\n      },\n      procToOff: force => {\n        const elmOverlayClassList = mClassList(elmOverlay);\n        elmOverlayClassList.toggle(STYLE_CLASS_FORCE, !!force);\n        elmOverlayClassList.remove(STYLE_CLASS_SHOW);\n      },\n      // for setting before element online\n      property: 'opacity',\n      duration: `${DURATION}ms`\n    });\n    elmOverlay.addEventListener('timedTransitionEnd', event => {\n      if (event.target === elmOverlay && event.propertyName === 'opacity') {\n        if (props.state === STATE_SHOWING) {\n          finishShowing(props);\n        } else if (props.state === STATE_HIDING) {\n          finishHiding(props);\n        }\n      }\n    }, true);\n\n    (props.isDoc ? props.window : elmTargetBody).addEventListener('scroll', event => {\n      // [DEBUG]\n      traceLog.push('<scroll-event>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n      traceLog.push(\n        `target:${event.target === document ? 'document' : event.target.tagName || 'UNKNOWN'}` +\n        `${event.target.id ? `#${event.target.id}` : ''}`);\n      // [/DEBUG]\n      const target = event.target;\n      if (props.state !== STATE_HIDDEN &&\n          restoreScroll(props,\n            props.isDoc &&\n                (target === props.window || target === props.document || target === props.elmTargetBody) ?\n              props.elmTarget : target)) {\n        traceLog.push('AVOIDED'); // [DEBUG/]\n        event.preventDefault();\n        event.stopImmediatePropagation();\n      }\n      traceLog.push(`_id:${props._id}`, '</scroll-event>'); // [DEBUG/]\n    }, true);\n\n    // props.state can't control the listener\n    // because the event is fired after flow function exited in some browsers (e.g. Trident).\n    props.focusListener = event => {\n      // [DEBUG]\n      traceLog.push('<focusListener>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n      traceLog.push(\n        `target:${event.target === document ? 'document' : event.target.tagName || 'UNKNOWN'}` +\n        `${event.target.id ? `#${event.target.id}` : ''}`);\n      // [/DEBUG]\n      if (props.state !== STATE_HIDDEN && avoidFocus(props, event.target)) {\n        traceLog.push('AVOIDED'); // [DEBUG/]\n        event.preventDefault();\n        event.stopImmediatePropagation();\n      }\n      traceLog.push(`_id:${props._id}`, '</focusListener>'); // [DEBUG/]\n    };\n    elmTargetBody.addEventListener('focus', props.focusListener, true);\n\n    (listener => { // simulation \"text-select\" event\n      ['keyup', 'mouseup'].forEach(type => {\n        // To listen to keydown in the target and keyup in outside, it is window, not `elmTargetBody`.\n        props.window.addEventListener(type, listener, true);\n      });\n    })(event => {\n      traceLog.push('<text-select-event>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n      if (props.state !== STATE_HIDDEN && avoidSelect(props)) {\n        traceLog.push('AVOIDED'); // [DEBUG/]\n        event.preventDefault();\n        event.stopImmediatePropagation();\n      }\n      traceLog.push(`_id:${props._id}`, '</text-select-event>'); // [DEBUG/]\n    });\n\n    // Gecko bug, multiple calling (parallel) by `requestAnimationFrame`.\n    props.resizing = false;\n    props.window.addEventListener('resize', AnimEvent.add(() => {\n      if (props.resizing) {\n        console.warn('`resize` event listener is already running.'); // [DEBUG/]\n        return;\n      }\n      props.resizing = true;\n      if (props.state !== STATE_HIDDEN) {\n        if (props.isDoc) {\n          if (props.savedElementsScroll.length && props.savedElementsScroll[0].isDoc) {\n            if (props.disabledDocBars) { // Restore DocBars\n              console.log('Restore DocBars'); // [DEBUG/]\n              restoreStyle(props.elmTarget, props.savedStyleTarget, ['overflow']);\n              restoreStyle(elmTargetBody, props.savedStyleTargetBody,\n                ['marginLeft', 'marginRight', 'marginTop', 'marginBottom', 'width', 'height']);\n            }\n            console.log('disableDocBars'); // [DEBUG/]\n            props.disabledDocBars = disableDocBars(props);\n          }\n        } else {\n          const bBox = getBBox(elmTargetBody, props.window),\n            lastBBox = props.targetBodyBBox;\n          if (bBox.left !== lastBBox.left || bBox.top !== lastBBox.top ||\n              bBox.width !== lastBBox.width || bBox.height !== lastBBox.height) {\n            console.log('Update position'); // [DEBUG/]\n            position(props, bBox);\n          }\n        }\n        if (props.options.onPosition) { props.options.onPosition.call(props.ins); }\n      }\n      props.resizing = false;\n    }), true);\n\n    // Avoid scroll on touch device\n    elmOverlay.addEventListener('touchmove', event => {\n      if (props.state !== STATE_HIDDEN) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n      }\n    }, true);\n\n    // elmOverlayBody\n    (props.elmOverlayBody = elmOverlay.appendChild(elmDocument.createElement('div')))\n      .className = STYLE_CLASS_BODY;\n\n    elmDocument.body.appendChild(elmOverlay);\n\n    // Default options\n    if (!options.hasOwnProperty('face')) { options.face = null; }\n\n    setOptions(props, options);\n  }\n\n  /**\n   * @param {Object} options - New options.\n   * @returns {PlainOverlay} Current instance itself.\n   */\n  setOptions(options) {\n    if (isObject(options)) {\n      setOptions(insProps[this._id], options);\n    }\n    return this;\n  }\n\n  /**\n   * Show the overlay.\n   * @param {boolean} [force] - Show it immediately without effect.\n   * @param {Object} [options] - New options.\n   * @returns {PlainOverlay} Current instance itself.\n   */\n  show(force, options) {\n    if (arguments.length < 2 && typeof force !== 'boolean') {\n      options = force;\n      force = false;\n    }\n\n    this.setOptions(options);\n    show(insProps[this._id], force);\n    return this;\n  }\n\n  /**\n   * Hide the overlay.\n   * @param {boolean} [force] - Hide it immediately without effect.\n   * @returns {PlainOverlay} Current instance itself.\n   */\n  hide(force\n      /* [DISABLE-SYNC/]\n      , sync\n      [DISABLE-SYNC/] */\n      ) {\n    // sync-mode (both `force` and `sync` are `true`)\n    hide(insProps[this._id], force\n      /* [DISABLE-SYNC/]\n      , sync\n      [DISABLE-SYNC/] */\n      );\n    return this;\n  }\n\n  scrollLeft(value, target) {\n    return scroll(insProps[this._id], target, true, value);\n  }\n\n  scrollTop(value, target) {\n    return scroll(insProps[this._id], target, false, value);\n  }\n\n  position() {\n    const props = insProps[this._id];\n    if (props.state !== STATE_HIDDEN) {\n      if (!props.isDoc) { position(props, getBBox(props.elmTargetBody, props.window)); }\n      if (props.options.onPosition) { props.options.onPosition.call(props.ins); }\n    }\n    return this;\n  }\n\n  get state() {\n    return insProps[this._id].state;\n  }\n\n  get style() {\n    return insProps[this._id].elmOverlay.style;\n  }\n\n  get face() { return insProps[this._id].options.face; }\n  set face(value) { setOptions(insProps[this._id], {face: value}); }\n\n  get duration() { return insProps[this._id].options.duration; }\n  set duration(value) { setOptions(insProps[this._id], {duration: value}); }\n\n  get blur() { return insProps[this._id].options.blur; }\n  set blur(value) { setOptions(insProps[this._id], {blur: value}); }\n\n  get onShow() { return insProps[this._id].options.onShow; }\n  set onShow(value) { setOptions(insProps[this._id], {onShow: value}); }\n\n  get onHide() { return insProps[this._id].options.onHide; }\n  set onHide(value) { setOptions(insProps[this._id], {onHide: value}); }\n\n  get onBeforeShow() { return insProps[this._id].options.onBeforeShow; }\n  set onBeforeShow(value) { setOptions(insProps[this._id], {onBeforeShow: value}); }\n\n  get onBeforeHide() { return insProps[this._id].options.onBeforeHide; }\n  set onBeforeHide(value) { setOptions(insProps[this._id], {onBeforeHide: value}); }\n\n  get onPosition() { return insProps[this._id].options.onPosition; }\n  set onPosition(value) { setOptions(insProps[this._id], {onPosition: value}); }\n\n  static show(target, options) {\n    return (new PlainOverlay(target, options)).show();\n  }\n\n  static get STATE_HIDDEN() { return STATE_HIDDEN; }\n  static get STATE_SHOWING() { return STATE_SHOWING; }\n  static get STATE_SHOWN() { return STATE_SHOWN; }\n  static get STATE_HIDING() { return STATE_HIDING; }\n}\n\nPlainOverlay.limit = true;\n\n// [DEBUG]\nPlainOverlay.insProps = insProps;\nPlainOverlay.traceLog = traceLog;\nPlainOverlay.STATE_TEXT = STATE_TEXT;\nPlainOverlay.IS_TRIDENT = IS_TRIDENT;\nPlainOverlay.IS_EDGE = IS_EDGE;\nPlainOverlay.IS_WEBKIT = IS_WEBKIT;\nPlainOverlay.IS_BLINK = IS_BLINK;\nPlainOverlay.IS_GECKO = IS_GECKO;\n// [/DEBUG]\n\nexport default PlainOverlay;\n\n\n\n// WEBPACK FOOTER //\n// ./src/plain-overlay.js","/*\n * AnimEvent\n * https://github.com/anseki/anim-event\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\nconst\n  MSPF = 1000 / 60, // ms/frame (FPS: 60)\n  KEEP_LOOP = 500,\n\n  /**\n   * @typedef {Object} task\n   * @property {Event} event\n   * @property {function} listener\n   */\n\n  /** @type {task[]} */\n  tasks = [];\n\nlet\n  requestAnim = window.requestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    (callback => setTimeout(callback, MSPF)),\n  cancelAnim = window.cancelAnimationFrame ||\n    window.mozCancelAnimationFrame ||\n    window.webkitCancelAnimationFrame ||\n    window.msCancelAnimationFrame ||\n    (requestID => clearTimeout(requestID)),\n\n  requestID, lastFrameTime = Date.now();\n\n// [DEBUG]\nconst requestAnimSave = requestAnim, cancelAnimSave = cancelAnim;\nwindow.AnimEventByTimer = byTimer => {\n  if (byTimer) {\n    requestAnim = callback => setTimeout(callback, MSPF);\n    cancelAnim = requestID => clearTimeout(requestID);\n  } else {\n    requestAnim = requestAnimSave;\n    cancelAnim = cancelAnimSave;\n  }\n};\n// [/DEBUG]\n\nfunction step() {\n  let called, next;\n\n  if (requestID) {\n    cancelAnim.call(window, requestID);\n    requestID = null;\n  }\n\n  tasks.forEach(task => {\n    if (task.event) {\n      task.listener(task.event);\n      task.event = null;\n      called = true;\n    }\n  });\n\n  if (called) {\n    lastFrameTime = Date.now();\n    next = true;\n  } else if (Date.now() - lastFrameTime < KEEP_LOOP) { // Go on for a while\n    next = true;\n  }\n  if (next) { requestID = requestAnim.call(window, step); }\n}\n\nfunction indexOfTasks(listener) {\n  let index = -1;\n  tasks.some((task, i) => {\n    if (task.listener === listener) {\n      index = i;\n      return true;\n    }\n    return false;\n  });\n  return index;\n}\n\nconst AnimEvent = {\n  /**\n   * @param {function} listener - An event listener.\n   * @returns {(function|null)} A wrapped event listener.\n   */\n  add: function(listener) {\n    let task;\n    if (indexOfTasks(listener) === -1) {\n      tasks.push((task = {listener: listener}));\n      return event => {\n        task.event = event;\n        if (!requestID) { step(); }\n      };\n    } else {\n      return null;\n    }\n  },\n\n  remove: function(listener) {\n    let iRemove;\n    if ((iRemove = indexOfTasks(listener)) > -1) {\n      tasks.splice(iRemove, 1);\n      if (!tasks.length && requestID) {\n        cancelAnim.call(window, requestID);\n        requestID = null;\n      }\n    }\n  }\n};\n\nexport default AnimEvent;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/anim-event/src/anim-event.js","/*\n * mClassList\n * https://github.com/anseki/m-class-list\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\nlet hookApply; // [DEBUG/]\n\nfunction normalize(token) { return (token + '').trim(); } // Not `||`\nfunction applyList(list, element) {\n  if (hookApply) { hookApply(list, element); } // [DEBUG/]\n  element.setAttribute('class', list.join(' '));\n}\n\nfunction add(list, element, tokens) {\n  if (tokens.filter(token => {\n    if (!(token = normalize(token)) || list.indexOf(token) !== -1) { return false; }\n    list.push(token);\n    return true;\n  }).length) {\n    applyList(list, element);\n  }\n}\n\nfunction remove(list, element, tokens) {\n  if (tokens.filter(token => {\n    let i;\n    if (!(token = normalize(token)) || (i = list.indexOf(token)) === -1) { return false; }\n    list.splice(i, 1);\n    return true;\n  }).length) {\n    applyList(list, element);\n  }\n}\n\nfunction toggle(list, element, token, force) {\n  const i = list.indexOf((token = normalize(token)));\n  if (i !== -1) {\n    if (force) { return true; }\n    list.splice(i, 1);\n    applyList(list, element);\n    return false;\n  } else {\n    if (force === false) { return false; }\n    list.push(token);\n    applyList(list, element);\n    return true;\n  }\n}\n\nfunction replace(list, element, token, newToken) {\n  let i;\n  if (!(token = normalize(token)) || !(newToken = normalize(newToken)) ||\n    token === newToken || (i = list.indexOf(token)) === -1) { return; }\n  list.splice(i, 1);\n  if (list.indexOf(newToken) === -1) { list.push(newToken); }\n  applyList(list, element);\n}\n\nfunction mClassList(element) {\n  return !mClassList.ignoreNative && element.classList || (() => {\n    const list = (element.getAttribute('class') || '').trim().split(/\\s+/).filter(token => !!token),\n      ins = {\n        length: list.length,\n        item: i => list[i],\n        contains: token => list.indexOf(normalize(token)) !== -1,\n        add: function() {\n          add(list, element, Array.prototype.slice.call(arguments));\n          return mClassList.methodChain ? ins : void 0;\n        },\n        remove: function() {\n          remove(list, element, Array.prototype.slice.call(arguments));\n          return mClassList.methodChain ? ins : void 0;\n        },\n        toggle: (token, force) => toggle(list, element, token, force),\n        replace: (token, newToken) => {\n          replace(list, element, token, newToken);\n          return mClassList.methodChain ? ins : void 0;\n        }\n      };\n    return ins;\n  })();\n}\n\nmClassList.methodChain = true;\n\nmClassList.hookApply = (fnc) => { hookApply = typeof fnc === 'function' ? fnc : null; }; // [DEBUG/]\n\nexport default mClassList;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/m-class-list/src/m-class-list.js","/*\n * TimedTransition\n * https://github.com/anseki/timed-transition\n *\n * Copyright (c) 2017 anseki\n * Licensed under the MIT license.\n */\n\nimport CSSPrefix from 'cssprefix';\n\nconst\n  STATE_STOPPED = 0, STATE_DELAYING = 1, STATE_PLAYING = 2,\n\n  PREFIX = 'timed',\n  EVENT_TYPE_RUN = `${PREFIX}TransitionRun`,\n  EVENT_TYPE_START = `${PREFIX}TransitionStart`,\n  EVENT_TYPE_END = `${PREFIX}TransitionEnd`,\n  EVENT_TYPE_CANCEL = `${PREFIX}TransitionCancel`,\n\n  IS_EDGE = '-ms-scroll-limit' in document.documentElement.style &&\n    '-ms-ime-align' in document.documentElement.style && !window.navigator.msPointerEnabled,\n\n  isObject = (() => {\n    const toString = {}.toString, fnToString = {}.hasOwnProperty.toString,\n      objFnString = fnToString.call(Object);\n    return obj => {\n      let proto, constr;\n      return obj && toString.call(obj) === '[object Object]' &&\n        (!(proto = Object.getPrototypeOf(obj)) ||\n          (constr = proto.hasOwnProperty('constructor') && proto.constructor) &&\n          typeof constr === 'function' && fnToString.call(constr) === objFnString);\n    };\n  })(),\n  isFinite = Number.isFinite || (value => typeof value === 'number' && window.isFinite(value)),\n\n  /**\n   * An object that has properties of instance.\n   * @typedef {Object} props\n   * @property {Object} options - Options.\n   * @property {Element} element - Target element.\n   * @property {Window} window - Window that conatins target element.\n   * @property {number} duration - Milliseconds from `transition-duration`.\n   * @property {number} delay - Milliseconds from `transition-delay`.\n   * @property {number} state - Current state.\n   * @property {boolean} isOn - `on` was called and `off` is not called yet. It is changed by only on/off.\n   * @property {number} runTime - 0, or Date.now() when EVENT_TYPE_RUN.\n   * @property {number} startTime - 0, or Date.now() when EVENT_TYPE_START. It might not be runTime + delay.\n   * @property {number} currentPosition - A time elapsed from initial state, in milliseconds.\n   * @property {boolean} isReversing - The current playing is reversing when STATE_PLAYING.\n   * @property {number} timer - Timer ID.\n   */\n\n  /** @type {Object.<_id: number, props>} */\n  insProps = {};\n\nlet insId = 0;\n\n// [DEBUG]\nconst traceLog = [];\nconst STATE_TEXT = {};\nSTATE_TEXT[STATE_STOPPED] = 'STATE_STOPPED';\nSTATE_TEXT[STATE_DELAYING] = 'STATE_DELAYING';\nSTATE_TEXT[STATE_PLAYING] = 'STATE_PLAYING';\nfunction roundTime(timeValue) { return Math.round(timeValue / 200) * 200; } // for traceLog\n// [/DEBUG]\n\n/**\n * @param {props} props - `props` of instance.\n * @param {string} type - One of EVENT_TYPE_*.\n * @returns {void}\n */\nfunction fireEvent(props, type) {\n  // [DEBUG]\n  traceLog.push('<fireEvent>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n  traceLog.push(`isOn:${props.isOn}`,\n    `runTime:${roundTime(props.runTime)}`, `startTime:${roundTime(props.startTime)}`,\n    `currentPosition:${roundTime(props.currentPosition)}`);\n  traceLog.push(`type:${type}`);\n  // [/DEBUG]\n  const initTime = Math.min(Math.max(-props.delay, 0), props.duration),\n    elapsedTime = (initTime +\n      // The value for transitionend might NOT be transition-duration. (csswg.org may be wrong)\n      ((type === EVENT_TYPE_END || type === EVENT_TYPE_CANCEL) && props.startTime ?\n        Date.now() - props.startTime : 0)\n    ) / 1000;\n\n  let event;\n  try {\n    event = new props.window.TransitionEvent(type, {\n      propertyName: props.options.property,\n      pseudoElement: props.options.pseudoElement,\n      elapsedTime: elapsedTime,\n      bubbles: true,\n      cancelable: false\n    });\n    // Edge bug, can't set pseudoElement\n    if (IS_EDGE) { event.pseudoElement = props.options.pseudoElement; }\n  } catch (error) {\n    event = props.window.document.createEvent('TransitionEvent');\n    event.initTransitionEvent(type, true, false, props.options.property, elapsedTime);\n    event.pseudoElement = props.options.pseudoElement;\n  }\n  event.timedTransition = props.ins;\n  props.element.dispatchEvent(event);\n  traceLog.push('</fireEvent>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @returns {void}\n */\nfunction fixCurrentPosition(props) {\n  // [DEBUG]\n  traceLog.push('<fixCurrentPosition>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n  traceLog.push(`currentPosition:${roundTime(props.currentPosition)}`);\n  // [/DEBUG]\n  if (props.state !== STATE_PLAYING) {\n    traceLog.push('CANCEL', '</fixCurrentPosition>'); // [DEBUG/]\n    return;\n  }\n  const playingTime = Date.now() - props.startTime;\n  props.currentPosition = props.isOn ?\n    Math.min(props.currentPosition + playingTime, props.duration) :\n    Math.max(props.currentPosition - playingTime, 0);\n  traceLog.push(`currentPosition:${roundTime(props.currentPosition)}`); // [DEBUG/]\n  traceLog.push('</fixCurrentPosition>'); // [DEBUG/]\n}\n\n/**\n * Finish the \"on/off\" immediately by isOn.\n * @param {props} props - `props` of instance.\n * @returns {void}\n */\nfunction finishAll(props) {\n  traceLog.push('<finishAll/>', `_id:${props._id}`, `isOn:${props.isOn}`); // [DEBUG/]\n  props.state = STATE_STOPPED;\n  traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  props.runTime = 0;\n  props.startTime = 0;\n  props.currentPosition = props.isOn ? props.duration : 0;\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @returns {void}\n */\nfunction finishPlaying(props) {\n  // [DEBUG]\n  traceLog.push('<finishPlaying>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n  traceLog.push(`isOn:${props.isOn}`,\n    `runTime:${roundTime(props.runTime)}`, `startTime:${roundTime(props.startTime)}`,\n    `currentPosition:${roundTime(props.currentPosition)}`);\n  // [/DEBUG]\n  if (props.state !== STATE_PLAYING) {\n    traceLog.push('CANCEL', '</finishPlaying>'); // [DEBUG/]\n    return;\n  }\n\n  props.state = STATE_STOPPED;\n  traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  fireEvent(props, EVENT_TYPE_END);\n\n  finishAll(props);\n  traceLog.push('</finishPlaying>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @returns {void}\n */\nfunction finishDelaying(props) {\n  // [DEBUG]\n  traceLog.push('<finishDelaying>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n  traceLog.push(`isOn:${props.isOn}`,\n    `runTime:${roundTime(props.runTime)}`, `startTime:${roundTime(props.startTime)}`,\n    `currentPosition:${roundTime(props.currentPosition)}`);\n  // [/DEBUG]\n  if (props.state !== STATE_DELAYING) {\n    traceLog.push('CANCEL', '</finishDelaying>'); // [DEBUG/]\n    return;\n  }\n\n  props.state = STATE_PLAYING;\n  traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  props.startTime = Date.now();\n  props.isReversing = !props.isOn;\n  fireEvent(props, EVENT_TYPE_START);\n\n  const durationLeft = props.isOn ? props.duration - props.currentPosition : props.currentPosition;\n  traceLog.push(`durationLeft:${roundTime(durationLeft)}`); // [DEBUG/]\n  if (durationLeft > 0) {\n    props.timer = setTimeout(() => { finishPlaying(props); }, durationLeft);\n  } else {\n    finishPlaying(props);\n  }\n  traceLog.push('</finishDelaying>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @returns {void}\n */\nfunction abort(props) {\n  traceLog.push('<abort>', `_id:${props._id}`, `isOn:${props.isOn}`); // [DEBUG/]\n  clearTimeout(props.timer);\n  if (props.state === STATE_STOPPED) {\n    traceLog.push('CANCEL', '</abort>'); // [DEBUG/]\n    return;\n  }\n\n  props.state = STATE_STOPPED;\n  traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n  fireEvent(props, EVENT_TYPE_CANCEL);\n  traceLog.push('</abort>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @param {boolean} [force] - Skip transition.\n * @returns {void}\n */\nfunction on(props, force) {\n  // [DEBUG]\n  traceLog.push('<on>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n  traceLog.push(`force:${!!force}`);\n  traceLog.push(`isOn:${props.isOn}`,\n    `runTime:${roundTime(props.runTime)}`, `startTime:${roundTime(props.startTime)}`,\n    `currentPosition:${roundTime(props.currentPosition)}`);\n  // [/DEBUG]\n  if (props.isOn && props.state === STATE_STOPPED ||\n      props.isOn && props.state !== STATE_STOPPED && !force) {\n    traceLog.push('CANCEL', '</on>'); // [DEBUG/]\n    return;\n  }\n  /*\n    Cases:\n      - Done `off` or playing to `off`, regardless of `force`\n      - Playing to `on` and `force`\n  */\n\n  if (props.options.procToOn) { props.options.procToOn.call(props.ins, !!force); }\n\n  if (force || !props.isOn && props.state === STATE_DELAYING ||\n      -props.delay > props.duration) { // The delay must have not changed before turning over.\n    // [DEBUG]\n    traceLog.push(`STOP(${\n      force ? 'force' :\n      !props.isOn && props.state === STATE_DELAYING ? 'DELAYING' :\n      'over-duration'})`);\n    // [/DEBUG]\n    abort(props);\n    props.isOn = true;\n    finishAll(props);\n\n  } else {\n    fixCurrentPosition(props);\n    abort(props);\n\n    props.state = STATE_DELAYING;\n    traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n    props.isOn = true;\n    props.runTime = Date.now();\n    props.startTime = 0;\n    fireEvent(props, EVENT_TYPE_RUN);\n\n    if (props.delay > 0) {\n      props.timer = setTimeout(() => { finishDelaying(props); }, props.delay);\n    } else {\n      if (props.delay < 0) { // Move the position to the right.\n        props.currentPosition = Math.min(props.currentPosition - props.delay, props.duration);\n      }\n      finishDelaying(props);\n    }\n  }\n  traceLog.push('</on>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @param {boolean} [force] - Skip transition.\n * @returns {void}\n */\nfunction off(props, force) {\n  // [DEBUG]\n  traceLog.push('<off>', `_id:${props._id}`, `state:${STATE_TEXT[props.state]}`);\n  traceLog.push(`force:${!!force}`);\n  traceLog.push(`isOn:${props.isOn}`,\n    `runTime:${roundTime(props.runTime)}`, `startTime:${roundTime(props.startTime)}`,\n    `currentPosition:${roundTime(props.currentPosition)}`);\n  // [/DEBUG]\n  if (!props.isOn && props.state === STATE_STOPPED ||\n      !props.isOn && props.state !== STATE_STOPPED && !force) {\n    traceLog.push('CANCEL', '</off>'); // [DEBUG/]\n    return;\n  }\n  /*\n    Cases:\n      - Done `on` or playing to `on`, regardless of `force`\n      - Playing to `off` and `force`\n  */\n\n  if (props.options.procToOff) { props.options.procToOff.call(props.ins, !!force); }\n\n  if (force || props.isOn && props.state === STATE_DELAYING ||\n      -props.delay > props.duration) { // The delay must have not changed before turning over.\n    // [DEBUG]\n    traceLog.push(`STOP(${\n      force ? 'force' :\n      props.isOn && props.state === STATE_DELAYING ? 'DELAYING' :\n      'over-duration'})`);\n    // [/DEBUG]\n    abort(props);\n    props.isOn = false;\n    finishAll(props);\n\n  } else {\n    fixCurrentPosition(props);\n    abort(props);\n\n    props.state = STATE_DELAYING;\n    traceLog.push(`state:${STATE_TEXT[props.state]}`); // [DEBUG/]\n    props.isOn = false;\n    props.runTime = Date.now();\n    props.startTime = 0;\n    fireEvent(props, EVENT_TYPE_RUN);\n\n    if (props.delay > 0) {\n      props.timer = setTimeout(() => { finishDelaying(props); }, props.delay);\n    } else {\n      if (props.delay < 0) { // Move the position to the left.\n        props.currentPosition = Math.max(props.currentPosition + props.delay, 0);\n      }\n      finishDelaying(props);\n    }\n  }\n  traceLog.push('</off>'); // [DEBUG/]\n}\n\n/**\n * @param {props} props - `props` of instance.\n * @param {Object} newOptions - New options.\n * @returns {void}\n */\nfunction setOptions(props, newOptions) {\n  const options = props.options;\n\n  function parseAsCss(option) {\n    const optionValue = typeof newOptions[option] === 'number' ? // From CSS\n      (props.window.getComputedStyle(props.element, '')[\n          CSSPrefix.getName(`transition-${option}`)] || '')\n        .split(',')[newOptions[option]] :\n      newOptions[option];\n    // [DEBUG]\n    props.lastParseAsCss[option] = typeof optionValue === 'string' ? optionValue.trim() : null;\n    // [/DEBUG]\n    return typeof optionValue === 'string' ? optionValue.trim() : null;\n  }\n\n  // pseudoElement\n  if (typeof newOptions.pseudoElement === 'string') {\n    options.pseudoElement = newOptions.pseudoElement;\n  }\n\n  // property\n  {\n    const value = parseAsCss('property');\n    if (typeof value === 'string' && value !== 'all' && value !== 'none') {\n      options.property = value;\n    }\n  }\n\n  // duration, delay\n  ['duration', 'delay'].forEach(option => {\n    const value = parseAsCss(option);\n    if (typeof value === 'string') {\n      let matches, timeValue;\n      if (/^[0\\.]+$/.test(value)) { // This is invalid for CSS.\n        options[option] = '0s';\n        props[option] = 0;\n      } else if ((matches = /^(.+?)(m)?s$/.exec(value)) &&\n          isFinite((timeValue = parseFloat(matches[1]))) &&\n          (option !== 'duration' || timeValue >= 0)) {\n        options[option] = `${timeValue}${matches[2] || ''}s`;\n        props[option] = timeValue * (matches[2] ? 1 : 1000);\n      }\n    }\n  });\n\n  // procToOn, procToOff\n  ['procToOn', 'procToOff'].forEach(option => {\n    if (typeof newOptions[option] === 'function') {\n      options[option] = newOptions[option];\n    } else if (newOptions.hasOwnProperty(option) && newOptions[option] == null) {\n      options[option] = void 0;\n    }\n  });\n}\n\nclass TimedTransition {\n  /**\n   * Create a `TimedTransition` instance.\n   * @param {Element} element - Target element.\n   * @param {Object} [options] - Options.\n   * @param {boolean} [initOn] - Initial `on`.\n   */\n  constructor(element, options, initOn) {\n    const props = {\n      ins: this,\n      options: { // Initial options (not default)\n        pseudoElement: '',\n        property: ''\n      },\n      duration: 0,\n      delay: 0,\n      isOn: !!initOn\n    };\n    props.lastParseAsCss = {}; // [DEBUG/]\n\n    Object.defineProperty(this, '_id', {value: ++insId});\n    props._id = this._id;\n    insProps[this._id] = props;\n\n    if (!element.nodeType || element.nodeType !== Node.ELEMENT_NODE) {\n      throw new Error('This `element` is not accepted.');\n    }\n    props.element = element;\n    props.window = element.ownerDocument.defaultView;\n    if (!options) {\n      options = {};\n    } else if (!isObject(options)) {\n      throw new Error('Invalid options.');\n    }\n\n    // Default options\n    if (!options.hasOwnProperty('property')) { options.property = 0; }\n    if (!options.hasOwnProperty('duration')) { options.duration = 0; }\n    if (!options.hasOwnProperty('delay')) { options.delay = 0; }\n\n    setOptions(props, options);\n    finishAll(props);\n  }\n\n  /**\n   * @param {Object} options - New options.\n   * @returns {TimedTransition} Current instance itself.\n   */\n  setOptions(options) {\n    if (isObject(options)) {\n      setOptions(insProps[this._id], options);\n    }\n    return this;\n  }\n\n  /**\n   * Set `on`.\n   * @param {boolean} [force] - Set `on` it immediately without transition.\n   * @param {Object} [options] - New options.\n   * @returns {TimedTransition} Current instance itself.\n   */\n  on(force, options) {\n    if (arguments.length < 2 && typeof force !== 'boolean') {\n      options = force;\n      force = false;\n    }\n\n    this.setOptions(options);\n    on(insProps[this._id], force);\n    return this;\n  }\n\n  /**\n   * Set 'off'.\n   * @param {boolean} [force] - Set `off` it immediately without transition.\n   * @returns {TimedTransition} Current instance itself.\n   */\n  off(force) {\n    off(insProps[this._id], force);\n    return this;\n  }\n\n  get state() { return insProps[this._id].state; }\n\n  get element() { return insProps[this._id].element; }\n\n  get isReversing() { return insProps[this._id].isReversing; }\n\n  get pseudoElement() { return insProps[this._id].options.pseudoElement; }\n  set pseudoElement(value) { setOptions(insProps[this._id], {pseudoElement: value}); }\n\n  get property() { return insProps[this._id].options.property; }\n  set property(value) { setOptions(insProps[this._id], {property: value}); }\n\n  get duration() { return insProps[this._id].options.duration; }\n  set duration(value) { setOptions(insProps[this._id], {duration: value}); }\n\n  get delay() { return insProps[this._id].options.delay; }\n  set delay(value) { setOptions(insProps[this._id], {delay: value}); }\n\n  get procToOn() { return insProps[this._id].options.procToOn; }\n  set procToOn(value) { setOptions(insProps[this._id], {procToOn: value}); }\n\n  get procToOff() { return insProps[this._id].options.procToOff; }\n  set procToOff(value) { setOptions(insProps[this._id], {procToOff: value}); }\n\n  static get STATE_STOPPED() { return STATE_STOPPED; }\n  static get STATE_DELAYING() { return STATE_DELAYING; }\n  static get STATE_PLAYING() { return STATE_PLAYING; }\n}\n\n// [DEBUG]\nTimedTransition.insProps = insProps;\nTimedTransition.traceLog = traceLog;\nTimedTransition.STATE_TEXT = STATE_TEXT;\nTimedTransition.roundTime = roundTime;\n// [/DEBUG]\n\nexport default TimedTransition;\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/timed-transition/src/timed-transition.js","module.exports = \".plainoverlay{-webkit-tap-highlight-color:transparent;transform:translateZ(0);box-shadow:0 0 1px transparent}.plainoverlay{position:absolute;left:0;top:0;overflow:hidden;background-color:rgba(136,136,136,0.6);cursor:wait;z-index:9000;-webkit-transition-property:opacity;-moz-transition-property:opacity;-o-transition-property:opacity;transition-property:opacity;-webkit-transition-duration:200ms;-moz-transition-duration:200ms;-o-transition-duration:200ms;transition-duration:200ms;-webkit-transition-timing-function:linear;-moz-transition-timing-function:linear;-o-transition-timing-function:linear;transition-timing-function:linear;opacity:0}.plainoverlay.plainoverlay-show{opacity:1}.plainoverlay.plainoverlay-force{-webkit-transition-property:none;-moz-transition-property:none;-o-transition-property:none;transition-property:none}.plainoverlay.plainoverlay-hide{display:none}.plainoverlay.plainoverlay-doc{position:fixed;left:-200px;top:-200px;overflow:visible;padding:200px;width:100vw;height:100vh}.plainoverlay-body{width:100%;height:100%;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;align-items:center}.plainoverlay.plainoverlay-doc .plainoverlay-body{width:100vw;height:100vh}\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/default.scss\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}